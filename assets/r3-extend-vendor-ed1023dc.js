import{r as e,a as t,g as n,_ as r,R as i}from"./react-vendor-670efa73.js";import{L as o,T as a,R as s,U as l,a as c,V as u,b as h,B as d,M as f,C as p,O as m,P as v,S as g,c as y,N as A,A as b,W as _,d as w,e as C,f as E,g as x,h as B,i as S,D as T,Q as M,j as R,k as O,E as D,l as F,m as U,n as I,o as k,p as P,q as L,r as G,s as z,t as H,I as N,u as j,v as J,w as K,x as W,y as V,z as X,F as Y,G as Q,H as Z,J as q,K as $,X as ee,Y as te,Z as ne,_ as re,$ as ie,a0 as oe,a1 as ae,a2 as se,a3 as le,a4 as ce,a5 as ue,a6 as he,a7 as de,a8 as fe,a9 as pe,aa as me,ab as ve,ac as ge,ad as ye,ae as Ae,af as be,ag as _e,ah as we,ai as Ce,aj as Ee,ak as xe,al as Be,am as Se,an as Te,ao as Me,ap as Re,aq as Oe,ar as De,as as Fe,at as Ue,au as Ie,av as ke,aw as Pe,ax as Le,ay as Ge,az as ze,aA as He,aB as Ne,aC as je,aD as Je,aE as Ke,aF as We,aG as Ve,aH as Xe,aI as Ye,aJ as Qe,aK as Ze,aL as qe,aM as $e,aN as et,aO as tt,aP as nt,aQ as rt,aR as it,aS as ot,aT as at,aU as st,aV as lt,aW as ct,aX as ut,aY as ht,aZ as dt,a_ as ft,a$ as pt,b0 as mt,b1 as vt,b2 as gt,b3 as yt,b4 as At,b5 as bt,b6 as _t}from"./three-vendor-6d04682c.js";var wt,Ct={},Et=e;wt=Ct.createRoot=Et.createRoot,Ct.hydrateRoot=Et.hydrateRoot;var xt={exports:{}},Bt={
/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
ConcurrentRoot:1,ContinuousEventPriority:4,DefaultEventPriority:16,DiscreteEventPriority:1,IdleEventPriority:536870912,LegacyRoot:0};xt.exports=Bt;var St=xt.exports;function Tt(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const Mt="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function Rt(e){const n="function"==typeof e?Tt(e):e,r=(e=n.getState,r=Object.is)=>{const[,i]=t.useReducer((e=>e+1),0),o=n.getState(),a=t.useRef(o),s=t.useRef(e),l=t.useRef(r),c=t.useRef(!1),u=t.useRef();let h;void 0===u.current&&(u.current=e(o));let d=!1;(a.current!==o||s.current!==e||l.current!==r||c.current)&&(h=e(o),d=!r(u.current,h)),Mt((()=>{d&&(u.current=h),a.current=o,s.current=e,l.current=r,c.current=!1}));const f=t.useRef(o);Mt((()=>{const e=()=>{try{const e=n.getState(),t=s.current(e);l.current(u.current,t)||(a.current=e,u.current=t,i())}catch(e){c.current=!0,i()}},t=n.subscribe(e);return n.getState()!==f.current&&e(),t}),[]);const p=d?h:u.current;return t.useDebugValue(p),p};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,n];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}var Ot={exports:{}},Dt={exports:{}},Ft={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,v="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function A(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(m=!1,A(e),!p)if(null!==n(l))p=!0,D(_);else{var t=n(c);null!==t&&F(b,t.startTime-e)}}function _(t,i){p=!1,m&&(m=!1,g(x),x=-1),f=!0;var o=d;try{for(A(i),h=n(l);null!==h&&(!(h.expirationTime>i)||t&&!T());){var a=h.callback;if("function"==typeof a){h.callback=null,d=h.priorityLevel;var s=a(h.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?h.callback=s:h===n(l)&&r(l),A(i)}else r(l);h=n(l)}if(null!==h)var u=!0;else{var v=n(c);null!==v&&F(b,v.startTime-i),u=!1}return u}finally{h=null,d=o,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,C=!1,E=null,x=-1,B=5,S=-1;function T(){return!(e.unstable_now()-S<B)}function M(){if(null!==E){var t=e.unstable_now();S=t;var n=!0;try{n=E(!0,t)}finally{n?w():(C=!1,E=null)}}else C=!1}if("function"==typeof y)w=function(){y(M)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,O=R.port2;R.port1.onmessage=M,w=function(){O.postMessage(null)}}else w=function(){v(M,0)};function D(e){E=e,C||(C=!0,w())}function F(t,n){x=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,D(_))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_scheduleCallback=function(r,i,o){var a=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(r.sortIndex=o,t(c,r),null===n(l)&&r===n(c)&&(m?(g(x),x=-1):m=!0,F(b,o-a))):(r.sortIndex=s,t(l,r),p||f||(p=!0,D(_))),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}}(Ft),Dt.exports=Ft;var Ut=Dt.exports;
/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ot.exports=function(e){var n={},r=t,i=Ut,o=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),_=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}function C(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return C(e(t))}catch(n){}}return null}function E(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function x(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function B(e){if(x(e)!==e)throw Error(a(188))}function S(e){var t=e.alternate;if(!t){if(null===(t=x(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return B(i),e;if(o===r)return B(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function T(e){return null!==(e=S(e))?M(e):null}function M(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=M(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var O,D=Array.isArray,F=e.getPublicInstance,U=e.getRootHostContext,I=e.getChildHostContext,k=e.prepareForCommit,P=e.resetAfterCommit,L=e.createInstance,G=e.appendInitialChild,z=e.finalizeInitialChildren,H=e.prepareUpdate,N=e.shouldSetTextContent,j=e.createTextInstance,J=e.scheduleTimeout,K=e.cancelTimeout,W=e.noTimeout,V=e.isPrimaryRenderer,X=e.supportsMutation,Y=e.supportsPersistence,Q=e.supportsHydration,Z=e.getInstanceFromNode,q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,oe=e.getBoundingRect,ae=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,ve=e.insertBefore,ge=e.insertInContainerBefore,ye=e.removeChild,Ae=e.removeChildFromContainer,be=e.resetTextContent,_e=e.hideInstance,we=e.hideTextInstance,Ce=e.unhideInstance,Ee=e.unhideTextInstance,xe=e.clearContainer,Be=e.cloneInstance,Se=e.createContainerChildSet,Te=e.appendChildToContainerChildSet,Me=e.finalizeContainerChildren,Re=e.replaceContainerChildren,Oe=e.cloneHiddenInstance,De=e.cloneHiddenTextInstance,Fe=e.canHydrateInstance,Ue=e.canHydrateTextInstance,Ie=e.canHydrateSuspenseInstance,ke=e.isSuspenseInstancePending,Pe=e.isSuspenseInstanceFallback,Le=e.registerSuspenseInstanceRetry,Ge=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,He=e.getFirstHydratableChildWithinContainer,Ne=e.getFirstHydratableChildWithinSuspenseInstance,je=e.hydrateInstance,Je=e.hydrateTextInstance,Ke=e.hydrateSuspenseInstance,We=e.getNextHydratableInstanceAfterSuspenseInstance,Ve=e.commitHydratedContainer,Xe=e.commitHydratedSuspenseInstance,Ye=e.clearSuspenseBoundary,Qe=e.clearSuspenseBoundaryFromContainer,Ze=e.shouldDeleteUnhydratedTailInstances,qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],ot=-1;function at(e){return{current:e}}function st(e){0>ot||(e.current=it[ot],it[ot]=null,ot--)}function lt(e,t){ot++,it[ot]=e.current,e.current=t}var ct={},ut=at(ct),ht=at(!1),dt=ct;function ft(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pt(e){return null!=e.childContextTypes}function mt(){st(ht),st(ut)}function vt(e,t,n){if(ut.current!==ct)throw Error(a(168));lt(ut,t),lt(ht,n)}function gt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,E(e)||"Unknown",i));return o({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(ht,ht.current),!0}function At(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=gt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ht),st(ut),lt(ut,e)):st(ht),lt(ht,n)}var bt=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(_t(e)/wt|0)|0},_t=Math.log,wt=Math.LN2,Ct=64,Et=4194304;function xt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=xt(s):0!=(o&=a)&&(r=xt(o))}else 0!=(a=n&~i)?r=xt(a):0!==o&&(r=xt(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function St(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Tt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Ot(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dt=0;function Ft(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var It=i.unstable_scheduleCallback,kt=i.unstable_cancelCallback,Pt=i.unstable_shouldYield,Lt=i.unstable_requestPaint,Gt=i.unstable_now,zt=i.unstable_ImmediatePriority,Ht=i.unstable_UserBlockingPriority,Nt=i.unstable_NormalPriority,jt=i.unstable_IdlePriority,Jt=null,Kt=null,Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Vt=null,Xt=!1,Yt=!1;function Qt(e){null===Vt?Vt=[e]:Vt.push(e)}function Zt(){if(!Yt&&null!==Vt){Yt=!0;var e=0,t=Dt;try{var n=Vt;for(Dt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vt=null,Xt=!1}catch(i){throw null!==Vt&&(Vt=Vt.slice(e+1)),It(zt,Zt),i}finally{Dt=t,Yt=!1}}return null}var qt=s.ReactCurrentBatchConfig;function $t(e,t){if(Wt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function en(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return nt(e.type,!1);case 11:return nt(e.type.render,!1);case 1:return nt(e.type,!0);default:return""}}function tn(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var nn=at(null),rn=null,on=null,an=null;function sn(){an=on=rn=null}function ln(e,t,n){V?(lt(nn,t._currentValue),t._currentValue=n):(lt(nn,t._currentValue2),t._currentValue2=n)}function cn(e){var t=nn.current;st(nn),V?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hn(e,t){rn=e,an=on=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Pi=!0),e.firstContext=null)}function dn(e){var t=V?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===on){if(null===rn)throw Error(a(308));on=e,rn.dependencies={lanes:0,firstContext:e}}else on=on.next=e;return t}var fn=null,pn=!1;function mn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Qo&&0!=(1&e.mode)&&0==(2&Yo)?(null===(e=n.interleaved)?(t.next=t,null===fn?fn=[n]:fn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function An(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ot(e,n)}}function bn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _n(e,t,n,r){var i=e.updateQueue;pn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var h=e.alternate;null!==h&&(l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c)}if(null!==a){var d=i.baseState;for(s=0,h=u=c=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,v=l;switch(f=t,p=n,v.tag){case 1:if("function"==typeof(m=v.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=v.payload)?m.call(p,d,f):m))break e;d=o({},d,f);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ra|=s,e.lanes=s,e.memoizedState=d}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Cn=(new r.Component).refs;function En(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var xn={isMounted:function(e){return!!(e=e._reactInternals)&&x(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wa(),i=Ca(e),o=gn(r,i);o.payload=t,null!=n&&(o.callback=n),yn(e,o),null!==(t=Ea(e,i,r))&&An(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wa(),i=Ca(e),o=gn(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),yn(e,o),null!==(t=Ea(e,i,r))&&An(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wa(),r=Ca(e),i=gn(n,r);i.tag=2,null!=t&&(i.callback=t),yn(e,i),null!==(t=Ea(e,r,n))&&An(t,e,r)}};function Bn(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&$t(n,r)&&$t(i,o))}function Sn(e,t,n){var r=!1,i=ct,o=t.contextType;return"object"==typeof o&&null!==o?o=dn(o):(i=pt(t)?dt:ut.current,o=(r=null!=(r=t.contextTypes))?ft(e,i):ct),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=xn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Tn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xn.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Cn,mn(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dn(o):(o=pt(t)?dt:ut.current,i.context=ft(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(En(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&xn.enqueueReplaceState(i,i.state,null),_n(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var Rn=[],On=0,Dn=null,Fn=0,Un=[],In=0,kn=null,Pn=1,Ln="";function Gn(e,t){Rn[On++]=Fn,Rn[On++]=Dn,Dn=e,Fn=t}function zn(e,t,n){Un[In++]=Pn,Un[In++]=Ln,Un[In++]=kn,kn=e;var r=Pn;e=Ln;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var o=32-bt(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Pn=1<<32-bt(t)+i|n<<i|r,Ln=o+e}else Pn=1<<o|n<<i|r,Ln=e}function Hn(e){null!==e.return&&(Gn(e,1),zn(e,1,0))}function Nn(e){for(;e===Dn;)Dn=Rn[--On],Rn[On]=null,Fn=Rn[--On],Rn[On]=null;for(;e===kn;)kn=Un[--In],Un[In]=null,Ln=Un[--In],Un[In]=null,Pn=Un[--In],Un[In]=null}var jn=null,Jn=null,Kn=!1,Wn=!1,Vn=null;function Xn(e,t){var n=$a(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Fe(t,e.type,e.pendingProps))&&(e.stateNode=t,jn=e,Jn=ze(t),!0);case 6:return null!==(t=Ue(t,e.pendingProps))&&(e.stateNode=t,jn=e,Jn=null,!0);case 13:if(null!==(t=Ie(t))){var n=null!==kn?{id:Pn,overflow:Ln}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=$a(18,null,null,0)).stateNode=t,n.return=e,e.child=n,jn=e,Jn=null,!0}return!1;default:return!1}}function Qn(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Zn(e){if(Kn){var t=Jn;if(t){var n=t;if(!Yn(e,t)){if(Qn(e))throw Error(a(418));t=Ge(n);var r=jn;t&&Yn(e,t)?Xn(r,n):(e.flags=-4097&e.flags|2,Kn=!1,jn=e)}}else{if(Qn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Kn=!1,jn=e}}}function qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jn=e}function $n(e){if(!Q||e!==jn)return!1;if(!Kn)return qn(e),Kn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ze(e.type)&&!N(e.type,e.memoizedProps))){var t=Jn;if(t){if(Qn(e)){for(e=Jn;e;)e=Ge(e);throw Error(a(418))}for(;t;)Xn(e,t),t=Ge(t)}}if(qn(e),13===e.tag){if(!Q)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Jn=We(e)}else Jn=jn?Ge(e.stateNode):null;return!0}function er(){Q&&(Jn=jn=null,Wn=Kn=!1)}function tr(e){null===Vn?Vn=[e]:Vn.push(e)}function nr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===Cn&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function rr(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ir(e){return(0,e._init)(e._payload)}function or(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ts(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=os(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var o=n.type;return o===u?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===A&&ir(o)===t.type)?((r=i(t,n.props)).ref=nr(e,t,n),r.return=e,r):((r=ns(n.type,n.key,n.props,null,e.mode,r)).ref=nr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=rs(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=os(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ns(t.type,t.key,t.props,null,e.mode,n)).ref=nr(e,null,t),n.return=e,n;case c:return(t=as(t,e.mode,n)).return=e,t;case A:return m(e,(0,t._init)(t._payload),n)}if(D(t)||w(t))return(t=rs(t,e.mode,n,null)).return=e,t;rr(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:h(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case c:return n.key===i?f(e,t,n,r):null;case A:return v(e,t,(i=n._init)(n._payload),r)}if(D(n)||w(n))return null!==i?null:p(e,t,n,r,null);rr(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return g(e,t,n,(0,r._init)(r._payload),i)}if(D(r)||w(r))return p(t,e=e.get(n)||null,r,i,null);rr(t,r)}return null}return function h(d,f,p,y){if("object"==typeof p&&null!==p&&p.type===u&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case l:e:{for(var b=p.key,_=f;null!==_;){if(_.key===b){if((b=p.type)===u){if(7===_.tag){n(d,_.sibling),(f=i(_,p.props.children)).return=d,d=f;break e}}else if(_.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===A&&ir(b)===_.type){n(d,_.sibling),(f=i(_,p.props)).ref=nr(d,_,p),f.return=d,d=f;break e}n(d,_);break}t(d,_),_=_.sibling}p.type===u?((f=rs(p.props.children,d.mode,y,p.key)).return=d,d=f):((y=ns(p.type,p.key,p.props,null,d.mode,y)).ref=nr(d,f,p),y.return=d,d=y)}return s(d);case c:e:{for(_=p.key;null!==f;){if(f.key===_){if(4===f.tag&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(d,f.sibling),(f=i(f,p.children||[])).return=d,d=f;break e}n(d,f);break}t(d,f),f=f.sibling}(f=as(p,d.mode,y)).return=d,d=f}return s(d);case A:return h(d,f,(_=p._init)(p._payload),y)}if(D(p))return function(i,a,s,l){for(var c=null,u=null,h=a,d=a=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=v(i,h,s[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),a=o(p,a,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===s.length)return n(i,h),Kn&&Gn(i,d),c;if(null===h){for(;d<s.length;d++)null!==(h=m(i,s[d],l))&&(a=o(h,a,d),null===u?c=h:u.sibling=h,u=h);return Kn&&Gn(i,d),c}for(h=r(i,h);d<s.length;d++)null!==(f=g(h,i,d,s[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=o(f,a,d),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach((function(e){return t(i,e)})),Kn&&Gn(i,d),c}(d,f,p,y);if(w(p))return function(i,s,l,c){var u=w(l);if("function"!=typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,d=s,f=s=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var A=v(i,d,y.value,c);if(null===A){null===d&&(d=p);break}e&&d&&null===A.alternate&&t(i,d),s=o(A,s,f),null===h?u=A:h.sibling=A,h=A,d=p}if(y.done)return n(i,d),Kn&&Gn(i,f),u;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=m(i,y.value,c))&&(s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return Kn&&Gn(i,f),u}for(d=r(i,d);!y.done;f++,y=l.next())null!==(y=g(d,i,f,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return e&&d.forEach((function(e){return t(i,e)})),Kn&&Gn(i,f),u}(d,f,p,y);rr(d,p)}return"string"==typeof p&&""!==p||"number"==typeof p?(p=""+p,null!==f&&6===f.tag?(n(d,f.sibling),(f=i(f,p)).return=d,d=f):(n(d,f),(f=os(p,d.mode,y)).return=d,d=f),s(d)):n(d,f)}}var ar=or(!0),sr=or(!1),lr={},cr=at(lr),ur=at(lr),hr=at(lr);function dr(e){if(e===lr)throw Error(a(174));return e}function fr(e,t){lt(hr,t),lt(ur,e),lt(cr,lr),e=U(t),st(cr),lt(cr,e)}function pr(){st(cr),st(ur),st(hr)}function mr(e){var t=dr(hr.current),n=dr(cr.current);n!==(t=I(n,e.type,t))&&(lt(ur,e),lt(cr,t))}function vr(e){ur.current===e&&(st(cr),st(ur))}var gr=at(0);function yr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||ke(n)||Pe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ar=[];function br(){for(var e=0;e<Ar.length;e++){var t=Ar[e];V?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}Ar.length=0}var _r=s.ReactCurrentDispatcher,wr=s.ReactCurrentBatchConfig,Cr=0,Er=null,xr=null,Br=null,Sr=!1,Tr=!1,Mr=0,Rr=0;function Or(){throw Error(a(321))}function Dr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Fr(e,t,n,r,i,o){if(Cr=o,Er=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_r.current=null===e||null===e.memoizedState?mi:vi,e=n(r,i),Tr){o=0;do{if(Tr=!1,Mr=0,25<=o)throw Error(a(301));o+=1,Br=xr=null,t.updateQueue=null,_r.current=gi,e=n(r,i)}while(Tr)}if(_r.current=pi,t=null!==xr&&null!==xr.next,Cr=0,Br=xr=Er=null,Sr=!1,t)throw Error(a(300));return e}function Ur(){var e=0!==Mr;return Mr=0,e}function Ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Br?Er.memoizedState=Br=e:Br=Br.next=e,Br}function kr(){if(null===xr){var e=Er.alternate;e=null!==e?e.memoizedState:null}else e=xr.next;var t=null===Br?Er.memoizedState:Br.next;if(null!==t)Br=t,xr=e;else{if(null===e)throw Error(a(310));e={memoizedState:(xr=e).memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},null===Br?Er.memoizedState=Br=e:Br=Br.next=e}return Br}function Pr(e,t){return"function"==typeof t?t(e):t}function Lr(e){var t=kr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=xr,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((Cr&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,Er.lanes|=h,ra|=h}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,Wt(r,t.memoizedState)||(Pi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,Er.lanes|=o,ra|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gr(e){var t=kr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Wt(o,t.memoizedState)||(Pi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function zr(){}function Hr(e,t){var n=Er,r=kr(),i=t(),o=!Wt(r.memoizedState,i);if(o&&(r.memoizedState=i,Pi=!0),r=r.queue,qr(Jr.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==Br&&1&Br.memoizedState.tag){if(n.flags|=2048,Vr(9,jr.bind(null,n,r,i,t),void 0,null),null===Qo)throw Error(a(349));0!=(30&Cr)||Nr(n,t,i)}return i}function Nr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Er.updateQueue)?(t={lastEffect:null,stores:null},Er.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jr(e,t,n,r){t.value=n,t.getSnapshot=r,Kr(t)&&Ea(e,1,-1)}function Jr(e,t,n){return n((function(){Kr(t)&&Ea(e,1,-1)}))}function Kr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function Wr(e){var t=Ir();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:e},t.queue=e,e=e.dispatch=ci.bind(null,Er,e),[t.memoizedState,e]}function Vr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Er.updateQueue)?(t={lastEffect:null,stores:null},Er.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xr(){return kr().memoizedState}function Yr(e,t,n,r){var i=Ir();Er.flags|=e,i.memoizedState=Vr(1|t,n,void 0,void 0===r?null:r)}function Qr(e,t,n,r){var i=kr();r=void 0===r?null:r;var o=void 0;if(null!==xr){var a=xr.memoizedState;if(o=a.destroy,null!==r&&Dr(r,a.deps))return void(i.memoizedState=Vr(t,n,o,r))}Er.flags|=e,i.memoizedState=Vr(1|t,n,o,r)}function Zr(e,t){return Yr(8390656,8,e,t)}function qr(e,t){return Qr(2048,8,e,t)}function $r(e,t){return Qr(4,2,e,t)}function ei(e,t){return Qr(4,4,e,t)}function ti(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ni(e,t,n){return n=null!=n?n.concat([e]):null,Qr(4,4,ti.bind(null,t,e),n)}function ri(){}function ii(e,t){var n=kr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Dr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oi(e,t){var n=kr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Dr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{Dt=n,wr.transition=r}}function si(){return kr().memoizedState}function li(e,t,n){var r=Ca(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?hi(t,n):(di(e,t,n),null!==(e=Ea(e,r,n=wa()))&&fi(e,t,r))}function ci(e,t,n){var r=Ca(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))hi(t,i);else{di(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wt(s,a))return}catch(l){}null!==(e=Ea(e,r,n=wa()))&&fi(e,t,r)}}function ui(e){var t=e.alternate;return e===Er||null!==t&&t===Er}function hi(e,t){Tr=Sr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function di(e,t,n){null!==Qo&&0!=(1&e.mode)&&0==(2&Yo)?(null===(e=t.interleaved)?(n.next=n,null===fn?fn=[t]:fn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function fi(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ot(e,n)}}var pi={readContext:dn,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},mi={readContext:dn,useCallback:function(e,t){return Ir().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Zr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Yr(4194308,4,ti.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=Ir();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ir();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=li.bind(null,Er,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ir().memoizedState=e},useState:Wr,useDebugValue:ri,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Zr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=ai.bind(null,e[1]),Ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Er,i=Ir();if(Kn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Qo)throw Error(a(349));0!=(30&Cr)||Nr(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Zr(Jr.bind(null,r,o,e),[e]),r.flags|=2048,Vr(9,jr.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ir(),t=Qo.identifierPrefix;if(Kn){var n=Ln;t=":"+t+"R"+(n=(Pn&~(1<<32-bt(Pn)-1)).toString(32)+n),0<(n=Mr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Rr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vi={readContext:dn,useCallback:ii,useContext:dn,useEffect:qr,useImperativeHandle:ni,useInsertionEffect:$r,useLayoutEffect:ei,useMemo:oi,useReducer:Lr,useRef:Xr,useState:function(){return Lr(Pr)},useDebugValue:ri,useDeferredValue:function(e){var t=Lr(Pr),n=t[0],r=t[1];return qr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Lr(Pr)[0],kr().memoizedState]},useMutableSource:zr,useSyncExternalStore:Hr,useId:si,unstable_isNewReconciler:!1},gi={readContext:dn,useCallback:ii,useContext:dn,useEffect:qr,useImperativeHandle:ni,useInsertionEffect:$r,useLayoutEffect:ei,useMemo:oi,useReducer:Gr,useRef:Xr,useState:function(){return Gr(Pr)},useDebugValue:ri,useDeferredValue:function(e){var t=Gr(Pr),n=t[0],r=t[1];return qr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Gr(Pr)[0],kr().memoizedState]},useMutableSource:zr,useSyncExternalStore:Hr,useId:si,unstable_isNewReconciler:!1};function yi(e,t){try{var n="",r=t;do{n+=en(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function Ai(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var bi,_i,wi,Ci,Ei="function"==typeof WeakMap?WeakMap:Map;function xi(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){da||(da=!0,fa=r),Ai(0,t)},n}function Bi(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ai(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){Ai(0,t),"function"!=typeof r&&(null===pa?pa=new Set([this]):pa.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Si(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ei;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Va.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Mi(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,yn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ri(e){e.flags|=4}function Oi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!=(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!=(12854&e.flags)||0!=(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(X)bi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)G(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_i=function(){},wi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=dr(cr.current);n=H(o,n,e,r,i,a),(t.updateQueue=n)&&Ri(t)}},Ci=function(e,t,n,r){n!==r&&Ri(t)};else if(Y){bi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Oe(o,i.type,i.memoizedProps,i)),G(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=De(o,i.memoizedProps,i)),G(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),bi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Di=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Oe(o,i.type,i.memoizedProps,i)),Te(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=De(o,i.memoizedProps,i)),Te(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Di(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};_i=function(e,t){var n=t.stateNode;if(!Oi(e,t)){e=n.containerInfo;var r=Se(e);Di(r,t,!1,!1),n.pendingChildren=r,Ri(t),Me(e,r)}},wi=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=Oi(e,t))&&a===r)t.stateNode=o;else{var s=t.stateNode,l=dr(cr.current),c=null;a!==r&&(c=H(s,n,a,r,i,l)),e&&null===c?t.stateNode=o:(o=Be(o,c,n,a,r,t,e,s),z(o,n,r,i,l)&&Ri(t),t.stateNode=o,e?Ri(t):bi(o,t,!1,!1))}},Ci=function(e,t,n,r){n!==r?(e=dr(hr.current),n=dr(cr.current),t.stateNode=j(r,e,n,t),Ri(t)):t.stateNode=e.stateNode}}else _i=function(){},wi=function(){},Ci=function(){};function Fi(e,t){if(!Kn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ui(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ii(e,t,n){var r=t.pendingProps;switch(Nn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(t),null;case 1:case 17:return pt(t.type)&&mt(),Ui(t),null;case 3:return r=t.stateNode,pr(),st(ht),st(ut),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||($n(t)?Ri(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Vn&&(Ma(Vn),Vn=null))),_i(e,t),Ui(t),null;case 5:vr(t),n=dr(hr.current);var i=t.type;if(null!==e&&null!=t.stateNode)wi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ui(t),null}if(e=dr(cr.current),$n(t)){if(!Q)throw Error(a(175));e=je(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&Ri(t)}else{var o=L(i,r,n,e,t);bi(o,t,!1,!1),t.stateNode=o,z(o,i,r,n,e)&&Ri(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ui(t),null;case 6:if(e&&null!=t.stateNode)Ci(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=dr(hr.current),n=dr(cr.current),$n(t)){if(!Q)throw Error(a(176));if(e=t.stateNode,r=t.memoizedProps,(n=Je(e,r,t,!Wn))&&null!==(i=jn))switch(o=0!=(1&i.mode),i.tag){case 3:qe(i.stateNode.containerInfo,e,r,o);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,o)}n&&Ri(t)}else t.stateNode=j(r,e,n,t)}return Ui(t),null;case 13:if(st(gr),r=t.memoizedState,Kn&&null!==Jn&&0!=(1&t.mode)&&0==(128&t.flags)){for(e=Jn;e;)e=Ge(e);return er(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=$n(t),null===e){if(!r)throw Error(a(318));if(!Q)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));Ke(e,t)}else er(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ui(t),null}return null!==Vn&&(Ma(Vn),Vn=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?$n(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&gr.current)?0===ta&&(ta=3):Pa())),null!==t.updateQueue&&(t.flags|=4),Ui(t),null);case 4:return pr(),_i(e,t),null===e&&q(t.stateNode.containerInfo),Ui(t),null;case 10:return cn(t.type._context),Ui(t),null;case 19:if(st(gr),null===(i=t.memoizedState))return Ui(t),null;if(r=0!=(128&t.flags),null===(o=i.rendering))if(r)Fi(i,!1);else{if(0!==ta||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=yr(e))){for(t.flags|=128,Fi(i,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Gt()>ca&&(t.flags|=128,r=!0,Fi(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=yr(o))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Fi(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Kn)return Ui(t),null}else 2*Gt()-i.renderingStartTime>ca&&1073741824!==n&&(t.flags|=128,r=!0,Fi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Gt(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Ui(t),null);case 22:case 23:return Fa(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&$o)&&(Ui(t),X&&6&t.subtreeFlags&&(t.flags|=8192)):Ui(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var ki=s.ReactCurrentOwner,Pi=!1;function Li(e,t,n,r){t.child=null===e?sr(t,null,n,r):ar(t,e.child,n,r)}function Gi(e,t,n,r,i){n=n.render;var o=t.ref;return hn(t,i),r=Fr(e,t,n,r,o,i),n=Ur(),null===e||Pi?(Kn&&n&&Hn(t),t.flags|=1,Li(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,oo(e,t,i))}function zi(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||es(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ns(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Hi(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:$t)(a,r)&&e.ref===t.ref)return oo(e,t,i)}return t.flags|=1,(e=ts(o,r)).ref=t.ref,e.return=t,t.child=e}function Hi(e,t,n,r,i){if(null!==e&&$t(e.memoizedProps,r)&&e.ref===t.ref){if(Pi=!1,0==(e.lanes&i))return t.lanes=e.lanes,oo(e,t,i);0!=(131072&e.flags)&&(Pi=!0)}return Ji(e,t,n,r,i)}function Ni(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(ea,$o),$o|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(ea,$o),$o|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,lt(ea,$o),$o|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt(ea,$o),$o|=r;return Li(e,t,i,n),t.child}function ji(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ji(e,t,n,r,i){var o=pt(n)?dt:ut.current;return o=ft(t,o),hn(t,i),n=Fr(e,t,n,r,o,i),r=Ur(),null===e||Pi?(Kn&&r&&Hn(t),t.flags|=1,Li(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,oo(e,t,i))}function Ki(e,t,n,r,i){if(pt(n)){var o=!0;yt(t)}else o=!1;if(hn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Sn(t,n,r),Mn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;c="object"==typeof c&&null!==c?dn(c):ft(t,c=pt(n)?dt:ut.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Tn(t,a,r,c),pn=!1;var d=t.memoizedState;a.state=d,_n(t,r,a,i),l=t.memoizedState,s!==r||d!==l||ht.current||pn?("function"==typeof u&&(En(t,n,u,r),l=t.memoizedState),(s=pn||Bn(t,n,s,r,d,l,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,vn(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:tn(t.type,s),a.props=c,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?dn(l):ft(t,l=pt(n)?dt:ut.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Tn(t,a,r,l),pn=!1,d=t.memoizedState,a.state=d,_n(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||ht.current||pn?("function"==typeof f&&(En(t,n,f,r),p=t.memoizedState),(c=pn||Bn(t,n,c,r,d,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Wi(e,t,n,r,o,i)}function Wi(e,t,n,r,i,o){ji(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&At(t,n,!1),oo(e,t,o);r=t.stateNode,ki.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ar(t,e.child,null,o),t.child=ar(t,null,s,o)):Li(e,t,s,o),t.memoizedState=r.state,i&&At(t,n,!0),t.child}function Vi(e){var t=e.stateNode;t.pendingContext?vt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vt(0,t.context,!1),fr(e,t.containerInfo)}function Xi(e,t,n,r,i){return er(),tr(i),t.flags|=256,Li(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Qi(e){return{baseLanes:e,cachePool:null}}function Zi(e,t,n){var r,i=t.pendingProps,o=gr.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(gr,1&o),null===e)return Zn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:Pe(e)?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=is(o,i,0,null),e=rs(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qi(n),t.memoizedState=Yi,e):qi(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,to(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=is({mode:"visible",children:i.children},o,0,null),(s=rs(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!=(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Qi(n),t.memoizedState=Yi,s);if(0==(1&t.mode))t=to(e,t,n,null);else if(Pe(r))t=to(e,t,n,Error(a(419)));else if(i=0!=(n&e.childLanes),Pi||i){if(null!==(i=Qo)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Ea(e,i,-1))}Pa(),t=to(e,t,n,Error(a(421)))}else ke(r)?(t.flags|=128,t.child=e.child,t=Ya.bind(null,e),Le(r,t),t=null):(n=o.treeContext,Q&&(Jn=Ne(r),jn=t,Kn=!0,Vn=null,Wn=!1,null!==n&&(Un[In++]=Pn,Un[In++]=Ln,Un[In++]=kn,Pn=n.id,Ln=n.overflow,kn=t)),(t=qi(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=eo(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Qi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=$i(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=eo(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Qi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=$i(e,t,i.children,n),t.memoizedState=null,n)}function qi(e,t){return(t=is({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $i(e,t,n,r){var i=e.child;return e=i.sibling,n=ts(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function eo(e,t,n,r,i){var o=t.mode,a=(e=e.child).sibling,s={mode:"hidden",children:n};return 0==(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=ts(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==a?r=ts(a,r):(r=rs(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function to(e,t,n,r){return null!==r&&tr(r),ar(t,e.child,null,n),(e=qi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function no(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function ro(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function io(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Li(e,t,r.children,n),0!=(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&no(e,n,t);else if(19===e.tag)no(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===yr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ro(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===yr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ro(t,!0,n,null,o);break;case"together":ro(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ra|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=ts(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ts(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ao(e,t){switch(Nn(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pr(),st(ht),st(ut),br(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return vr(t),null;case 13:if(st(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));er()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(gr),null;case 4:return pr(),null;case 10:return cn(t.type._context),null;case 22:case 23:return Fa(),null;default:return null}}var so=!1,lo=!1,co="function"==typeof WeakSet?WeakSet:Set,uo=null;function ho(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Wa(e,t,r)}else n.current=null}function fo(e,t,n){try{n()}catch(r){Wa(e,t,r)}}var po=!1;function mo(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&fo(t,n,o)}i=i.next}while(i!==r)}}function vo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function go(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?F(n):n,"function"==typeof t?t(e):t.current=e}}function yo(e,t,n){if(Kt&&"function"==typeof Kt.onCommitFiberUnmount)try{Kt.onCommitFiberUnmount(Jt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!=(2&i)||0!=(4&i))&&fo(t,n,o),r=r.next}while(r!==e)}break;case 1:if(ho(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:ho(t,n);break;case 4:X?Bo(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Se(t),Re(t,n))}}function Ao(e,t,n){for(var r=t;;)if(yo(e,r,n),null===r.child||X&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function bo(e){var t=e.alternate;null!==t&&(e.alternate=null,bo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&ee(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _o(e){return 5===e.tag||3===e.tag||4===e.tag}function wo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_o(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Co(e){if(X){e:{for(var t=e.return;null!==t;){if(_o(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),xo(e,n=wo(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,Eo(e,n=wo(e),t);break;default:throw Error(a(161))}}}function Eo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Eo(e,t,n),e=e.sibling;null!==e;)Eo(e,t,n),e=e.sibling}function xo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(xo(e,t,n),e=e.sibling;null!==e;)xo(e,t,n),e=e.sibling}function Bo(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag)Ao(e,o,n),i?Ae(r,o.stateNode):ye(r,o.stateNode);else if(18===o.tag)i?Qe(r,o.stateNode):Ye(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(yo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function So(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:return mo(3,t,t.return),vo(3,t),void mo(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Q&&null!==e&&e.memoizedState.isDehydrated&&Ve(t.stateNode.containerInfo));case 13:case 19:return void To(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return mo(3,t,t.return),vo(3,t),void mo(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void To(t);case 3:Q&&null!==e&&e.memoizedState.isDehydrated&&Ve(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function To(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new co),t.forEach((function(t){var r=Qa.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Mo(e,t,n){uo=e,Ro(e)}function Ro(e,t,n){for(var r=0!=(1&e.mode);null!==uo;){var i=uo,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||so;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||lo;s=so;var c=lo;if(so=a,(lo=l)&&!c)for(uo=i;null!==uo;)l=(a=uo).child,22===a.tag&&null!==a.memoizedState?Fo(i):null!==l?(l.return=a,uo=l):Fo(i);for(;null!==o;)uo=o,Ro(o),o=o.sibling;uo=i,so=s,lo=c}Oo(e)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,uo=o):Oo(e)}}function Oo(e){for(;null!==uo;){var t=uo;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:lo||vo(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!lo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&wn(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=F(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Q&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Xe(h)}}}break;default:throw Error(a(163))}lo||512&t.flags&&go(t)}catch(d){Wa(t,t.return,d)}}if(t===e){uo=null;break}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}function Do(e){for(;null!==uo;){var t=uo;if(t===e){uo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,uo=n;break}uo=t.return}}function Fo(e){for(;null!==uo;){var t=uo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(l){Wa(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Wa(t,i,l)}}var o=t.return;try{go(t)}catch(l){Wa(t,o,l)}break;case 5:var a=t.return;try{go(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){uo=null;break}var s=t.sibling;if(null!==s){s.return=t.return,uo=s;break}uo=t.return}}var Uo=0,Io=1,ko=2,Po=3,Lo=4;if("function"==typeof Symbol&&Symbol.for){var Go=Symbol.for;Uo=Go("selector.component"),Io=Go("selector.has_pseudo_class"),ko=Go("selector.role"),Po=Go("selector.test_id"),Lo=Go("selector.text")}function zo(e){var t=Z(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=ie(e)))throw Error(a(362));return e.stateNode.current}function Ho(e,t){switch(t.$$typeof){case Uo:if(e.type===t.value)return!0;break;case Io:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!se(r)){for(;null!=o&&Ho(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case ko:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Lo:if((5===e.tag||6===e.tag)&&null!==(e=ae(e))&&0<=e.indexOf(t.value))return!0;break;case Po:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function No(e){switch(e.$$typeof){case Uo:return"<"+(C(e.value)||"Unknown")+">";case Io:return":has("+(No(e)||"")+")";case ko:return'[role="'+e.value+'"]';case Lo:return'"'+e.value+'"';case Po:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function jo(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!se(i)){for(;null!=a&&Ho(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Jo(e,t){if(!re)throw Error(a(363));e=jo(e=zo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ko=Math.ceil,Wo=s.ReactCurrentDispatcher,Vo=s.ReactCurrentOwner,Xo=s.ReactCurrentBatchConfig,Yo=0,Qo=null,Zo=null,qo=0,$o=0,ea=at(0),ta=0,na=null,ra=0,ia=0,oa=0,aa=null,sa=null,la=0,ca=1/0;function ua(){ca=Gt()+500}var ha,da=!1,fa=null,pa=null,ma=!1,va=null,ga=0,ya=0,Aa=null,ba=-1,_a=0;function wa(){return 0!=(6&Yo)?Gt():-1!==ba?ba:ba=Gt()}function Ca(e){return 0==(1&e.mode)?1:0!=(2&Yo)&&0!==qo?qo&-qo:null!==qt.transition?(0===_a&&(e=Ct,0==(4194240&(Ct<<=1))&&(Ct=64),_a=e),_a):0!==(e=Dt)?e:$()}function Ea(e,t,n){if(50<ya)throw ya=0,Aa=null,Error(a(185));var r=xa(e,t);return null===r?null:(Rt(r,t,n),0!=(2&Yo)&&r===Qo||(r===Qo&&(0==(2&Yo)&&(ia|=t),4===ta&&Ra(r,qo)),Ba(r,n),1===t&&0===Yo&&0==(1&e.mode)&&(ua(),Xt&&Zt())),r)}function xa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ba(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-bt(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=St(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=Bt(e,e===Qo?qo:0);if(0===r)null!==n&&kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&kt(n),1===t)0===e.tag?function(e){Xt=!0,Qt(e)}(Oa.bind(null,e)):Qt(Oa.bind(null,e)),te?ne((function(){0===Yo&&Zt()})):It(zt,Zt),n=null;else{switch(Ft(r)){case 1:n=zt;break;case 4:n=Ht;break;case 16:default:n=Nt;break;case 536870912:n=jt}n=Za(n,Sa.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sa(e,t){if(ba=-1,_a=0,0!=(6&Yo))throw Error(a(327));var n=e.callbackNode;if(Ja()&&e.callbackNode!==n)return null;var r=Bt(e,e===Qo?qo:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=La(e,r);else{t=r;var i=Yo;Yo|=2;var o=ka();for(Qo===e&&qo===t||(ua(),Ua(e,t));;)try{za();break}catch(l){Ia(e,l)}sn(),Wo.current=o,Yo=i,null!==Zo?t=0:(Qo=null,qo=0,t=ta)}if(0!==t){if(2===t&&0!==(i=Tt(e))&&(r=i,t=Ta(e,i)),1===t)throw n=na,Ua(e,0),Ra(e,r),Ba(e,Gt()),n;if(6===t)Ra(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wt(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=La(e,r))&&0!==(o=Tt(e))&&(r=o,t=Ta(e,o)),1===t))throw n=na,Ua(e,0),Ra(e,r),Ba(e,Gt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:ja(e,sa);break;case 3:if(Ra(e,r),(130023424&r)===r&&10<(t=la+500-Gt())){if(0!==Bt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){wa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=J(ja.bind(null,e,sa),t);break}ja(e,sa);break;case 4:if(Ra(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-bt(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Gt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ko(r/1960))-r)){e.timeoutHandle=J(ja.bind(null,e,sa),r);break}ja(e,sa);break;default:throw Error(a(329))}}}return Ba(e,Gt()),e.callbackNode===n?Sa.bind(null,e):null}function Ta(e,t){var n=aa;return e.current.memoizedState.isDehydrated&&(Ua(e,t).flags|=256),2!==(e=La(e,t))&&(t=sa,sa=n,null!==t&&Ma(t)),e}function Ma(e){null===sa?sa=e:sa.push.apply(sa,e)}function Ra(e,t){for(t&=~oa,t&=~ia,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Oa(e){if(0!=(6&Yo))throw Error(a(327));Ja();var t=Bt(e,0);if(0==(1&t))return Ba(e,Gt()),null;var n=La(e,t);if(0!==e.tag&&2===n){var r=Tt(e);0!==r&&(t=r,n=Ta(e,r))}if(1===n)throw n=na,Ua(e,0),Ra(e,t),Ba(e,Gt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ja(e,sa),Ba(e,Gt()),null}function Da(e){null!==va&&0===va.tag&&0==(6&Yo)&&Ja();var t=Yo;Yo|=1;var n=Xo.transition,r=Dt;try{if(Xo.transition=null,Dt=1,e)return e()}finally{Dt=r,Xo.transition=n,0==(6&(Yo=t))&&Zt()}}function Fa(){$o=ea.current,st(ea)}function Ua(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==W&&(e.timeoutHandle=W,K(n)),null!==Zo)for(n=Zo.return;null!==n;){var r=n;switch(Nn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&mt();break;case 3:pr(),st(ht),st(ut),br();break;case 5:vr(r);break;case 4:pr();break;case 13:case 19:st(gr);break;case 10:cn(r.type._context);break;case 22:case 23:Fa()}n=n.return}if(Qo=e,Zo=e=ts(e.current,null),qo=$o=t,ta=0,na=null,oa=ia=ra=0,sa=aa=null,null!==fn){for(t=0;t<fn.length;t++)if(null!==(r=(n=fn[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}fn=null}return e}function Ia(e,t){for(;;){var n=Zo;try{if(sn(),_r.current=pi,Sr){for(var r=Er.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Sr=!1}if(Cr=0,Br=xr=Er=null,Tr=!1,Mr=0,Vo.current=null,null===n||null===n.return){ta=1,na=t,Zo=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=qo,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,h=l,d=h.tag;if(0==(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ti(s);if(null!==p){p.flags&=-257,Mi(p,s,l,0,t),1&p.mode&&Si(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0==(1&t)){Si(o,u,t),Pa();break e}c=Error(a(426))}else if(Kn&&1&l.mode){var g=Ti(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),Mi(g,s,l,0,t),tr(c);break e}}o=c,4!==ta&&(ta=2),null===aa?aa=[o]:aa.push(o),c=yi(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,bn(l,xi(0,c,t));break e;case 1:o=c;var y=l.type,A=l.stateNode;if(0==(128&l.flags)&&("function"==typeof y.getDerivedStateFromError||null!==A&&"function"==typeof A.componentDidCatch&&(null===pa||!pa.has(A)))){l.flags|=65536,t&=-t,l.lanes|=t,bn(l,Bi(l,o,t));break e}}l=l.return}while(null!==l)}Na(n)}catch(b){t=b,Zo===n&&null!==n&&(Zo=n=n.return);continue}break}}function ka(){var e=Wo.current;return Wo.current=pi,null===e?pi:e}function Pa(){0!==ta&&3!==ta&&2!==ta||(ta=4),null===Qo||0==(268435455&ra)&&0==(268435455&ia)||Ra(Qo,qo)}function La(e,t){var n=Yo;Yo|=2;var r=ka();for(Qo===e&&qo===t||Ua(e,t);;)try{Ga();break}catch(i){Ia(e,i)}if(sn(),Yo=n,Wo.current=r,null!==Zo)throw Error(a(261));return Qo=null,qo=0,ta}function Ga(){for(;null!==Zo;)Ha(Zo)}function za(){for(;null!==Zo&&!Pt();)Ha(Zo)}function Ha(e){var t=ha(e.alternate,e,$o);e.memoizedProps=e.pendingProps,null===t?Na(e):Zo=t,Vo.current=null}function Na(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ii(n,t,$o)))return void(Zo=n)}else{if(null!==(n=ao(n,t)))return n.flags&=32767,void(Zo=n);if(null===e)return ta=6,void(Zo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Zo=t);Zo=t=e}while(null!==t);0===ta&&(ta=5)}function ja(e,t){var n=Dt,r=Xo.transition;try{Xo.transition=null,Dt=1,function(e,t,n){do{Ja()}while(null!==va);if(0!=(6&Yo))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Qo&&(Zo=Qo=null,qo=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||ma||(ma=!0,Za(Nt,(function(){return Ja(),null}))),o=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||o){o=Xo.transition,Xo.transition=null;var s=Dt;Dt=1;var l=Yo;Yo|=4,Vo.current=null,function(e,t){for(k(e.containerInfo),uo=t;null!==uo;)if(t=(e=uo).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,uo=t;else for(;null!==uo;){e=uo;try{var n=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=e.stateNode,s=o.getSnapshotBeforeUpdate(e.elementType===e.type?r:tn(e.type,r),i);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:X&&xe(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,uo=t;break}uo=e.return}n=po,po=!1}(e,r),function(e,t){for(uo=t;null!==uo;){var n=(t=uo).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e;X?Bo(o,i,t):Ao(o,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(_){Wa(i,t,_)}}if(n=t.child,0!=(12854&t.subtreeFlags)&&null!==n)n.return=t,uo=n;else for(;null!==uo;){t=uo;try{var s=t.flags;if(32&s&&X&&be(t.stateNode),512&s){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(la=Gt())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,f=null!==d&&null!==d.memoizedState;if(n=t,X)e:if(r=n,i=h,o=null,X)for(var p=r;;){if(5===p.tag){if(null===o){o=p;var m=p.stateNode;i?_e(m):Ce(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===o){var v=p.stateNode;i?we(v):Ee(v,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;o===p&&(o=null),p=p.return}o===p&&(o=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!=(1&n.mode)){uo=n;for(var g=n.child;null!==g;){for(n=uo=g;null!==uo;){var y=(r=uo).child;switch(r.tag){case 0:case 11:case 14:case 15:mo(4,r,r.return);break;case 1:ho(r,r.return);var A=r.stateNode;if("function"==typeof A.componentWillUnmount){var b=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(_){Wa(r,b,_)}}break;case 5:ho(r,r.return);break;case 22:if(null!==r.memoizedState){Do(n);continue}}null!==y?(y.return=r,uo=y):Do(n)}g=g.sibling}}}switch(4102&s){case 2:Co(t),t.flags&=-3;break;case 6:Co(t),t.flags&=-3,So(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,So(t.alternate,t);break;case 4:So(t.alternate,t)}}catch(_){Wa(t,t.return,_)}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}}(e,r),P(e.containerInfo),e.current=r,Mo(r),Lt(),Yo=l,Dt=s,Xo.transition=o}else e.current=r;if(ma&&(ma=!1,va=e,ga=i),0===(o=e.pendingLanes)&&(pa=null),function(e){if(Kt&&"function"==typeof Kt.onCommitFiberRoot)try{Kt.onCommitFiberRoot(Jt,e,void 0,128==(128&e.current.flags))}catch(t){}}(r.stateNode),Ba(e,Gt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(da)throw da=!1,e=fa,fa=null,e;0!=(1&ga)&&0!==e.tag&&Ja(),0!=(1&(o=e.pendingLanes))?e===Aa?ya++:(ya=0,Aa=e):ya=0,Zt()}(e,t,n)}finally{Xo.transition=r,Dt=n}return null}function Ja(){if(null!==va){var e=Ft(ga),t=Xo.transition,n=Dt;try{if(Xo.transition=null,Dt=16>e?16:e,null===va)var r=!1;else{if(e=va,va=null,ga=0,0!=(6&Yo))throw Error(a(331));var i=Yo;for(Yo|=4,uo=e.current;null!==uo;){var o=uo,s=o.child;if(0!=(16&uo.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(uo=u;null!==uo;){var h=uo;switch(h.tag){case 0:case 11:case 15:mo(8,h,o)}var d=h.child;if(null!==d)d.return=h,uo=d;else for(;null!==uo;){var f=(h=uo).sibling,p=h.return;if(bo(h),h===u){uo=null;break}if(null!==f){f.return=p,uo=f;break}uo=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}uo=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,uo=s;else e:for(;null!==uo;){if(0!=(2048&(o=uo).flags))switch(o.tag){case 0:case 11:case 15:mo(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,uo=y;break e}uo=o.return}}var A=e.current;for(uo=A;null!==uo;){var b=(s=uo).child;if(0!=(2064&s.subtreeFlags)&&null!==b)b.return=s,uo=b;else e:for(s=A;null!==uo;){if(0!=(2048&(l=uo).flags))try{switch(l.tag){case 0:case 11:case 15:vo(9,l)}}catch(w){Wa(l,l.return,w)}if(l===s){uo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,uo=_;break e}uo=l.return}}if(Yo=i,Zt(),Kt&&"function"==typeof Kt.onPostCommitFiberRoot)try{Kt.onPostCommitFiberRoot(Jt,e)}catch(w){}r=!0}return r}finally{Dt=n,Xo.transition=t}}return!1}function Ka(e,t,n){yn(e,t=xi(0,t=yi(n,t),1)),t=wa(),null!==(e=xa(e,1))&&(Rt(e,1,t),Ba(e,t))}function Wa(e,t,n){if(3===e.tag)Ka(e,e,n);else for(;null!==t;){if(3===t.tag){Ka(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===pa||!pa.has(r))){yn(t,e=Bi(t,e=yi(n,e),1)),e=wa(),null!==(t=xa(t,1))&&(Rt(t,1,e),Ba(t,e));break}}t=t.return}}function Va(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=wa(),e.pingedLanes|=e.suspendedLanes&n,Qo===e&&(qo&n)===n&&(4===ta||3===ta&&(130023424&qo)===qo&&500>Gt()-la?Ua(e,0):oa|=n),Ba(e,t)}function Xa(e,t){0===t&&(0==(1&e.mode)?t=1:(t=Et,0==(130023424&(Et<<=1))&&(Et=4194304)));var n=wa();null!==(e=xa(e,t))&&(Rt(e,t,n),Ba(e,n))}function Ya(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xa(e,n)}function Qa(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Xa(e,n)}function Za(e,t){return It(e,t)}function qa(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $a(e,t,n,r){return new qa(e,t,n,r)}function es(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ts(e,t){var n=e.alternate;return null===n?((n=$a(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ns(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)es(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case u:return rs(n.children,i,o,t);case h:s=8,i|=8;break;case d:return(e=$a(12,n,t,2|i)).elementType=d,e.lanes=o,e;case v:return(e=$a(13,n,t,i)).elementType=v,e.lanes=o,e;case g:return(e=$a(19,n,t,i)).elementType=g,e.lanes=o,e;case b:return is(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case m:s=11;break e;case y:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=$a(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function rs(e,t,n,r){return(e=$a(7,e,r,t)).lanes=n,e}function is(e,t,n,r){return(e=$a(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function os(e,t,n){return(e=$a(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=$a(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ss(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mt(0),this.expirationTimes=Mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.identifierPrefix=r,this.onRecoverableError=i,Q&&(this.mutableSourceEagerHydrationData=null)}function ls(e,t,n,r,i,o,a,s,l){return e=new ss(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=$a(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},mn(o),e}function cs(e){if(!e)return ct;e:{if(x(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(pt(n))return gt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=T(t))?null:e.stateNode}function hs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ds(e,t){hs(e,t),(e=e.alternate)&&hs(e,t)}function fs(e){return null===(e=T(e))?null:e.stateNode}function ps(){return null}return ha=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Pi=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Pi=!1,function(e,t,n){switch(t.tag){case 3:Vi(t),er();break;case 5:mr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:fr(t,t.stateNode.containerInfo);break;case 10:ln(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Zi(e,t,n):(lt(gr,1&gr.current),null!==(e=oo(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return io(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Ni(e,t,n)}return oo(e,t,n)}(e,t,n);Pi=0!=(131072&e.flags)}else Pi=!1,Kn&&0!=(1048576&t.flags)&&zn(t,Fn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ut.current);hn(t,n),i=Fr(null,t,r,e,i,n);var o=Ur();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,yt(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,mn(t),i.updater=xn,t.stateNode=i,i._reactInternals=t,Mn(t,r,e,n),t=Wi(null,t,r,!0,o,n)):(t.tag=0,Kn&&o&&Hn(t),Li(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return es(e)?1:0;if(null!=e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=tn(r,e),i){case 0:t=Ji(null,t,r,e,n);break e;case 1:t=Ki(null,t,r,e,n);break e;case 11:t=Gi(null,t,r,e,n);break e;case 14:t=zi(null,t,r,tn(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ji(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ki(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 3:e:{if(Vi(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,vn(e,t),_n(t,r,null,n);var s=t.memoizedState;if(r=s.element,Q&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Xi(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Xi(e,t,r,n,i=Error(a(424)));break e}for(Q&&(Jn=He(t.stateNode.containerInfo),jn=t,Kn=!0,Vn=null,Wn=!1),n=sr(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(er(),r===i){t=oo(e,t,n);break e}Li(e,t,r,n)}t=t.child}return t;case 5:return mr(t),null===e&&Zn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,N(r,i)?s=null:null!==o&&N(r,o)&&(t.flags|=32),ji(e,t),Li(e,t,s,n),t.child;case 6:return null===e&&Zn(t),null;case 13:return Zi(e,t,n);case 4:return fr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Li(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Gi(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 7:return Li(e,t,t.pendingProps,n),t.child;case 8:case 12:return Li(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,ln(0,r,s=i.value),null!==o)if(Wt(o.value,s)){if(o.children===i.children&&!ht.current){t=oo(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=gn(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),un(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Li(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,hn(t,n),r=r(i=dn(i)),t.flags|=1,Li(e,t,r,n),t.child;case 14:return i=tn(r=t.type,t.pendingProps),zi(e,t,r,i=tn(r.type,i),n);case 15:return Hi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,hn(t,n),Sn(t,r,i),Mn(t,r,i,n),Wi(null,t,r,!0,e,n);case 19:return io(e,t,n);case 22:return Ni(e,t,n)}throw Error(a(156,t.tag))},n.attemptContinuousHydration=function(e){13===e.tag&&(Ea(e,134217728,wa()),ds(e,134217728))},n.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=wa(),n=Ca(e);Ea(e,n,t),ds(e,n)}},n.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xt(t.pendingLanes);0!==n&&(Ot(t,1|n),Ba(t,Gt()),0==(6&Yo)&&(ua(),Zt()))}break;case 13:var r=wa();Da((function(){return Ea(e,1,r)})),ds(e,1)}},n.batchedUpdates=function(e,t){var n=Yo;Yo|=1;try{return e(t)}finally{0===(Yo=n)&&(ua(),Xt&&Zt())}},n.createComponentSelector=function(e){return{$$typeof:Uo,value:e}},n.createContainer=function(e,t,n,r,i,o,a){return ls(e,t,!1,null,0,r,0,o,a)},n.createHasPseudoClassSelector=function(e){return{$$typeof:Io,value:e}},n.createHydrationContainer=function(e,t,n,r,i,o,a,s,l){return(e=ls(n,r,!0,e,0,o,0,s,l)).context=cs(null),n=e.current,(o=gn(r=wa(),i=Ca(n))).callback=null!=t?t:null,yn(n,o),e.current.lanes=i,Rt(e,i,r),Ba(e,r),e},n.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},n.createRoleSelector=function(e){return{$$typeof:ko,value:e}},n.createTestNameSelector=function(e){return{$$typeof:Po,value:e}},n.createTextSelector=function(e){return{$$typeof:Lo,value:e}},n.deferredUpdates=function(e){var t=Dt,n=Xo.transition;try{return Xo.transition=null,Dt=16,e()}finally{Dt=t,Xo.transition=n}},n.discreteUpdates=function(e,t,n,r,i){var o=Dt,a=Xo.transition;try{return Xo.transition=null,Dt=1,e(t,n,r,i)}finally{Dt=o,Xo.transition=a,0===Yo&&ua()}},n.findAllNodes=Jo,n.findBoundingRects=function(e,t){if(!re)throw Error(a(363));t=Jo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(r>=u&&o>=d&&i<=h&&s<=f){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||f<o||d>s)){d>o&&(c.height+=d-o,c.y=o),f<s&&(c.height=s-d),e.splice(t,1);break}if(!(o!==d||n.height!==c.height||h<r||u>i)){u>r&&(c.width+=u-r,c.x=r),h<i&&(c.width=i-u),e.splice(t,1);break}}return e},n.findHostInstance=us,n.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=S(e))?R(e):null)?null:e.stateNode},n.findHostInstanceWithWarning=function(e){return us(e)},n.flushControlled=function(e){var t=Yo;Yo|=1;var n=Xo.transition,r=Dt;try{Xo.transition=null,Dt=1,e()}finally{Dt=r,Xo.transition=n,0===(Yo=t)&&(ua(),Zt())}},n.flushPassiveEffects=Ja,n.flushSync=Da,n.focusWithin=function(e,t){if(!re)throw Error(a(363));for(t=jo(e=zo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Dt},n.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(a(363));var n=0,r=[];e=[zo(e),0];for(var i=0;i<e.length;){var o=e[i++],s=e[i++],l=t[s];if((5!==o.tag||!se(o))&&(Ho(o,l)&&(r.push(No(l)),++s>n&&(n=s)),s<t.length))for(o=o.child;null!==o;)e.push(o,s),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(No(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},n.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?F(e.child.stateNode):e.child.stateNode:null},n.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:fs,findFiberByHostInstance:e.findFiberByHostInstance||ps,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Jt=t.inject(e),Kt=t}catch(n){}e=!!t.checkDCE}}return e},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(a(363));e=Jo(e,t);var i=ue(e,n,r).disconnect;return{disconnect:function(){i()}}},n.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},n.runWithPriority=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(e,t,n,r){var i=t.current,o=wa(),a=Ca(i);return n=cs(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),yn(i,t),null!==(e=Ea(i,a,o))&&An(e,i,a),a},n};const It=n(Ot.exports),kt=[];function Pt(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function Lt(e,t=null,n=!1,r={}){null===t&&(t=[e]);for(const a of kt)if(Pt(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=kt.indexOf(i);-1!==e&&kt.splice(e,1)},promise:(o=e,"object"==typeof o&&"function"==typeof o.then?e:e(...t)).then((e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((e=>i.error=e))};var o;if(kt.push(i),!n)throw i.promise}const Gt=(e,t,n)=>Lt(e,t,!1,n),zt=(e,t,n)=>{Lt(e,t,!0,n)},Ht=e=>{if(void 0===e||0===e.length)kt.splice(0,kt.length);else{const t=kt.find((t=>Pt(e,t.keys,t.equal)));t&&t.remove()}},Nt={},jt=e=>{Object.assign(Nt,e)};var Jt,Kt;const Wt=e=>"colorSpace"in e||"outputColorSpace"in e,Vt=()=>{var e;return null!=(e=Nt.ColorManagement)?e:null},Xt=e=>e&&e.isOrthographicCamera,Yt="undefined"!=typeof window&&(null!=(Jt=window.document)&&Jt.createElement||"ReactNative"===(null==(Kt=window.navigator)?void 0:Kt.product))?t.useLayoutEffect:t.useEffect;function Qt(e){const n=t.useRef(e);return Yt((()=>{n.current=e}),[e]),n}function Zt({set:e}){return Yt((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class qt extends t.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}qt.getDerivedStateFromError=()=>({error:!0});const $t="__default",en=new Map,tn=e=>e&&!!e.memoized&&!!e.changes;function nn(e){var t;const n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const rn=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},on={obj:e=>e===Object(e)&&!on.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(on.str(e)||on.num(e))return e===t;const o=on.obj(e);if(o&&"reference"===r)return e===t;const a=on.arr(e);if(a&&"reference"===n)return e===t;if((a||o)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(s in i?t:e)if(!on.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(on.und(s)){if(a&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function an(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function sn(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function ln(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const cn=/-\d+$/;function un(e,t,n){if(on.str(n)){if(cn.test(n)){const t=n.replace(cn,""),{target:r,key:i}=ln(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=ln(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function hn(e,t,n){var r,i;if(on.str(n)){const{target:r,key:i}=ln(e,n),o=t.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function dn(e,{children:t,key:n,ref:r,...i},{children:o,key:a,ref:s,...l}={},c=!1){var u;const h=null!=(u=null==e?void 0:e.__r3f)?u:{},d=Object.entries(i),f=[];if(c){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||d.unshift([e[t],$t+"remove"])}d.forEach((([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(on.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return f.push([t,n,!0,[]]);let o=[];t.includes("-")&&(o=t.split("-")),f.push([t,n,!1,o]);for(const e in i){const n=i[e];e.startsWith(`${t}-`)&&f.push([e,n,!1,e.split("-")])}}));const p={...i};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}function fn(e,t){var n,r,i;const c=null!=(n=e.__r3f)?n:{},u=c.root,h=null!=(r=null==u||null==u.getState?void 0:u.getState())?r:{},{memoized:d,changes:f}=tn(t)?t:dn(e,t),m=c.eventCount;e.__r3f&&(e.__r3f.memoizedProps=d);for(let v=0;v<f.length;v++){let[t,n,r,i]=f[v];if(Wt(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let u=e,d=u[t];if(i.length&&(d=i.reduce(((e,t)=>e[t]),e),!d||!d.set)){const[n,...r]=i.reverse();u=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===$t+"remove")if(u.constructor){let e=en.get(u.constructor);e||(e=new u.constructor,en.set(u.constructor,e)),n=e[t]}else n=0;if(r)n?c.handlers[t]=n:delete c.handlers[t],c.eventCount=Object.keys(c.handlers).length;else if(d&&d.set&&(d.copy||d instanceof o)){if(Array.isArray(n))d.fromArray?d.fromArray(n):d.set(...n);else if(d.copy&&n&&n.constructor&&d.constructor===n.constructor)d.copy(n);else if(void 0!==n){const e=d instanceof p;!e&&d.setScalar?d.setScalar(n):d instanceof o&&n instanceof o?d.mask=n.mask:d.set(n),Vt()||h.linear||!e||d.convertSRGBToLinear()}}else if(u[t]=n,u[t]instanceof a&&u[t].format===s&&u[t].type===l){const e=u[t];Wt(e)&&Wt(h.gl)?e.colorSpace=h.gl.outputColorSpace:e.encoding=h.gl.outputEncoding}pn(e)}if(c.parent&&h.internal&&e.raycast&&m!==c.eventCount){const t=h.internal.interaction.indexOf(e);t>-1&&h.internal.interaction.splice(t,1),c.eventCount&&h.internal.interaction.push(e)}return!(1===f.length&&"onUpdate"===f[0][0])&&f.length&&null!=(i=e.__r3f)&&i.parent&&mn(e),e}function pn(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function mn(e){null==e.onUpdate||e.onUpdate(e)}function vn(e,t){e.manual||(Xt(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function gn(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function yn(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function An(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(gn(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(o){const{onPointerMissed:a,internal:s}=e.getState();s.lastEvent.current=o;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(t,n){const r=e.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){const t=rn(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=a.flatMap((function(e){const n=rn(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=rn(e.object),r=rn(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=gn(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(gn(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=u.map((e=>e.eventObject))),c&&!u.length&&d<=2&&(r(o,s.interaction),a&&a(o)),l&&n(u),function(t,r,i,o){const a=e.getState();if(t.length){const e={stopped:!1};for(const s of t){const l=rn(s.object)||a,{raycaster:c,pointer:u,camera:d,internal:f}=l,p=new h(u.x,u.y,0).unproject(d),m=e=>{var t,n;return null!=(t=null==(n=f.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},v=e=>{const t={intersection:s,target:r.target};f.capturedMap.has(e)?f.capturedMap.get(e).set(s.eventObject,t):f.capturedMap.set(e,new Map([[s.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=f.capturedMap.get(e);t&&yn(f.capturedMap,s.eventObject,t,e)};let y={};for(let e in r){let t=r[e];"function"!=typeof t&&(y[e]=t)}let A={...s,...y,pointer:u,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:d,stopPropagation(){const i="pointerId"in r&&f.capturedMap.get(r.pointerId);(!i||i.has(s.eventObject))&&(A.stopped=e.stopped=!0,f.hovered.size&&Array.from(f.hovered.values()).find((e=>e.eventObject===s.eventObject)))&&n([...t.slice(0,t.indexOf(s)),s])},target:{hasPointerCapture:m,setPointerCapture:v,releasePointerCapture:g},currentTarget:{hasPointerCapture:m,setPointerCapture:v,releasePointerCapture:g},nativeEvent:r};if(o(A),!0===e.stopped)break}}}(u,o,d,(function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=gn(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[i];n?c&&!s.initialHits.includes(t)||(r(o,s.interaction.filter((e=>!s.initialHits.includes(e)))),n(e)):c&&s.initialHits.includes(t)&&r(o,s.interaction.filter((e=>!s.initialHits.includes(e))))}}))}}}}const bn=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],_n=e=>!(null==e||!e.render),wn=t.createContext(null);function Cn(e,t){const n={callback:e};return t.add(n),()=>{t.delete(n)}}let En,xn=new Set,Bn=new Set,Sn=new Set;const Tn=e=>Cn(e,xn),Mn=e=>Cn(e,Bn),Rn=e=>Cn(e,Sn);function On(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Dn(e,t){switch(e){case"before":return On(xn,t);case"after":return On(Bn,t);case"tail":return On(Sn,t)}}let Fn,Un;function In(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Fn=t.internal.subscribers,En=0;En<Fn.length;En++)Un=Fn[En],Un.ref.current(Un.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function kn(){const e=t.useContext(wn);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Pn(e=(e=>e),t){return kn()(e,t)}function Ln(e,t=0){const n=kn(),r=n.getState().internal.subscribe,i=Qt(e);return Yt((()=>r(i,t,n)),[t,r,n]),null}function Gn(e){return t.useMemo((()=>an(e)),[e])}function zn(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,an(e.scene)),n(e)}),t,(t=>r(new Error(`Could not load ${e}: ${t.message})`)))))))))}}function Hn(e,t,n,r){const i=Array.isArray(t)?t:[t],o=Gt(zn(n,r),[e,...i],{equal:on.equ});return Array.isArray(t)?o:o[0]}Hn.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return zt(zn(n),[e,...r])},Hn.clear=function(e,t){const n=Array.isArray(t)?t:[t];return Ht([e,...n])};const Nn=new Map,{invalidate:jn,advance:Jn}=function(e){let t,n,r,i=!1;function o(a){n=requestAnimationFrame(o),i=!0,t=0,Dn("before",a);for(const n of e.values()){var s;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(s=r.gl.xr)&&s.isPresenting||(t+=In(a,r))}if(Dn("after",a),0===t)return Dn("tail",a),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n,r=1){var a;if(!n)return e.forEach((e=>t(e.store.getState())),r);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),i||(i=!0,requestAnimationFrame(o)))},advance:function(t,n=!0,r,i){if(n&&Dn("before",t),r)In(t,r,i);else for(const o of e.values())In(t,o.store.getState());n&&Dn("after",t)}}}(Nn),{reconciler:Kn,applyProps:Wn}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let o,a=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");o=sn(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=Nt[a];if(!r)throw new Error(`R3F: ${a} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");o=sn(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===o.__r3f.attach&&(o instanceof d?o.__r3f.attach="geometry":o instanceof f&&(o.__r3f.attach="material")),"inject"!==a&&fn(o,r),o}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?un(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||sn(t,{}),t.__r3f.parent=e,mn(t),pn(t))}function i(e,t,n){let r=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)un(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const i=e.children.filter((e=>e!==t)),o=i.indexOf(n);e.children=[...i.slice(0,o),t,...i.slice(o)],r=!0}r||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||sn(t,{}),t.__r3f.parent=e,mn(t),pn(t)}}function o(e,t,n=!1){e&&[...e].forEach((e=>a(t,e,n)))}function a(e,t,n){if(t){var r,i,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)hn(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{yn(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=void 0===n?null!==t.dispose&&!c:n;var l;if(!c)o(null==(l=t.__r3f)?void 0:l.objects,t,u),o(t.children,t,u);delete t.__r3f,u&&t.dispose&&"Scene"!==t.type&&Ut.unstable_scheduleCallback(Ut.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e){}})),pn(e)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:It({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){if(e.__r3f.primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...o}=r,{args:a=[],children:s,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==a[t])))return[!0];const c=dn(e,o,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,i],o,s,l,c){t?function(e,t,i,o){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const c=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,o,l,c):fn(e,i)},commitMount(e,t,n,r){var i;const o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>sn(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&hn(r,e,n),e.isObject3D&&(e.visible=!1),pn(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&un(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),pn(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():St.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&on.fun(performance.now)?performance.now:on.fun(Date.now)?Date.now:()=>0,scheduleTimeout:on.fun(setTimeout)?setTimeout:void 0,cancelTimeout:on.fun(clearTimeout)?clearTimeout:void 0}),applyProps:fn}}(0,(function(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return St.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return St.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return St.ContinuousEventPriority;default:return St.DefaultEventPriority}})),Vn={objects:"shallow",strict:!1},Xn=(e,t)=>{const n="function"==typeof e?e(t):e;return _n(n)?n:new _({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function Yn(e){const n=Nn.get(e),r=null==n?void 0:n.fiber,i=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const o="function"==typeof reportError?reportError:console.error,a=i||((e,n)=>{const r=Rt(((r,i)=>{const o=new h,a=new h,s=new h;function l(e=i().camera,t=a,n=i().size){const{width:r,height:l,top:c,left:u}=n,d=r/l;t instanceof h?s.copy(t):s.set(...t);const f=e.getWorldPosition(o).distanceTo(s);if(Xt(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:f,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*f,i=n*(r/l);return{width:i,height:n,top:c,left:u,factor:r/i,distance:f,aspect:d}}}let c;const d=e=>r((t=>({performance:{...t.performance,current:e}}))),f=new u;return{set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(i(),t),advance:(e,t)=>n(e,t,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new B,pointer:f,mouse:f,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();c&&clearTimeout(c),e.performance.current!==e.performance.min&&d(e.performance.min),c=setTimeout((()=>d(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>r((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,n,o,s)=>{const c=i().camera,u={width:e,height:t,top:o||0,left:s||0,updateStyle:n};r((e=>({size:u,viewport:{...e.viewport,...l(c,a,u)}})))},setDpr:e=>r((t=>{const n=nn(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:(e="always")=>{const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}}})),i=r.getState();let o=i.size,a=i.viewport.dpr,s=i.camera;return r.subscribe((()=>{const{camera:e,size:t,viewport:n,gl:i,set:l}=r.getState();if(t!==o||n.dpr!==a){var c;o=t,a=n.dpr,vn(e,t),i.setPixelRatio(n.dpr);const r=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,r)}e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),r.subscribe((t=>e(t))),r})(jn,Jn),s=r||Kn.createContainer(a,St.ConcurrentRoot,null,!1,null,"",o,null);let l;n||Nn.set(e,{fiber:s,store:a});let d,f=!1;return{configure(t={}){let{gl:n,size:r,scene:i,events:o,onCreated:s,shadows:u=!1,linear:h=!1,flat:p=!1,legacy:_=!1,orthographic:B=!1,frameloop:S="always",dpr:T=[1,2],performance:M,raycaster:R,camera:O,onPointerMissed:D}=t,F=a.getState(),U=F.gl;F.gl||F.set({gl:U=Xn(n,e)});let I=F.raycaster;I||F.set({raycaster:I=new c});const{params:k,...P}=R||{};if(on.equ(P,I,Vn)||Wn(I,{...P}),on.equ(k,I.params,Vn)||Wn(I,{params:{...I.params,...k}}),!F.camera||F.camera===d&&!on.equ(d,O,Vn)){d=O;const e=O instanceof w,t=e?O:B?new m(0,0,0,0,.1,1e3):new v(75,0,.1,1e3);e||(t.position.z=5,O&&Wn(t,O),F.camera||null!=O&&O.rotation||t.lookAt(0,0,0)),F.set({camera:t})}if(!F.scene){let e;i instanceof g?e=i:(e=new g,i&&Wn(e,i)),F.set({scene:sn(e)})}if(!F.xr){const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&Jn(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||jn(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};U.xr&&n.connect(),F.set({xr:n})}if(U.shadowMap){const e=U.shadowMap.enabled,t=U.shadowMap.type;if(U.shadowMap.enabled=!!u,on.boo(u))U.shadowMap.type=y;else if(on.str(u)){var L;const e={basic:C,percentage:E,soft:y,variance:x};U.shadowMap.type=null!=(L=e[u])?L:y}else on.obj(u)&&Object.assign(U.shadowMap,u);e===U.shadowMap.enabled&&t===U.shadowMap.type||(U.shadowMap.needsUpdate=!0)}const G=Vt();G&&("enabled"in G?G.enabled=!_:"legacyMode"in G&&(G.legacyMode=_));Wn(U,{outputEncoding:h?3e3:3001,toneMapping:p?A:b}),F.legacy!==_&&F.set((()=>({legacy:_}))),F.linear!==h&&F.set((()=>({linear:h}))),F.flat!==p&&F.set((()=>({flat:p}))),!n||on.fun(n)||_n(n)||on.equ(n,U,Vn)||Wn(U,n),o&&!F.events.handlers&&F.set({events:o(a)});const z=function(e,t){if(t)return t;if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,r);return on.equ(z,F.size,Vn)||F.setSize(z.width,z.height,z.updateStyle,z.top,z.left),T&&F.viewport.dpr!==nn(T)&&F.setDpr(T),F.frameloop!==S&&F.setFrameloop(S),F.onPointerMissed||F.set({onPointerMissed:D}),M&&!on.equ(M,F.performance,Vn)&&F.set((e=>({performance:{...e.performance,...M}}))),l=s,f=!0,this},render(n){return f||this.configure(),Kn.updateContainer(t.createElement(Qn,{store:a,children:n,onCreated:l,rootElement:e}),s,null,(()=>{})),a},unmount(){Zn(e)}}}function Qn({store:e,children:n,onCreated:r,rootElement:i}){return Yt((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(i)}),[]),t.createElement(wn.Provider,{value:e},n)}function Zn(e,t){const n=Nn.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),Kn.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,a;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),Nn.delete(e),t&&t(e)}catch(s){}}),500)}))}}function qn(e,n,r){return t.createElement($n,{key:n.uuid,children:e,container:n,state:r})}function $n({state:e={},children:n,container:r}){const{events:i,size:o,...a}=e,s=kn(),[l]=t.useState((()=>new c)),[d]=t.useState((()=>new u)),f=t.useCallback(((e,t)=>{const n={...e};let c;if(Object.keys(e).forEach((r=>{(bn.includes(r)||e[r]!==t[r]&&t[r])&&delete n[r]})),t&&o){const n=t.camera;c=e.viewport.getCurrentViewport(n,new h,o),n!==e.camera&&vn(n,o)}return{...n,scene:r,raycaster:l,pointer:d,mouse:d,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...i},size:{...e.size,...o},viewport:{...e.viewport,...c},...a}}),[e]),[p]=t.useState((()=>{const e=s.getState();return Rt(((t,n)=>({...e,scene:r,raycaster:l,pointer:d,mouse:d,previousRoot:s,events:{...e.events,...i},size:{...e.size,...o},...a,set:t,get:n,setEvents:e=>t((t=>({...t,events:{...t.events,...e}})))})))}));return t.useEffect((()=>{const e=s.subscribe((e=>p.setState((t=>f(e,t)))));return()=>{e(),p.destroy()}}),[]),t.useEffect((()=>{p.setState((e=>f(s.getState(),e)))}),[f]),t.createElement(t.Fragment,null,Kn.createPortal(t.createElement(wn.Provider,{value:p},n),p,null))}function er(e,t,n){var r,i,o,a,s;function l(){var c=Date.now()-a;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}Kn.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version}),er.debounce=er;const tr=n(er);function nr(e){let{debounce:n,scroll:r,polyfill:i,offsetSize:o}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const a=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=t.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=t.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=n?"number"==typeof n?n:n.scroll:null,h=n?"number"==typeof n?n:n.resize:null,d=t.useRef(!1);t.useEffect((()=>(d.current=!0,()=>{d.current=!1})));const[f,p,m]=t.useMemo((()=>{const e=()=>{if(!c.current.element)return;const{left:e,top:t,width:n,height:r,bottom:i,right:a,x:s,y:u}=c.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:i,right:a,x:s,y:u};c.current.element instanceof HTMLElement&&o&&(h.height=c.current.element.offsetHeight,h.width=c.current.element.offsetWidth),Object.freeze(h),d.current&&!or(c.current.lastBounds,h)&&l(c.current.lastBounds=h)};return[e,h?tr(e,h):e,u?tr(e,u):e]}),[l,o,u,h]);function v(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",m,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function g(){c.current.element&&(c.current.resizeObserver=new a(m),c.current.resizeObserver.observe(c.current.element),r&&c.current.scrollContainers&&c.current.scrollContainers.forEach((e=>e.addEventListener("scroll",m,{capture:!0,passive:!0}))))}var y,A,b;return y=m,A=Boolean(r),t.useEffect((()=>{if(A){const e=y;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[y,A]),b=p,t.useEffect((()=>{const e=b;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[b]),t.useEffect((()=>{v(),g()}),[r,m,p]),t.useEffect((()=>v),[]),[e=>{e&&e!==c.current.element&&(v(),c.current.element=e,c.current.scrollContainers=rr(e),g())},s,f]}function rr(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...rr(e.parentElement)]}const ir=["x","y","top","bottom","left","right","width","height"],or=(e,t)=>ir.every((n=>e[n]===t[n]));var ar=Object.defineProperty,sr=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,dr=(e,t,n)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fr=(e,t)=>{for(var n in t||(t={}))ur.call(t,n)&&dr(e,n,t[n]);if(cr)for(var n of cr(t))hr.call(t,n)&&dr(e,n,t[n]);return e};function pr(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=pr(r,t,n);if(e)return e;r=t?null:r.sibling}}function mr(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const vr=mr(t.createContext(null));class gr extends t.Component{render(){return t.createElement(vr.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:yr,ReactCurrentDispatcher:Ar}=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function br(){var e,n;const r=function(){const e=t.useContext(vr);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo((()=>{for(const t of[null==yr?void 0:yr.current,e,null==e?void 0:e.alternate]){if(!t)continue;const e=pr(t,!1,(e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(e)return e}}),[e,n])}(),[i]=t.useState((()=>new Map));i.clear();let o=r;for(;o;){const t=null==(e=o.type)?void 0:e._context;t&&t!==vr&&!i.has(t)&&i.set(t,null==(n=null==Ar?void 0:Ar.current)?void 0:n.readContext(mr(t))),o=o.return}return i}function _r(){const e=br();return t.useMemo((()=>Array.from(e.keys()).reduce(((n,r)=>i=>{return t.createElement(n,null,t.createElement(r.Provider,(o=fr({},i),a={value:e.get(r)},sr(o,lr(a)))));var o,a}),(e=>t.createElement(gr,fr({},e))))),[e])}const wr={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Cr(e){const{handlePointer:t}=An(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(wr).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((([e,n])=>{const[r,i]=wr[e];t.addEventListener(r,n,{passive:i})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=wr[e];n.connected.removeEventListener(r,t)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const Er=t.forwardRef((function({children:e,fallback:n,resize:i,style:o,gl:a,events:s=Cr,eventSource:l,eventPrefix:c,shadows:u,linear:h,flat:d,legacy:f,orthographic:p,frameloop:m,dpr:v,performance:g,raycaster:y,camera:A,onPointerMissed:b,onCreated:_,...w},C){t.useMemo((()=>jt(S)),[]);const E=_r(),[x,B]=nr({scroll:!0,debounce:{scroll:50,resize:0},...i}),T=t.useRef(null),M=t.useRef(null);t.useImperativeHandle(C,(()=>T.current));const R=Qt(b),[O,D]=t.useState(!1),[F,U]=t.useState(!1);if(O)throw O;if(F)throw F;const I=t.useRef(null);Yt((()=>{const n=T.current;B.width>0&&B.height>0&&n&&(I.current||(I.current=Yn(n)),I.current.configure({gl:a,events:s,shadows:u,linear:h,flat:d,legacy:f,orthographic:p,frameloop:m,dpr:v,performance:g,raycaster:y,camera:A,size:B,onPointerMissed:(...e)=>null==R.current?void 0:R.current(...e),onCreated:e=>{var t;null==e.events.connect||e.events.connect(l?(t=l)&&t.hasOwnProperty("current")?l.current:l:M.current),c&&e.setEvents({compute:(e,t)=>{const n=e[c+"X"],r=e[c+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==_||_(e)}}),I.current.render(t.createElement(E,null,t.createElement(qt,{set:U},t.createElement(t.Suspense,{fallback:t.createElement(Zt,{set:D})},e)))))})),t.useEffect((()=>{const e=T.current;if(e)return()=>Zn(e)}),[]);const k=l?"none":"auto";return t.createElement("div",r({ref:M,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:k,...o}},w),t.createElement("div",{ref:x,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:T,style:{display:"block"}},n)))})),xr=t.forwardRef((function(e,n){return t.createElement(gr,null,t.createElement(Er,r({},e,{ref:n})))})),Br=new h,Sr=new h,Tr=new h;function Mr(e,t,n){const r=Br.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,o=n.height/2;return[r.x*i+i,-r.y*o+o]}const Rr=e=>Math.abs(e)<1e-10?0:e;function Or(e,t,n=""){let r="matrix3d(";for(let i=0;16!==i;i++)r+=Rr(t[i]*e.elements[i])+(15!==i?",":")");return n+r}const Dr=(Fr=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>Or(e,Fr));var Fr;const Ur=(e,t)=>{return Or(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const Ir=t.forwardRef((({children:e,eps:n=.001,style:i,className:o,prepend:a,center:s,fullscreen:l,portal:c,distanceFactor:u,sprite:d=!1,transform:f=!1,occlude:p,onOcclude:g,castShadow:y,receiveShadow:A,material:b,geometry:_,zIndexRange:w=[16777271,0],calculatePosition:C=Mr,as:E="div",wrapperClass:x,pointerEvents:B="auto",...S},M)=>{const{gl:R,camera:O,scene:D,size:F,raycaster:U,events:I,viewport:k}=Pn(),[P]=t.useState((()=>document.createElement(E))),L=t.useRef(),G=t.useRef(null),z=t.useRef(0),H=t.useRef([0,0]),N=t.useRef(null),j=t.useRef(null),J=(null==c?void 0:c.current)||I.connected||R.domElement.parentNode,K=t.useRef(null),W=t.useRef(!1),V=t.useMemo((()=>p&&"blending"!==p||Array.isArray(p)&&p.length&&function(e){return e&&"object"==typeof e&&"current"in e}(p[0])),[p]);t.useLayoutEffect((()=>{const e=R.domElement;p&&"blending"===p?(e.style.zIndex=`${Math.floor(w[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[p]),t.useLayoutEffect((()=>{if(G.current){const e=L.current=wt(P);if(D.updateMatrixWorld(),f)P.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=C(G.current,O,F);P.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return J&&(a?J.prepend(P):J.appendChild(P)),()=>{J&&J.removeChild(P),e.unmount()}}}),[J,f]),t.useLayoutEffect((()=>{x&&(P.className=x)}),[x]);const X=t.useMemo((()=>f?{position:"absolute",top:0,left:0,width:F.width,height:F.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...l&&{top:-F.height/2,left:-F.width/2,width:F.width,height:F.height},...i}),[i,s,l,F,f]),Y=t.useMemo((()=>({position:"absolute",pointerEvents:B})),[B]);t.useLayoutEffect((()=>{var n,r;(W.current=!1,f)?null==(n=L.current)||n.render(t.createElement("div",{ref:N,style:X},t.createElement("div",{ref:j,style:Y},t.createElement("div",{ref:M,className:o,style:i,children:e})))):null==(r=L.current)||r.render(t.createElement("div",{ref:M,style:X,className:o,children:e}))}));const Q=t.useRef(!0);Ln((e=>{if(G.current){O.updateMatrixWorld(),G.current.updateWorldMatrix(!0,!1);const e=f?H.current:C(G.current,O,F);if(f||Math.abs(z.current-O.zoom)>n||Math.abs(H.current[0]-e[0])>n||Math.abs(H.current[1]-e[1])>n){const t=function(e,t){const n=Br.setFromMatrixPosition(e.matrixWorld),r=Sr.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),o=t.getWorldDirection(Tr);return i.angleTo(o)>Math.PI/2}(G.current,O);let n=!1;V&&(Array.isArray(p)?n=p.map((e=>e.current)):"blending"!==p&&(n=[D]));const r=Q.current;if(n){const e=function(e,t,n,r){const i=Br.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),n.setFromCamera(o,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(G.current,O,U,n);Q.current=e&&!t}else Q.current=!t;r!==Q.current&&(g?g(!Q.current):P.style.display=Q.current?"block":"none");const i=Math.floor(w[0]/2),o=p?V?[w[0],i]:[i-1,0]:w;if(P.style.zIndex=`${function(e,t,n){if(t instanceof v||t instanceof m){const r=Br.setFromMatrixPosition(e.matrixWorld),i=Sr.setFromMatrixPosition(t.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(t.far-t.near),s=n[1]-a*t.far;return Math.round(a*o+s)}}(G.current,O,o)}`,f){const[e,t]=[F.width/2,F.height/2],n=O.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:o,bottom:a,right:s}=O,l=Dr(O.matrixWorldInverse),c=r?`scale(${n})translate(${Rr(-(s+o)/2)}px,${Rr((i+a)/2)}px)`:`translateZ(${n}px)`;let h=G.current.matrixWorld;d&&(h=O.matrixWorldInverse.clone().transpose().copyPosition(h).scale(G.current.scale),h.elements[3]=h.elements[7]=h.elements[11]=0,h.elements[15]=1),P.style.width=F.width+"px",P.style.height=F.height+"px",P.style.perspective=r?"":`${n}px`,N.current&&j.current&&(N.current.style.transform=`${c}${l}translate(${e}px,${t}px)`,j.current.style.transform=Ur(h,1/((u||10)/400)))}else{const t=void 0===u?1:function(e,t){if(t instanceof m)return t.zoom;if(t instanceof v){const n=Br.setFromMatrixPosition(e.matrixWorld),r=Sr.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}return 1}(G.current,O)*u;P.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}H.current=e,z.current=O.zoom}}if(!V&&K.current&&!W.current)if(f){if(N.current){const e=N.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=O;if(t||_)S.scale&&(Array.isArray(S.scale)?S.scale instanceof h?K.current.scale.copy(S.scale.clone().divideScalar(1)):K.current.scale.set(1/S.scale[0],1/S.scale[1],1/S.scale[2]):K.current.scale.setScalar(1/S.scale));else{const t=(u||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;K.current.scale.set(n,r,1)}W.current=!0}}}else{const t=P.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/k.factor,n=t.clientWidth*e,r=t.clientHeight*e;K.current.scale.set(n,r,1),W.current=!0}K.current.lookAt(e.camera.position)}}));const Z=t.useMemo((()=>({vertexShader:f?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[f]);return t.createElement("group",r({},S,{ref:G}),p&&!V&&t.createElement("mesh",{castShadow:y,receiveShadow:A,ref:K},_||t.createElement("planeGeometry",null),b||t.createElement("shaderMaterial",{side:T,vertexShader:Z.vertexShader,fragmentShader:Z.fragmentShader})))}));function kr(e,n="pointer",r="auto",i=document.body){t.useEffect((()=>{if(e)return i.style.cursor=n,()=>{i.style.cursor=r}}),[e])}function Pr(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e){return function(e){if(Array.isArray(e))return Gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){return n=e-Math.floor(e/t)*t,r=0,i=t,Math.max(r,Math.min(i,n));var n,r,i}function Nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}new u,new u;var jr=function e(t,n,r){var i=this;Nr(this,e),Lr(this,"dot2",(function(e,t){return i.x*e+i.y*t})),Lr(this,"dot3",(function(e,t,n){return i.x*e+i.y*t+i.z*n})),this.x=t,this.y=n,this.z=r},Jr=[new jr(1,1,0),new jr(-1,1,0),new jr(1,-1,0),new jr(-1,-1,0),new jr(1,0,1),new jr(-1,0,1),new jr(1,0,-1),new jr(-1,0,-1),new jr(0,1,1),new jr(0,-1,1),new jr(0,1,-1),new jr(0,-1,-1)],Kr=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Wr=new Array(512),Vr=new Array(512);function Xr(e){var t=function(e){if("number"==typeof e)e=Math.abs(e);else if("string"==typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?Kr[t]^255&e:Kr[t]^e>>8&255,Wr[t]=Wr[t+256]=n,Vr[t]=Vr[t+256]=Jr[n%12]}}(0);new function e(t){var n=this;Nr(this,e),Lr(this,"seed",0),Lr(this,"init",(function(e){n.seed=e,n.value=Xr(e)})),Lr(this,"value",Xr(this.seed)),this.init(t)}(Math.random());var Yr=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},Qr={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},Zr={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},qr={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},$r={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},ei={in:function(e){return 0===e?0:Math.pow(2,10*e-10)},out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function ti(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yr,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,l="velocity_"+t;if(void 0===e.__damp&&(e.__damp={}),void 0===e.__damp[l]&&(e.__damp[l]=0),Math.abs(e[t]-n)<=s)return e[t]=n,!1;var c=2/(r=Math.max(1e-4,r)),u=a(c*i),h=e[t]-n,d=n,f=o*r;h=Math.min(Math.max(h,-f),f),n=e[t]-h;var p=(e.__damp[l]+c*h)*i;e.__damp[l]=(e.__damp[l]-c*p)*u;var m=n+(h+p)*u;return d-e[t]>0==m>d&&(m=d,e.__damp[l]=(m-d)/i),e[t]=m,!0}var ni=new h,ri=new M,ii=new M,oi=new R,ai=new h;function si(e,t,n,r,i,o,a,s){return ti(e,t,e[t]+function(e,t){var n=Hr(t-e,2*Math.PI);return n>Math.PI&&(n-=2*Math.PI),n}(e[t],n),r,i,o,a,s)}var li,ci,ui=new u;var hi,di,fi,pi=new h;function mi(e,t,n,r,i,o,a){return"number"==typeof t?pi.setScalar(t):Array.isArray(t)?pi.set(t[0],t[1],t[2]):pi.copy(t),hi=ti(e,"x",pi.x,n,r,i,o,a),di=ti(e,"y",pi.y,n,r,i,o,a),fi=ti(e,"z",pi.z,n,r,i,o,a),hi||di||fi}var vi,gi,yi,Ai,bi=new O;var _i,wi,Ci,Ei=new D;var xi,Bi,Si,Ti=new p;var Mi,Ri,Oi,Di,Fi=new M,Ui=new O,Ii=new O,ki=new O;function Pi(e,t,n,r,i,o,a){var s=e;Array.isArray(t)?Fi.set(t[0],t[1],t[2],t[3]):Fi.copy(t);var l=e.dot(Fi)>0?1:-1;return Fi.x*=l,Fi.y*=l,Fi.z*=l,Fi.w*=l,Mi=ti(e,"x",Fi.x,n,r,i,o,a),Ri=ti(e,"y",Fi.y,n,r,i,o,a),Oi=ti(e,"z",Fi.z,n,r,i,o,a),Di=ti(e,"w",Fi.w,n,r,i,o,a),Ui.set(e.x,e.y,e.z,e.w).normalize(),Ii.set(s.__damp.velocity_x,s.__damp.velocity_y,s.__damp.velocity_z,s.__damp.velocity_w),ki.copy(Ui).multiplyScalar(Ii.dot(Ui)/Ui.dot(Ui)),s.__damp.velocity_x-=ki.x,s.__damp.velocity_y-=ki.y,s.__damp.velocity_z-=ki.z,s.__damp.velocity_w-=ki.w,e.set(Ui.x,Ui.y,Ui.z,Ui.w),Mi||Ri||Oi||Di}var Li,Gi,zi,Hi=new F;var Ni,ji,Ji,Ki=new R,Wi=new h,Vi=new M,Xi=new h;var Yi=Object.freeze({__proto__:null,rsqw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},exp:Yr,linear:function(e){return e},sine:Qr,cubic:Zr,quint:qr,circ:$r,quart:{in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},expo:ei,damp:ti,dampLookAt:function(e,t,n,r,i,o,a){"number"==typeof t?ni.setScalar(t):Array.isArray(t)?ni.set(t[0],t[1],t[2]):ni.copy(t);var s,l=e.parent;e.updateWorldMatrix(!0,!1),ai.setFromMatrixPosition(e.matrixWorld),(s=e)&&s.isCamera||function(e){return e&&e.isLight}(e)?oi.lookAt(ai,ni,e.up):oi.lookAt(ni,ai,e.up),Pi(e.quaternion,ii.setFromRotationMatrix(oi),n,r,i,o,a),l&&(oi.extractRotation(l.matrixWorld),ri.setFromRotationMatrix(oi),Pi(e.quaternion,ii.copy(e.quaternion).premultiply(ri.invert()),n,r,i,o,a))},dampAngle:si,damp2:function(e,t,n,r,i,o,a){return"number"==typeof t?ui.setScalar(t):Array.isArray(t)?ui.set(t[0],t[1]):ui.copy(t),li=ti(e,"x",ui.x,n,r,i,o,a),ci=ti(e,"y",ui.y,n,r,i,o,a),li||ci},damp3:mi,damp4:function(e,t,n,r,i,o,a){return"number"==typeof t?bi.setScalar(t):Array.isArray(t)?bi.set(t[0],t[1],t[2],t[3]):bi.copy(t),vi=ti(e,"x",bi.x,n,r,i,o,a),gi=ti(e,"y",bi.y,n,r,i,o,a),yi=ti(e,"z",bi.z,n,r,i,o,a),Ai=ti(e,"w",bi.w,n,r,i,o,a),vi||gi||yi||Ai},dampE:function(e,t,n,r,i,o,a){return Array.isArray(t)?Ei.set(t[0],t[1],t[2],t[3]):Ei.copy(t),_i=si(e,"x",Ei.x,n,r,i,o,a),wi=si(e,"y",Ei.y,n,r,i,o,a),Ci=si(e,"z",Ei.z,n,r,i,o,a),_i||wi||Ci},dampC:function(e,t,n,r,i,o,a){return t instanceof p?Ti.copy(t):Array.isArray(t)?Ti.setRGB(t[0],t[1],t[2]):Ti.set(t),xi=ti(e,"r",Ti.r,n,r,i,o,a),Bi=ti(e,"g",Ti.g,n,r,i,o,a),Si=ti(e,"b",Ti.b,n,r,i,o,a),xi||Bi||Si},dampQ:Pi,dampS:function(e,t,n,r,i,o,a){return Array.isArray(t)?Hi.set(t[0],t[1],t[2]):Hi.copy(t),Li=ti(e,"radius",Hi.radius,n,r,i,o,a),Gi=si(e,"phi",Hi.phi,n,r,i,o,a),zi=si(e,"theta",Hi.theta,n,r,i,o,a),Li||Gi||zi},dampM:function(e,t,n,r,i,o,a){var s=e;return void 0===s.__damp&&(s.__damp={position:new h,rotation:new M,scale:new h},e.decompose(s.__damp.position,s.__damp.rotation,s.__damp.scale)),Array.isArray(t)?Ki.set.apply(Ki,zr(t)):Ki.copy(t),Ki.decompose(Wi,Vi,Xi),Ni=mi(s.__damp.position,Wi,n,r,i,o,a),ji=Pi(s.__damp.rotation,Vi,n,r,i,o,a),Ji=mi(s.__damp.scale,Xi,n,r,i,o,a),e.compose(s.__damp.position,s.__damp.rotation,s.__damp.scale),Ni||ji||Ji}});const Qi=t.createContext(null);function Zi(){return t.useContext(Qi)}function qi({eps:e=1e-5,enabled:n=!0,infinite:r,horizontal:i,pages:o=1,distance:a=1,damping:s=.25,maxSpeed:l=1/0,style:c={},children:u}){const{get:h,setEvents:d,gl:f,size:p,invalidate:m,events:v}=Pn(),[g]=t.useState((()=>document.createElement("div"))),[y]=t.useState((()=>document.createElement("div"))),[A]=t.useState((()=>document.createElement("div"))),b=f.domElement.parentNode,_=t.useRef(0),w=t.useMemo((()=>({el:g,eps:e,fill:y,fixed:A,horizontal:i,damping:s,offset:0,delta:0,scroll:_,pages:o,range(e,t,n=0){const r=e-n,i=r+t+2*n;return this.offset<r?0:this.offset>i?1:(this.offset-r)/(i-r)},curve(e,t,n=0){return Math.sin(this.range(e,t,n)*Math.PI)},visible(e,t,n=0){const r=e-n,i=r+t+2*n;return this.offset>=r&&this.offset<=i}})),[e,s,i,o]);t.useEffect((()=>{g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style[i?"overflowX":"overflowY"]="auto",g.style[i?"overflowY":"overflowX"]="hidden",g.style.top="0px",g.style.left="0px";for(const n in c)g.style[n]=c[n];A.style.position="sticky",A.style.top="0px",A.style.left="0px",A.style.width="100%",A.style.height="100%",A.style.overflow="hidden",g.appendChild(A),y.style.height=i?"100%":o*a*100+"%",y.style.width=i?o*a*100+"%":"100%",y.style.pointerEvents="none",g.appendChild(y),b.appendChild(g),g[i?"scrollLeft":"scrollTop"]=1;const e=v.connected||f.domElement;requestAnimationFrame((()=>null==v.connect?void 0:v.connect(g)));const t=h().events.compute;return d({compute(e,t){const{left:n,top:r}=b.getBoundingClientRect(),i=e.clientX-n,o=e.clientY-r;t.pointer.set(i/t.size.width*2-1,-o/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{b.removeChild(g),d({compute:t}),null==v.connect||v.connect(e)}}),[o,a,i,g,y,A,b]),t.useEffect((()=>{if(v.connected===g){const e=p[i?"width":"height"],t=g[i?"scrollWidth":"scrollHeight"],o=t-e;let a=0,s=!0,l=!0;const c=()=>{if(n&&!l&&(m(),a=g[i?"scrollLeft":"scrollTop"],_.current=a/o,r)){if(!s)if(a>=o){const e=1-w.offset;g[i?"scrollLeft":"scrollTop"]=1,_.current=w.offset=-e,s=!0}else if(a<=0){const e=1+w.offset;g[i?"scrollLeft":"scrollTop"]=t,_.current=w.offset=e,s=!0}s&&setTimeout((()=>s=!1),40)}};g.addEventListener("scroll",c,{passive:!0}),requestAnimationFrame((()=>l=!1));const u=e=>g.scrollLeft+=e.deltaY/2;return i&&g.addEventListener("wheel",u,{passive:!0}),()=>{g.removeEventListener("scroll",c),i&&g.removeEventListener("wheel",u)}}}),[g,v,p,r,w,m,i,n]);let C=0;return Ln(((t,n)=>{C=w.offset,Yi.damp(w,"offset",_.current,s,n,l,void 0,e),Yi.damp(w,"delta",Math.abs(C-w.offset),s,n,l,void 0,e),w.delta>e&&m()})),t.createElement(Qi.Provider,{value:w},u)}const $i=t.forwardRef((({children:e},n)=>{const r=t.useRef(null),i=Zi(),{width:o,height:a}=Pn((e=>e.viewport));return Ln((()=>{r.current.position.x=i.horizontal?-o*(i.pages-1)*i.offset:0,r.current.position.y=i.horizontal?0:a*(i.pages-1)*i.offset})),t.createElement("group",{ref:Pr([n,r])},e)})),eo=t.forwardRef((({children:e,style:n,...i},o)=>{const a=Zi(),s=t.useRef(null),{width:l,height:c}=Pn((e=>e.size)),u=t.useContext(wn),h=t.useMemo((()=>wt(a.fixed)),[a.fixed]);return Ln((()=>{a.delta>a.eps&&(s.current.style.transform=`translate3d(${a.horizontal?-l*(a.pages-1)*a.offset:0}px,${a.horizontal?0:c*(a.pages-1)*-a.offset}px,0)`)})),h.render(t.createElement("div",r({ref:Pr([o,s]),style:{...n,position:"absolute",top:0,left:0,willChange:"transform"}},i),t.createElement(Qi.Provider,{value:a},t.createElement(wn.Provider,{value:u},e)))),null})),to=t.forwardRef((({html:e,...n},i)=>{const o=e?eo:$i;return t.createElement(o,r({ref:i},n))}));const no={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function ro(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function io(e,t,n,r=.15){return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-ro(t-e,n-t,r)+t:e>n?+ro(e-n,n-t,r)+n:e}function oo(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ao(e,t,n){return(t=oo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const co={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uo(e){return e?e[0].toUpperCase()+e.slice(1):""}const ho=["enter","leave"];function fo(e,t="",n=!1){const r=co[e],i=r&&r[t]||t;return"on"+uo(e)+uo(i)+(function(e=!1,t){return e&&!ho.includes(t)}(n,i)?"Capture":"")}const po=["gotpointercapture","lostpointercapture"];function mo(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=po.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function vo(e){return"touches"in e}function go(e){return vo(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function yo(e){return vo(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function Ao(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function bo(e){const t=yo(e);return vo(e)?t.identifier:t.pointerId}function _o(e){const t=yo(e);return[t.clientX,t.clientY]}function wo(e,...t){return"function"==typeof e?e(...t):e}function Co(){}function Eo(...e){return 0===e.length?Co:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function xo(e,t){return Object.assign({},t,e||{})}class Bo{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?wo(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);no.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[s,l]=n.threshold,{_step:c,values:u}=t;if(n.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=s&&u[0]),!1===c[1]&&(c[1]=Math.abs(a)>=l&&u[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=s&&Math.sign(o)*s),!1===c[1]&&(c[1]=Math.abs(a)>=l&&Math.sign(a)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[e,t]=u;h[0]=!1!==c[0]?e-c[0]:0,h[1]=!1!==c[1]?t-c[1]:0}else h[0]=!1!==c[0]?o-c[0]:0,h[1]=!1!==c[1]?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,f=t._active&&!t._blocked||t.active;f&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=wo(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[p,m]=t.offset,[[v,g],[y,A]]=t._bounds;t.overflow=[p<v?-1:p>g?1:0,m<y?-1:m>A?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const b=t._active&&n.rubberband||[0,0];if(t.offset=function(e,[t,n],[r,i]){const[[o,a],[s,l]]=e;return[io(t,o,a,r),io(n,s,l,i)]}(t._bounds,t.offset,b),t.delta=no.sub(t.offset,d),this.computeMovement(),f&&(!t.last||i>32)){t.delta=no.sub(t.offset,d);const e=t.delta.map(Math.abs);no.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(lo(lo(lo({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class So extends Bo{constructor(...e){super(...e),ao(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=no.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=no.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"==typeof n.axisThreshold?n.axisThreshold[go(e)]:n.axisThreshold;t.axis=function([e,t],n){const r=Math.abs(e),i=Math.abs(t);return r>i&&r>n?"x":i>r&&i>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const To=e=>e,Mo={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>lo(lo({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return no.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?no.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||To},threshold:e=>no.toVector(e,0)},Ro=lo(lo({},Mo),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>Ro.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),Oo={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};const Do="undefined"!=typeof window&&window.document&&window.document.createElement;function Fo(){return Do&&"ontouchstart"in window||Do&&window.navigator.maxTouchPoints>1}const Uo={isBrowser:Do,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:Fo(),touchscreen:Fo(),pointer:Do&&"onpointerdown"in window,pointerLock:Do&&"exitPointerLock"in window.document},Io={mouse:0,touch:0,pen:8},ko=lo(lo({},Ro),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Uo.pointerLock,Uo.touch&&n?"touch":this.pointerLock?"mouse":Uo.pointer&&!i?"pointer":Uo.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,Uo.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i}){const o=no.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(no.toVector(e)),distance:this.transform(no.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?lo(lo({},Io),e):Io,keyboardDisplacement:(e=10)=>e});lo(lo({},Mo),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Uo.touch&&Uo.gesture)return"gesture";if(Uo.touch&&r)return"touch";if(Uo.touchscreen){if(Uo.pointer)return"pointer";if(Uo.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=e=>{const t=xo(wo(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=xo(wo(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[i(),o()]:e=>[i(e),o(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return no.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e}),lo(lo({},Ro),{},{mouseOnly:(e=!0)=>e}),lo(lo({},Ro),{},{mouseOnly:(e=!0)=>e});const Po=new Map,Lo=new Map;const Go={key:"drag",engine:class extends So{constructor(...e){super(...e),ao(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=Ro.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=bo(e),n._pointerActive=!0,this.computeValues(_o(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==go(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=bo(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;const i=_o(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=no.sub(i,t._values),this.computeValues(i)),no.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(a){}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=bo(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t._delta,[i,o]=t._movement,[a,s]=n.swipe.velocity,[l,c]=n.swipe.distance,u=n.swipe.duration;if(t.elapsedTime<u){const n=Math.abs(e/t.timeDelta),u=Math.abs(r/t.timeDelta);n>a&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),u>s&&Math.abs(o)>c&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=Oo[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,no.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Oo&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:ko};function zo(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Ho={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(Uo.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},No=["target","eventOptions","window","enabled","transform"];function jo(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=jo(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class Jo{constructor(e,t){ao(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const o=this._listeners,a=function(e,t=""){const n=co[e];return e+(n&&n[t]||t)}(t,n),s=lo(lo({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);const l=()=>{e.removeEventListener(a,r,s),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class Ko{constructor(){ao(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Wo{constructor(e){ao(this,"gestures",new Set),ao(this,"_targetEventStore",new Jo(this)),ao(this,"gestureEventStores",{}),ao(this,"gestureTimeoutStores",{}),ao(this,"handlers",{}),ao(this,"config",{}),ao(this,"pointerIds",new Set),ao(this,"touchIds",new Set),ao(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Vo(e,"drag");t.wheel&&Vo(e,"wheel");t.scroll&&Vo(e,"scroll");t.move&&Vo(e,"move");t.pinch&&Vo(e,"pinch");t.hover&&Vo(e,"hover")}(this,e)}setEventIds(e){return vo(e)?(this.touchIds=new Set(Ao(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,n={}){const r=e,{target:i,eventOptions:o,window:a,enabled:s,transform:l}=r,c=zo(r,No);if(n.shared=jo({target:i,eventOptions:o,window:a,enabled:s,transform:l},Ho),t){const e=Lo.get(t);n[t]=jo(lo({shared:n.shared},c),e)}else for(const u in c){const e=Lo.get(u);e&&(n[u]=jo(lo({shared:n.shared},c[u]),e))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!t.target||(r=t.target(),r)){if(t.enabled){for(const t of this.gestures){const i=this.config[t],o=Xo(n,i.eventOptions,!!r);if(i.enabled){new(Po.get(t))(this,e,t).bind(o)}}const i=Xo(n,t.eventOptions,!!r);for(const t in this.nativeHandlers)i(t,"",(n=>this.nativeHandlers[t](lo(lo({},this.state.shared),{},{event:n,args:e}))),void 0,!0)}for(const e in n)n[e]=Eo(...n[e]);if(!r)return n;for(const e in n){const{device:t,capture:i,passive:o}=mo(e);this._targetEventStore.add(r,t,"",n[e],{capture:i,passive:o})}}}}function Vo(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Jo(e,t),e.gestureTimeoutStores[t]=new Ko}const Xo=(e,t,n)=>(r,i,o,a={},s=!1)=>{var l,c;const u=null!==(l=a.capture)&&void 0!==l?l:t.capture,h=null!==(c=a.passive)&&void 0!==c?c:t.passive;let d=s?r:fo(r,i,u);n&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(o)};function Yo(e,t){var n;return n=Go,Po.set(n.key,n.engine),Lo.set(n.key,n.resolver),function(e,t={},n,r){const o=i.useMemo((()=>new Wo(e)),[]);if(o.applyHandlers(e,r),o.applyConfig(t,n),i.useEffect(o.effect.bind(o)),i.useEffect((()=>o.clean.bind(o)),[]),void 0===t.target)return o.bind.bind(o)}({drag:e},t||{},"drag")}const Qo=e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());o=n=>{const r=e(n);if(!i(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(o)};return e(t,n,r)};function Zo(e,t){if(t===U)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===I||t===k){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(n)if(t===I)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const qo=parseInt(L.replace(/\D+/g,""));var $o=Uint8Array,ea=Uint16Array,ta=Uint32Array,na=new $o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ra=new $o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ia=new $o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oa=function(e,t){for(var n=new ea(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new ta(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},aa=oa(na,2),sa=aa[0],la=aa[1];sa[28]=258,la[258]=28;for(var ca=oa(ra,0)[0],ua=new ea(32768),ha=0;ha<32768;++ha){var da=(43690&ha)>>>1|(21845&ha)<<1;da=(61680&(da=(52428&da)>>>2|(13107&da)<<2))>>>4|(3855&da)<<4,ua[ha]=((65280&da)>>>8|(255&da)<<8)>>>1}var fa=function(e,t,n){for(var r=e.length,i=0,o=new ea(t);i<r;++i)++o[e[i]-1];var a,s=new ea(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new ea(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=s[e[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[ua[h]>>>l]=c}else for(a=new ea(r),i=0;i<r;++i)e[i]&&(a[i]=ua[s[e[i]-1]++]>>>15-e[i]);return a},pa=new $o(288);for(ha=0;ha<144;++ha)pa[ha]=8;for(ha=144;ha<256;++ha)pa[ha]=9;for(ha=256;ha<280;++ha)pa[ha]=7;for(ha=280;ha<288;++ha)pa[ha]=8;var ma=new $o(32);for(ha=0;ha<32;++ha)ma[ha]=5;var va=fa(pa,9,1),ga=fa(ma,5,1),ya=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Aa=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ba=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},_a=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new $o(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new $o(3*r));var a,s=function(e){var n=t.length;if(e>n){var r=new $o(Math.max(2*n,e));r.set(t),t=r}},l=n.f||0,c=n.p||0,u=n.b||0,h=n.l,d=n.d,f=n.m,p=n.n,m=8*r;do{if(!h){n.f=l=Aa(e,c,1);var v=Aa(e,c+1,3);if(c+=3,!v){var g=e[(T=((a=c)/8|0)+(7&a&&1)+4)-4]|e[T-3]<<8,y=T+g;if(y>r){if(o)throw"unexpected EOF";break}i&&s(u+g),t.set(e.subarray(T,y),u),n.b=u+=g,n.p=c=8*y;continue}if(1==v)h=va,d=ga,f=9,p=5;else{if(2!=v)throw"invalid block type";var A=Aa(e,c,31)+257,b=Aa(e,c+10,15)+4,_=A+Aa(e,c+5,31)+1;c+=14;for(var w=new $o(_),C=new $o(19),E=0;E<b;++E)C[ia[E]]=Aa(e,c+3*E,7);c+=3*b;var x=ya(C),B=(1<<x)-1,S=fa(C,x,1);for(E=0;E<_;){var T,M=S[Aa(e,c,B)];if(c+=15&M,(T=M>>>4)<16)w[E++]=T;else{var R=0,O=0;for(16==T?(O=3+Aa(e,c,3),c+=2,R=w[E-1]):17==T?(O=3+Aa(e,c,7),c+=3):18==T&&(O=11+Aa(e,c,127),c+=7);O--;)w[E++]=R}}var D=w.subarray(0,A),F=w.subarray(A);f=ya(D),p=ya(F),h=fa(D,f,1),d=fa(F,p,1)}if(c>m){if(o)throw"unexpected EOF";break}}i&&s(u+131072);for(var U=(1<<f)-1,I=(1<<p)-1,k=c;;k=c){var P=(R=h[ba(e,c)&U])>>>4;if((c+=15&R)>m){if(o)throw"unexpected EOF";break}if(!R)throw"invalid length/literal";if(P<256)t[u++]=P;else{if(256==P){k=c,h=null;break}var L=P-254;if(P>264){var G=na[E=P-257];L=Aa(e,c,(1<<G)-1)+sa[E],c+=G}var z=d[ba(e,c)&I],H=z>>>4;if(!z)throw"invalid distance";c+=15&z;F=ca[H];if(H>3){G=ra[H];F+=ba(e,c)&(1<<G)-1,c+=G}if(c>m){if(o)throw"unexpected EOF";break}i&&s(u+131072);for(var N=u+L;u<N;u+=4)t[u]=t[u-F],t[u+1]=t[u+1-F],t[u+2]=t[u+2-F],t[u+3]=t[u+3-F];u=N}}n.l=h,n.p=k,n.b=u,h&&(l=1,n.m=f,n.d=d,n.n=p)}while(!l);return u==t.length?t:function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof ea?ea:e instanceof ta?ta:$o)(n-t);return r.set(e.subarray(t,n)),r}(t,0,u)},wa=new $o(0);function Ca(e,t){return _a((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}var Ea="undefined"!=typeof TextDecoder&&new TextDecoder;try{Ea.decode(wa,{stream:!0}),1}catch(em){}let xa=class extends G{constructor(e,t,n=!1,r=!1,i=1e4){const o=new d;super(o,t),this.isMarchingCubes=!0;const a=this,s=new Float32Array(36),l=new Float32Array(36),c=new Float32Array(36);function u(e,t,n){return e+(t-e)*n}function f(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),v=a.normal_cache;s[t+0]=r+m*a.delta,s[t+1]=i,s[t+2]=o,l[t+0]=u(v[e+0],v[e+3],m),l[t+1]=u(v[e+1],v[e+4],m),l[t+2]=u(v[e+2],v[e+5],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function m(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),v=a.normal_cache;s[t+0]=r,s[t+1]=i+m*a.delta,s[t+2]=o;const g=e+3*a.yd;l[t+0]=u(v[e+0],v[g+0],m),l[t+1]=u(v[e+1],v[g+1],m),l[t+2]=u(v[e+2],v[g+2],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function v(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),v=a.normal_cache;s[t+0]=r,s[t+1]=i,s[t+2]=o+m*a.delta;const g=e+3*a.zd;l[t+0]=u(v[e+0],v[g+0],m),l[t+1]=u(v[e+1],v[g+1],m),l[t+2]=u(v[e+2],v[g+2],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function g(e){const t=3*e;0===a.normal_cache[t]&&(a.normal_cache[t+0]=a.field[e-1]-a.field[e+1],a.normal_cache[t+1]=a.field[e-a.yd]-a.field[e+a.yd],a.normal_cache[t+2]=a.field[e-a.zd]-a.field[e+a.zd])}function y(e,t,n,r,i){const o=r+1,u=r+a.yd,h=r+a.zd,d=o+a.yd,p=o+a.zd,y=r+a.yd+a.zd,b=o+a.yd+a.zd;let _=0;const w=a.field[r],C=a.field[o],E=a.field[u],x=a.field[d],B=a.field[h],S=a.field[p],T=a.field[y],M=a.field[b];w<i&&(_|=1),C<i&&(_|=2),E<i&&(_|=8),x<i&&(_|=4),B<i&&(_|=16),S<i&&(_|=32),T<i&&(_|=128),M<i&&(_|=64);const R=Ba[_];if(0===R)return 0;const O=a.delta,D=e+O,F=t+O,U=n+O;1&R&&(g(r),g(o),f(3*r,0,i,e,t,n,w,C,r,o)),2&R&&(g(o),g(d),m(3*o,3,i,D,t,n,C,x,o,d)),4&R&&(g(u),g(d),f(3*u,6,i,e,F,n,E,x,u,d)),8&R&&(g(r),g(u),m(3*r,9,i,e,t,n,w,E,r,u)),16&R&&(g(h),g(p),f(3*h,12,i,e,t,U,B,S,h,p)),32&R&&(g(p),g(b),m(3*p,15,i,D,t,U,S,M,p,b)),64&R&&(g(y),g(b),f(3*y,18,i,e,F,U,T,M,y,b)),128&R&&(g(h),g(y),m(3*h,21,i,e,t,U,B,T,h,y)),256&R&&(g(r),g(h),v(3*r,24,i,e,t,n,w,B,r,h)),512&R&&(g(o),g(p),v(3*o,27,i,D,t,n,C,S,o,p)),1024&R&&(g(d),g(b),v(3*d,30,i,D,F,n,x,M,d,b)),2048&R&&(g(u),g(y),v(3*u,33,i,e,F,n,E,T,u,y)),_<<=4;let I,k,P,L=0,G=0;for(;-1!=Sa[_+G];)I=_+G,k=I+1,P=I+2,A(s,l,c,3*Sa[I],3*Sa[k],3*Sa[P]),G+=3,L++;return L}function A(e,t,n,r,i,o){const s=3*a.count;if(a.positionArray[s+0]=e[r],a.positionArray[s+1]=e[r+1],a.positionArray[s+2]=e[r+2],a.positionArray[s+3]=e[i],a.positionArray[s+4]=e[i+1],a.positionArray[s+5]=e[i+2],a.positionArray[s+6]=e[o],a.positionArray[s+7]=e[o+1],a.positionArray[s+8]=e[o+2],!0===a.material.flatShading){const e=(t[r+0]+t[i+0]+t[o+0])/3,n=(t[r+1]+t[i+1]+t[o+1])/3,l=(t[r+2]+t[i+2]+t[o+2])/3;a.normalArray[s+0]=e,a.normalArray[s+1]=n,a.normalArray[s+2]=l,a.normalArray[s+3]=e,a.normalArray[s+4]=n,a.normalArray[s+5]=l,a.normalArray[s+6]=e,a.normalArray[s+7]=n,a.normalArray[s+8]=l}else a.normalArray[s+0]=t[r+0],a.normalArray[s+1]=t[r+1],a.normalArray[s+2]=t[r+2],a.normalArray[s+3]=t[i+0],a.normalArray[s+4]=t[i+1],a.normalArray[s+5]=t[i+2],a.normalArray[s+6]=t[o+0],a.normalArray[s+7]=t[o+1],a.normalArray[s+8]=t[o+2];if(a.enableUvs){const t=2*a.count;a.uvArray[t+0]=e[r+0],a.uvArray[t+1]=e[r+2],a.uvArray[t+2]=e[i+0],a.uvArray[t+3]=e[i+2],a.uvArray[t+4]=e[o+0],a.uvArray[t+5]=e[o+2]}a.enableColors&&(a.colorArray[s+0]=n[r+0],a.colorArray[s+1]=n[r+1],a.colorArray[s+2]=n[r+2],a.colorArray[s+3]=n[i+0],a.colorArray[s+4]=n[i+1],a.colorArray[s+5]=n[i+2],a.colorArray[s+6]=n[o+0],a.colorArray[s+7]=n[o+1],a.colorArray[s+8]=n[o+2]),a.count+=3}this.enableUvs=n,this.enableColors=r,this.init=function(e){this.resolution=e,this.isolation=80,this.size=e,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.palette=new Float32Array(3*this.size3),this.count=0;const t=3*i;this.positionArray=new Float32Array(3*t);const n=new P(this.positionArray,3);n.setUsage(z),o.setAttribute("position",n),this.normalArray=new Float32Array(3*t);const r=new P(this.normalArray,3);if(r.setUsage(z),o.setAttribute("normal",r),this.enableUvs){this.uvArray=new Float32Array(2*t);const e=new P(this.uvArray,2);e.setUsage(z),o.setAttribute("uv",e)}if(this.enableColors){this.colorArray=new Float32Array(3*t);const e=new P(this.colorArray,3);e.setUsage(z),o.setAttribute("color",e)}o.boundingSphere=new H(new h,1)},this.addBall=function(e,t,n,r,i,o){const a=Math.sign(r);r=Math.abs(r);const s=!(null==o);let l=new p(e,t,n);if(s)try{l=o instanceof p?o:Array.isArray(o)?new p(Math.min(Math.abs(o[0]),1),Math.min(Math.abs(o[1]),1),Math.min(Math.abs(o[2]),1)):new p(o)}catch(O){l=new p(e,t,n)}const c=this.size*Math.sqrt(r/i),u=n*this.size,h=t*this.size,d=e*this.size;let f=Math.floor(u-c);f<1&&(f=1);let m=Math.floor(u+c);m>this.size-1&&(m=this.size-1);let v=Math.floor(h-c);v<1&&(v=1);let g=Math.floor(h+c);g>this.size-1&&(g=this.size-1);let y=Math.floor(d-c);y<1&&(y=1);let A,b,_,w,C,E,x,B,S,T,M,R=Math.floor(d+c);for(R>this.size-1&&(R=this.size-1),_=f;_<m;_++)for(C=this.size2*_,B=_/this.size-n,S=B*B,b=v;b<g;b++)for(w=C+this.size*b,x=b/this.size-t,T=x*x,A=y;A<R;A++)if(E=A/this.size-e,M=r/(1e-6+E*E+T+S)-i,M>0){this.field[w+A]+=M*a;const e=Math.sqrt((A-d)*(A-d)+(b-h)*(b-h)+(_-u)*(_-u))/c,t=1-e*e*e*(e*(6*e-15)+10);this.palette[3*(w+A)+0]+=l.r*t,this.palette[3*(w+A)+1]+=l.g*t,this.palette[3*(w+A)+2]+=l.b*t}},this.addPlaneX=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f=n*Math.sqrt(e/t);for(f>n&&(f=n),a=0;a<f;a++)if(h=a/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(s=0;s<n;s++)for(d=a+s*r,l=0;l<n;l++)o[i*l+d]+=u},this.addPlaneY=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f,p=n*Math.sqrt(e/t);for(p>n&&(p=n),s=0;s<p;s++)if(h=s/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(d=s*r,a=0;a<n;a++)for(f=d+a,l=0;l<n;l++)o[i*l+f]+=u},this.addPlaneZ=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f,p=n*Math.sqrt(e/t);for(p>n&&(p=n),l=0;l<p;l++)if(h=l/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(d=i*l,s=0;s<n;s++)for(f=d+s*r,a=0;a<n;a++)o[f+a]+=u},this.setCell=function(e,t,n,r){const i=this.size2*n+this.size*t+e;this.field[i]=r},this.getCell=function(e,t,n){const r=this.size2*n+this.size*t+e;return this.field[r]},this.blur=function(e=1){const t=this.field,n=t.slice(),r=this.size,i=this.size2;for(let o=0;o<r;o++)for(let a=0;a<r;a++)for(let s=0;s<r;s++){const l=i*s+r*a+o;let c=n[l],u=1;for(let t=-1;t<=1;t+=2){const l=t+o;if(!(l<0||l>=r))for(let t=-1;t<=1;t+=2){const o=t+a;if(!(o<0||o>=r))for(let t=-1;t<=1;t+=2){const a=t+s;if(a<0||a>=r)continue;u++,c+=e*(n[i*a+r*o+l]-c)/u}}}t[l]=c}},this.reset=function(){for(let e=0;e<this.size3;e++)this.normal_cache[3*e]=0,this.field[e]=0,this.palette[3*e]=this.palette[3*e+1]=this.palette[3*e+2]=0},this.update=function(){this.count=0;const e=this.size-2;for(let t=1;t<e;t++){const n=this.size2*t,r=(t-this.halfsize)/this.halfsize;for(let t=1;t<e;t++){const i=n+this.size*t,o=(t-this.halfsize)/this.halfsize;for(let t=1;t<e;t++){y((t-this.halfsize)/this.halfsize,o,r,i+t,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>i&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}};const Ba=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),Sa=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);class Ta extends G{constructor(e,t){var n,r;const i=(o=e)&&o.isCubeTexture;var o;const a=(null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4,s=Math.floor(Math.log2(a)),l=Math.pow(2,s),c=[i?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/(3*Math.max(l,112)),"#define CUBEUV_TEXEL_HEIGHT "+1/(4*l),`#define CUBEUV_MAX_MIP ${s}.0`].join("\n")+`\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n        }\n        `,u={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new N(1,16),new j({uniforms:u,fragmentShader:c,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:T}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ma=Object.defineProperty,Ra=(e,t,n)=>(((e,t,n)=>{t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Oa=new J,Da=new K,Fa=Math.cos(Math.PI/180*70),Ua=(e,t)=>(e%t+t)%t;let Ia=class extends W{constructor(e,t){super(),Ra(this,"object"),Ra(this,"domElement"),Ra(this,"enabled",!0),Ra(this,"target",new h),Ra(this,"minDistance",0),Ra(this,"maxDistance",1/0),Ra(this,"minZoom",0),Ra(this,"maxZoom",1/0),Ra(this,"minPolarAngle",0),Ra(this,"maxPolarAngle",Math.PI),Ra(this,"minAzimuthAngle",-1/0),Ra(this,"maxAzimuthAngle",1/0),Ra(this,"enableDamping",!1),Ra(this,"dampingFactor",.05),Ra(this,"enableZoom",!0),Ra(this,"zoomSpeed",1),Ra(this,"enableRotate",!0),Ra(this,"rotateSpeed",1),Ra(this,"enablePan",!0),Ra(this,"panSpeed",1),Ra(this,"screenSpacePanning",!0),Ra(this,"keyPanSpeed",7),Ra(this,"zoomToCursor",!1),Ra(this,"autoRotate",!1),Ra(this,"autoRotateSpeed",2),Ra(this,"reverseOrbit",!1),Ra(this,"reverseHorizontalOrbit",!1),Ra(this,"reverseVerticalOrbit",!1),Ra(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ra(this,"mouseButtons",{LEFT:V.ROTATE,MIDDLE:V.DOLLY,RIGHT:V.PAN}),Ra(this,"touches",{ONE:X.ROTATE,TWO:X.DOLLY_PAN}),Ra(this,"target0"),Ra(this,"position0"),Ra(this,"zoom0"),Ra(this,"_domElementKeyEvents",null),Ra(this,"getPolarAngle"),Ra(this,"getAzimuthalAngle"),Ra(this,"setPolarAngle"),Ra(this,"setAzimuthalAngle"),Ra(this,"getDistance"),Ra(this,"listenToKeyEvents"),Ra(this,"stopListenToKeyEvents"),Ra(this,"saveState"),Ra(this,"reset"),Ra(this,"update"),Ra(this,"connect"),Ra(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=Ua(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=Ua(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",ie),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ie),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=(()=>{const t=new h,i=new h(0,1,0),o=(new M).setFromUnitVectors(e.up,i),u=o.clone().invert(),g=new h,y=new M,A=2*Math.PI;return function(){const b=n.object.position;o.setFromUnitVectors(e.up,i),u.copy(o).invert(),t.copy(b).sub(n.target),t.applyQuaternion(o),c.setFromVector3(t),n.autoRotate&&s===a.NONE&&U(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=d.theta*n.dampingFactor,c.phi+=d.phi*n.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let _=n.minAzimuthAngle,w=n.maxAzimuthAngle;isFinite(_)&&isFinite(w)&&(_<-Math.PI?_+=A:_>Math.PI&&(_-=A),w<-Math.PI?w+=A:w>Math.PI&&(w-=A),c.theta=_<=w?Math.max(_,Math.min(w,c.theta)):c.theta>(_+w)/2?Math.max(_,c.theta):Math.min(w,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.zoomToCursor&&T||n.object.isOrthographicCamera?c.radius=N(c.radius):c.radius=N(c.radius*f),t.setFromSpherical(c),t.applyQuaternion(u),b.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),p.set(0,0,0));let C=!1;if(n.zoomToCursor&&T){let r=null;if(n.object instanceof v&&n.object.isPerspectiveCamera){const e=t.length();r=N(e*f);const i=e-r;n.object.position.addScaledVector(B,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new h(S.x,S.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix(),C=!0;const i=new h(S.x,S.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(Oa.origin.copy(n.object.position),Oa.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Oa.direction))<Fa?e.lookAt(n.target):(Da.setFromNormalAndCoplanarPoint(n.object.up,n.target),Oa.intersectPlane(Da,n.target))))}else n.object instanceof m&&n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix(),C=!0);return f=1,T=!1,!!(C||g.distanceToSquared(n.object.position)>l||8*(1-y.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),g.copy(n.object.position),y.copy(n.object.quaternion),C=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",oe),n.domElement.addEventListener("pointerdown",$),n.domElement.addEventListener("pointercancel",ne),n.domElement.addEventListener("wheel",re)},this.dispose=()=>{var e,t,r,i,o,a;null==(e=n.domElement)||e.removeEventListener("contextmenu",oe),null==(t=n.domElement)||t.removeEventListener("pointerdown",$),null==(r=n.domElement)||r.removeEventListener("pointercancel",ne),null==(i=n.domElement)||i.removeEventListener("wheel",re),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",ee),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",te),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",ie)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=a.NONE;const l=1e-6,c=new F,d=new F;let f=1;const p=new h,g=new u,y=new u,A=new u,b=new u,_=new u,w=new u,C=new u,E=new u,x=new u,B=new h,S=new u;let T=!1;const R=[],O={};function D(){return Math.pow(.95,n.zoomSpeed)}function U(e){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=e:d.theta-=e}function I(e){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=e:d.phi-=e}const k=(()=>{const e=new h;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}})(),P=(()=>{const e=new h;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}})(),L=(()=>{const e=new h;return function(t,r){const i=n.domElement;if(i&&n.object instanceof v&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),k(2*t*a/i.clientHeight,n.object.matrix),P(2*r*a/i.clientHeight,n.object.matrix)}else i&&n.object instanceof m&&n.object.isOrthographicCamera?(k(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),P(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function G(e){n.object instanceof v&&n.object.isPerspectiveCamera||n.object instanceof m&&n.object.isOrthographicCamera?f/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e){n.object instanceof v&&n.object.isPerspectiveCamera||n.object instanceof m&&n.object.isOrthographicCamera?f*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(e){if(!n.zoomToCursor||!n.domElement)return;T=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,o=t.width,a=t.height;S.x=r/o*2-1,S.y=-i/a*2+1,B.set(S.x,S.y,1).unproject(n.object).sub(n.object.position).normalize()}function N(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function j(e){g.set(e.clientX,e.clientY)}function J(e){b.set(e.clientX,e.clientY)}function K(){if(1==R.length)g.set(R[0].pageX,R[0].pageY);else{const e=.5*(R[0].pageX+R[1].pageX),t=.5*(R[0].pageY+R[1].pageY);g.set(e,t)}}function W(){if(1==R.length)b.set(R[0].pageX,R[0].pageY);else{const e=.5*(R[0].pageX+R[1].pageX),t=.5*(R[0].pageY+R[1].pageY);b.set(e,t)}}function Y(){const e=R[0].pageX-R[1].pageX,t=R[0].pageY-R[1].pageY,n=Math.sqrt(e*e+t*t);C.set(0,n)}function Q(e){if(1==R.length)y.set(e.pageX,e.pageY);else{const t=le(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);y.set(n,r)}A.subVectors(y,g).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(U(2*Math.PI*A.x/t.clientHeight),I(2*Math.PI*A.y/t.clientHeight)),g.copy(y)}function Z(e){if(1==R.length)_.set(e.pageX,e.pageY);else{const t=le(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);_.set(n,r)}w.subVectors(_,b).multiplyScalar(n.panSpeed),L(w.x,w.y),b.copy(_)}function q(e){const t=le(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);E.set(0,o),x.set(0,Math.pow(E.y/C.y,n.zoomSpeed)),G(x.y),C.copy(E)}function $(e){var t,r;!1!==n.enabled&&(0===R.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",ee),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",te)),function(e){R.push(e)}(e),"touch"===e.pointerType?function(e){switch(se(e),R.length){case 1:switch(n.touches.ONE){case X.ROTATE:if(!1===n.enableRotate)return;K(),s=a.TOUCH_ROTATE;break;case X.PAN:if(!1===n.enablePan)return;W(),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(n.touches.TWO){case X.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Y(),n.enablePan&&W(),s=a.TOUCH_DOLLY_PAN;break;case X.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Y(),n.enableRotate&&K(),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case V.DOLLY:if(!1===n.enableZoom)return;!function(e){H(e),C.set(e.clientX,e.clientY)}(e),s=a.DOLLY;break;case V.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;J(e),s=a.PAN}else{if(!1===n.enableRotate)return;j(e),s=a.ROTATE}break;case V.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;j(e),s=a.ROTATE}else{if(!1===n.enablePan)return;J(e),s=a.PAN}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(e))}function ee(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(se(e),s){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;Q(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;Z(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&q(e),n.enablePan&&Z(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&q(e),n.enableRotate&&Q(e)}(e),n.update();break;default:s=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(s){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),A.subVectors(y,g).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(U(2*Math.PI*A.x/t.clientHeight),I(2*Math.PI*A.y/t.clientHeight)),g.copy(y),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),x.subVectors(E,C),x.y>0?G(D()):x.y<0&&z(D()),C.copy(E),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){_.set(e.clientX,e.clientY),w.subVectors(_,b).multiplyScalar(n.panSpeed),L(w.x,w.y),b.copy(_),n.update()}(e)}}(e))}function te(e){var t,r,i;ae(e),0===R.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",ee),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",te)),n.dispatchEvent(o),s=a.NONE}function ne(e){ae(e)}function re(e){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){H(e),e.deltaY<0?z(D()):e.deltaY>0&&G(D()),n.update()}(e),n.dispatchEvent(o))}function ie(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:L(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:L(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function oe(e){!1!==n.enabled&&e.preventDefault()}function ae(e){delete O[e.pointerId];for(let t=0;t<R.length;t++)if(R[t].pointerId==e.pointerId)return void R.splice(t,1)}function se(e){let t=O[e.pointerId];void 0===t&&(t=new u,O[e.pointerId]=t),t.set(e.pageX,e.pageY)}function le(e){const t=e.pointerId===R[0].pointerId?R[1]:R[0];return O[t.pointerId]}void 0!==t&&this.connect(t),this.update()}};class ka extends Y{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Na(e)})),this.register((function(e){return new Qa(e)})),this.register((function(e){return new Za(e)})),this.register((function(e){return new qa(e)})),this.register((function(e){return new Ja(e)})),this.register((function(e){return new Ka(e)})),this.register((function(e){return new Wa(e)})),this.register((function(e){return new Va(e)})),this.register((function(e){return new Ha(e)})),this.register((function(e){return new Xa(e)})),this.register((function(e){return new ja(e)})),this.register((function(e){return new Ya(e)})),this.register((function(e){return new Ga(e)})),this.register((function(e){return new $a(e)})),this.register((function(e){return new es(e)}))}load(e,t,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Q.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new Z(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(em){a(em)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(Q.decodeText(new Uint8Array(e.slice(0,4)))===ts){try{o[La.KHR_BINARY_GLTF]=new is(e)}catch(l){return void(r&&r(l))}i=JSON.parse(o[La.KHR_BINARY_GLTF].content)}else i=JSON.parse(Q.decodeText(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const s=new Ms(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](s);a[e.name]=e,o[e.name]=!0}if(i.extensionsUsed)for(let c=0;c<i.extensionsUsed.length;++c){const e=i.extensionsUsed[c],t=i.extensionsRequired||[];switch(e){case La.KHR_MATERIALS_UNLIT:o[e]=new za;break;case La.KHR_DRACO_MESH_COMPRESSION:o[e]=new os(i,this.dracoLoader);break;case La.KHR_TEXTURE_TRANSFORM:o[e]=new as;break;case La.KHR_MESH_QUANTIZATION:o[e]=new ss;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}s.setExtensions(o),s.setPlugins(a),s.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function Pa(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const La={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ga{constructor(e){this.parser=e,this.name=La.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const s=new p(16777215);void 0!==o.color&&s.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new ee(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new $(s),a.distance=l;break;case"spot":a=new q(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,Cs(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class za{constructor(){this.name=La.KHR_MATERIALS_UNLIT}getMaterialType(){return te}extendParams(e,t,n){const r=[];e.color=new p(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,3001))}return Promise.all(r)}}class Ha{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Na{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new u(e,e)}return Promise.all(i)}}class ja{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class Ja{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new p(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class Ka{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class Wa{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new p(a[0],a[1],a[2]),Promise.all(i)}}class Va{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Xa{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new p(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(i)}}class Ya{constructor(e){this.parser=e,this.name=La.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?ne:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(i)}}class Qa{constructor(e){this.parser=e,this.name=La.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,o)}}class Za{constructor(e){this.parser=e,this.name=La.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class qa{constructor(e){this.parser=e,this.name=La.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class $a{constructor(e){this.name=La.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t}))}))}return null}}class es{constructor(e){this.name=La.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const s of r.primitives)if(s.mode!==hs.TRIANGLES&&s.mode!==hs.TRIANGLE_STRIP&&s.mode!==hs.TRIANGLE_FAN&&void 0!==s.mode)return null;const i=n.extensions[this.name].attributes,o=[],a={};for(const s in i)o.push(this.parser.getDependency("accessor",i[s]).then((e=>(a[s]=e,a[s]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const o of n){const e=new R,t=new h,n=new M,s=new h(1,1,1),l=new re(o.geometry,o.material,r);for(let i=0;i<r;i++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,i),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,i),a.SCALE&&s.fromBufferAttribute(a.SCALE,i),l.setMatrixAt(i,e.compose(t,n,s));for(const r in a)"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&o.geometry.setAttribute(r,a[r]);ie.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]})))}}const ts="glTF",ns=1313821514,rs=5130562;class is{constructor(e){this.name=La.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Q.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ts)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===ns){const n=new Uint8Array(e,12+i,t);this.content=Q.decodeText(n)}else if(n===rs){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class os{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=La.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const c in o){const e=vs[c]||c.toLowerCase();a[e]=o[c]}for(const c in e.attributes){const t=vs[c]||c.toLowerCase();if(void 0!==o[c]){const r=n.accessors[e.attributes[c]],i=ds[r.componentType];l[t]=i.name,s[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class as{constructor(){this.name=La.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class ss{constructor(){this.name=La.KHR_MESH_QUANTIZATION}}class ls extends Ge{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[i+o];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=r-t,u=(n-t)/c,h=u*u,d=h*u,f=e*l,p=f-l,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+u;for(let A=0;A!==a;A++){const e=o[p+A+a],t=o[p+A+s]*c,n=o[f+A+a],r=o[f+A]*c;i[A]=g*e+y*t+m*n+v*r}return i}}const cs=new M;class us extends ls{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return cs.fromArray(i).normalize().toArray(i),i}}const hs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ds={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fs={9728:Be,9729:le,9984:Se,9985:Te,9986:Me,9987:ce},ps={33071:Re,33648:Oe,10497:ue},ms={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vs={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...qo>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},gs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ys={CUBICSPLINE:void 0,LINEAR:Ce,STEP:De},As="OPAQUE",bs="MASK",_s="BLEND";function ws(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Cs(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Es(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function xs(e){let t;const n=e.extensions&&e.extensions[La.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+Bs(n.attributes):e.indices+":"+Bs(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+Bs(e.targets[r]);return t}function Bs(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Ss(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Ts=new R;class Ms{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Pa,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new oe(this.options.manager):this.textureLoader=new ae(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Z(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};ws(i,o,r),Cs(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,o]of e.children.entries())i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[La.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(Q.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=ms[r.type],t=ds[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new P(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=ms[r.type],a=ds[r.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,f;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(d=new a(i,e*u,r.count*u/s),l=new se(d,u/s),t.cache.add(n,l)),f=new Ue(l,o,c%u/s,h)}else d=null===i?new a(r.count*o):new a(i,c,r.count*o),f=new P(d,o,h);if(void 0!==r.sparse){const t=ms.SCALAR,n=ds[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),u=new a(e[2],l,r.sparse.count*o);null!==i&&(f=new P(f.array.slice(),f.itemSize,f.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(f.setX(t,u[e*o]),o>=2&&f.setY(t,u[e*o+1]),o>=3&&f.setZ(t,u[e*o+2]),o>=4&&f.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=i.textures[e],a=i.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=fs[n.magFilter]||le,t.minFilter=fs[n.minFilter]||ce,t.wrapS=ps[n.wrapS]||ue,t.wrapT=ps[n.wrapT]||ue,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=r.images[e],s=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=n.getDependency("bufferView",o.bufferView).then((function(e){c=!0;const t=new Blob([e],{type:o.mimeType});return l=s.createObjectURL(t),l}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then((function(e){return new Promise((function(n,r){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new a(e);t.needsUpdate=!0,n(t)}),t.load(Q.resolveURL(e,i.path),o,void 0,r)}))})).then((function(e){var t;return!0===c&&s.revokeObjectURL(l),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),i.extensions[La.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[La.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(o);o=i.extensions[La.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&("colorSpace"in o?o.colorSpace=3001===r?"srgb":"srgb-linear":o.encoding=r),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new he,f.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new de,f.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return fe}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const a={},s=[];if((i.extensions||{})[La.KHR_MATERIALS_UNLIT]){const e=r[La.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),s.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new p(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&s.push(t.assignTexture(a,"map",n.baseColorTexture,3001)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),s.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=T);const l=i.alphaMode||As;if(l===_s?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===bs&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==te&&(s.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new u(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==i.occlusionTexture&&o!==te&&(s.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==te&&(a.emissive=(new p).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==te&&s.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,3001)),Promise.all(s).then((function(){const n=new o(a);return i.name&&(n.name=i.name),Cs(n,i),t.associations.set(n,{materials:e}),i.extensions&&ws(r,n,i),n}))}createUniqueName(e){const t=pe.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[La.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Rs(n,e,t)}))}const o=[];for(let a=0,s=e.length;a<s;a++){const n=e[a],s=xs(n),l=r[s];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[La.KHR_DRACO_MESH_COMPRESSION]?i(n):Rs(new d,n,t),r[s]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const e=void 0===o[l].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new fe({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fe})),s.DefaultMaterial):this.getDependency("material",o[l].material);a.push(e)}var s;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let u=0,h=s.length;u<h;u++){const n=s[u],c=o[u];let h;const d=a[u];if(c.mode===hs.TRIANGLES||c.mode===hs.TRIANGLE_STRIP||c.mode===hs.TRIANGLE_FAN||void 0===c.mode)h=!0===i.isSkinnedMesh?new me(n,d):new G(n,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),c.mode===hs.TRIANGLE_STRIP?h.geometry=Zo(h.geometry,k):c.mode===hs.TRIANGLE_FAN&&(h.geometry=Zo(h.geometry,I));else if(c.mode===hs.LINES)h=new ve(n,d);else if(c.mode===hs.LINE_STRIP)h=new ge(n,d);else if(c.mode===hs.LINE_LOOP)h=new ye(n,d);else{if(c.mode!==hs.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new Ae(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&Es(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),Cs(h,i),c.extensions&&ws(r,h,c),t.assignFinalMaterial(h),l.push(h)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return i.extensions&&ws(r,l[0],i),l[0];const c=new be;i.extensions&&ws(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new v(_e.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new m(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Cs(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),r=e,i=[],o=[];for(let a=0,s=r.length;a<s;a++){const e=r[a];if(e){i.push(e);const t=new R;null!==n&&t.fromArray(n.array,16*a),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new we(i,o)}))}loadAnimation(e){const t=this.json.animations[e],n=t.name?t.name:"animation_"+e,r=[],i=[],o=[],a=[],s=[];for(let l=0,c=t.channels.length;l<c;l++){const e=t.channels[l],n=t.samplers[e.sampler],c=e.target,u=c.node,h=void 0!==t.parameters?t.parameters[n.input]:n.input,d=void 0!==t.parameters?t.parameters[n.output]:n.output;void 0!==c.node&&(r.push(this.getDependency("node",u)),i.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",d)),a.push(n),s.push(c))}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(e){const t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=[];for(let n=0,l=t.length;n<l;n++){const e=t[n],l=r[n],c=i[n],u=o[n],h=a[n];if(void 0===e)continue;let d;switch(e.updateMatrix(),gs[h.path]){case gs.weights:d=Pe;break;case gs.rotation:d=ke;break;default:d=Ie}const f=e.name?e.name:e.uuid,p=void 0!==u.interpolation?ys[u.interpolation]:Ce,m=[];gs[h.path]===gs.weights?e.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(f);let v=c.array;if(c.normalized){const e=Ss(v.constructor),t=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)t[n]=v[n]*e;v=t}for(let t=0,n=m.length;t<n;t++){const e=new d(m[t]+"."+gs[h.path],l.array,v,p);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(e){return new(this instanceof ke?us:ls)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(e)}}return new Ee(n,void 0,s)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],o=n.children||[];for(let s=0,l=o.length;s<l;s++)i.push(t.getDependency("node",o[s]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),a]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,Ts)}));for(let i=0,o=n.length;i<o;i++)t.add(n[i]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"",a=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&a.push(s),void 0!==i.camera&&a.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===i.isBone?new xe:t.length>1?new be:1===t.length?t[0]:new ie,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),Cs(a,i),i.extensions&&ws(n,a,i),void 0!==i.matrix){const e=new R;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new be;n.name&&(i.name=r.createUniqueName(n.name)),Cs(i,n),n.extensions&&ws(t,i,n);const o=n.nodes||[],s=[];for(let a=0,l=o.length;a<l;a++)s.push(r.getDependency("node",o[a]));return Promise.all(s).then((function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[n,i]of r.associations)(n instanceof f||n instanceof a)&&t.set(n,i);return e.traverse((e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}}function Rs(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=vs[a]||a.toLowerCase();t in e.attributes||i.push(o(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return Cs(e,t),function(e,t,n){const r=t.attributes,i=new Le;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new h(t[0],t[1],t[2]),new h(o[0],o[1],o[2])),e.normalized){const t=Ss(ds[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new h,t=new h;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=Ss(ds[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new H;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}class Os extends d{constructor(e,t,n,r){super();const i=[],o=[],a=[],s=new h,l=new R;l.makeRotationFromEuler(n),l.setPosition(t);const c=new R;function u(t,n,r){n.applyMatrix4(e.matrixWorld),n.applyMatrix4(c),r.transformDirection(e.matrixWorld),t.push(new Ds(n.clone(),r.clone()))}function d(e,t){const n=[],i=.5*Math.abs(r.dot(t));for(let r=0;r<e.length;r+=3){let o,a,s,l,c,u,h,d=0;switch(o=e[r+0].position.dot(t)-i>0,a=e[r+1].position.dot(t)-i>0,s=e[r+2].position.dot(t)-i>0,d=(o?1:0)+(a?1:0)+(s?1:0),d){case 0:n.push(e[r]),n.push(e[r+1]),n.push(e[r+2]);break;case 1:if(o&&(l=e[r+1],c=e[r+2],u=f(e[r],l,t,i),h=f(e[r],c,t,i)),a){l=e[r],c=e[r+2],u=f(e[r+1],l,t,i),h=f(e[r+1],c,t,i),n.push(u),n.push(c.clone()),n.push(l.clone()),n.push(c.clone()),n.push(u.clone()),n.push(h);break}s&&(l=e[r],c=e[r+1],u=f(e[r+2],l,t,i),h=f(e[r+2],c,t,i)),n.push(l.clone()),n.push(c.clone()),n.push(u),n.push(h),n.push(u.clone()),n.push(c.clone());break;case 2:o||(l=e[r].clone(),c=f(l,e[r+1],t,i),u=f(l,e[r+2],t,i),n.push(l),n.push(c),n.push(u)),a||(l=e[r+1].clone(),c=f(l,e[r+2],t,i),u=f(l,e[r],t,i),n.push(l),n.push(c),n.push(u)),s||(l=e[r+2].clone(),c=f(l,e[r],t,i),u=f(l,e[r+1],t,i),n.push(l),n.push(c),n.push(u))}}return n}function f(e,t,n,r){const i=e.position.dot(n)-r,o=i/(i-(t.position.dot(n)-r));return new Ds(new h(e.position.x+o*(t.position.x-e.position.x),e.position.y+o*(t.position.y-e.position.y),e.position.z+o*(t.position.z-e.position.z)),new h(e.normal.x+o*(t.normal.x-e.normal.x),e.normal.y+o*(t.normal.y-e.normal.y),e.normal.z+o*(t.normal.z-e.normal.z)))}c.copy(l).invert(),function(){let t,n=[];const c=new h,f=new h;if(!0===e.geometry.isGeometry)return void console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");const p=e.geometry,m=p.attributes.position,v=p.attributes.normal;if(null!==p.index){const e=p.index;for(t=0;t<e.count;t++)c.fromBufferAttribute(m,e.getX(t)),f.fromBufferAttribute(v,e.getX(t)),u(n,c,f)}else for(t=0;t<m.count;t++)c.fromBufferAttribute(m,t),f.fromBufferAttribute(v,t),u(n,c,f);for(n=d(n,s.set(1,0,0)),n=d(n,s.set(-1,0,0)),n=d(n,s.set(0,1,0)),n=d(n,s.set(0,-1,0)),n=d(n,s.set(0,0,1)),n=d(n,s.set(0,0,-1)),t=0;t<n.length;t++){const e=n[t];a.push(.5+e.position.x/r.x,.5+e.position.y/r.y),e.position.applyMatrix4(l),i.push(e.position.x,e.position.y,e.position.z),o.push(e.normal.x,e.normal.y,e.normal.z)}}(),this.setAttribute("position",new ze(i,3)),this.setAttribute("normal",new ze(o,3)),this.setAttribute("uv",new ze(a,2))}}class Ds{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class Fs extends He{constructor(e,t={}){const{bevelEnabled:n=!1,bevelSize:r=8,bevelThickness:i=10,font:o,height:a=50,size:s=100,lineHeight:l=1,letterSpacing:c=0,...u}=t;if(void 0===o)super();else{super(o.generateShapes(e,s,{lineHeight:l,letterSpacing:c}),{...u,bevelEnabled:n,bevelSize:r,bevelThickness:i,depth:a})}this.type="TextGeometry"}}const Us={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},Is={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "};var ks=Object.defineProperty,Ps=(e,t,n)=>(((e,t,n)=>{t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Ls extends Y{constructor(e){super(e)}load(e,t,n,r){const i=new Z(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{if("string"!=typeof e)throw new Error("unsupported data type");const n=JSON.parse(e),r=this.parse(n);t&&t(r)}),n,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new Gs(e)}}class Gs{constructor(e){Ps(this,"data"),this.data=e}generateShapes(e,t=100,n){const r=[],i={letterSpacing:0,lineHeight:1,...n},o=function(e,t,n,r){const i=Array.from(e),o=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,s=[];let l=0,c=0;for(let u=0;u<i.length;u++){const e=i[u];if("\n"===e)l=0,c-=a*r.lineHeight;else{const t=zs(e,o,l,c,n);t&&(l+=t.offsetX+r.letterSpacing,s.push(t.path))}}return s}(e,t,this.data,i);for(let a=0,s=o.length;a<s;a++)Array.prototype.push.apply(r,o[a].toShapes(!1));return r}}function zs(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const a=new Ne;let s,l,c,u,h,d,f,p;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=e.length;i<o;){switch(e[i++]){case"m":s=parseInt(e[i++])*t+n,l=parseInt(e[i++])*t+r,a.moveTo(s,l);break;case"l":s=parseInt(e[i++])*t+n,l=parseInt(e[i++])*t+r,a.lineTo(s,l);break;case"q":c=parseInt(e[i++])*t+n,u=parseInt(e[i++])*t+r,h=parseInt(e[i++])*t+n,d=parseInt(e[i++])*t+r,a.quadraticCurveTo(h,d,c,u);break;case"b":c=parseInt(e[i++])*t+n,u=parseInt(e[i++])*t+r,h=parseInt(e[i++])*t+n,d=parseInt(e[i++])*t+r,f=parseInt(e[i++])*t+n,p=parseInt(e[i++])*t+r,a.bezierCurveTo(h,d,f,p,c,u)}}}return{offsetX:o.ha*t,path:a}}Ps(Gs,"isFont"),Ps(Gs,"type");class Hs extends je{constructor(e){super(e),this.type=Je}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=function(e,t,n,r){const i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},i=function(e,t,n,r){const i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=We.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=We.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=We.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=We.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const a=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=n(e)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=n(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(s.gamma=parseFloat(c[1])),(c=l.match(i))&&(s.exposure=parseFloat(c[1])),(c=l.match(o))&&(s.valid|=2,s.format=c[1]),(c=l.match(a))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==a){const e=a.width,n=a.height,s=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const o=new Uint8Array(4*n*r);if(!o.length)return t(4,"unable to allocate buffer space");let a=0,s=0;const l=4*i,c=new Uint8Array(4),u=new Uint8Array(l);let h=r;for(;h>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=i)return t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&s<e.byteLength;){n=e[s++];const i=n>128;if(i&&(n-=128),0===n||r+n>l)return t(3,"bad scanline data");if(i){const t=e[s++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(s,s+n),r),r+=n,s+=n}const d=i;for(let e=0;e<d;e++){let t=0;o[a]=u[e+t],t+=i,o[a+1]=u[e+t],t+=i,o[a+2]=u[e+t],t+=i,o[a+3]=u[e+t],a+=4}h--}return o}(o.subarray(o.pos),e,n);if(-1!==s){let t,o,l;switch(this.type){case Ke:l=s.length/4;const e=new Float32Array(4*l);for(let t=0;t<l;t++)r(s,4*t,e,4*t);t=e,o=Ke;break;case Je:l=s.length/4;const n=new Uint16Array(4*l);for(let t=0;t<l;t++)i(s,4*t,n,4*t);t=n,o=Je;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:n,data:t,header:a.string,gamma:a.gamma,exposure:a.exposure,type:o}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case Ke:case Je:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=le,e.magFilter=le,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}const Ns="colorSpace"in new a;class js extends je{constructor(e){super(e),this.type=Je}parse(e){const t=65536,n=14,r=65537,i=16384,o=Math.pow(2.7182818,2.2);const a={l:0,c:0,lc:0};function l(e,t,n,r,i){for(;n<e;)t=t<<8|N(r,i),n+=8;n-=e,a.l=t>>n&(1<<e)-1,a.c=t,a.lc=n}const c=new Array(59);function u(e,t,n,i,o,s,u){for(var h=n,d=0,f=0;o<=s;o++){if(h.value-n.value>i)return!1;l(6,d,f,e,h);var p=a.l;if(d=a.c,f=a.lc,u[o]=p,63==p){if(h.value-n.value>i)throw"Something wrong with hufUnpackEncTable";l(8,d,f,e,h);var m=a.l+6;if(d=a.c,f=a.lc,o+m>s+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}else if(p>=59){if(o+(m=p-59+2)>s+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)c[t]=0;for(t=0;t<r;++t)c[e[t]]+=1;var n=0;for(t=58;t>0;--t){var i=n+c[t]>>1;c[t]=n,n=i}for(t=0;t<r;++t){var o=e[t];o>0&&(e[t]=o|c[o]++<<6)}}(u)}function h(e){return 63&e}function d(e){return e>>6}const f={c:0,lc:0};function p(e,t,n,r){e=e<<8|N(n,r),t+=8,f.c=e,f.lc=t}const m={c:0,lc:0};function v(e,t,n,r,i,o,a,s,l,c){if(e==t){r<8&&(p(n,r,i,a),n=f.c,r=f.lc);var u=n>>(r-=8);u=new Uint8Array([u])[0];if(l.value+u>c)return!1;for(var h=s[l.value-1];u-- >0;)s[l.value++]=h}else{if(!(l.value<c))return!1;s[l.value++]=e}m.c=n,m.lc=r}function g(e){return 65535&e}function y(e){var t=g(e);return t>32767?t-65536:t}const A={a:0,b:0};function b(e,t){var n=y(e),r=y(t),i=n+(1&r)+(r>>1),o=i,a=i-r;A.a=o,A.b=a}function _(e,t){var n=g(e),r=g(t),i=n-(r>>1)&65535,o=r+i-32768&65535;A.a=o,A.b=i}function w(e,t,n,r,i,o,a){for(var s,l=a<16384,c=n>i?i:n,u=1;u<=c;)u<<=1;for(s=u>>=1,u>>=1;u>=1;){for(var h,d,f,p,m=0,v=m+o*(i-s),g=o*u,y=o*s,w=r*u,C=r*s;m<=v;m+=y){for(var E=m,x=m+r*(n-s);E<=x;E+=C){var B=E+w,S=(T=E+g)+w;l?(b(e[E+t],e[T+t]),h=A.a,f=A.b,b(e[B+t],e[S+t]),d=A.a,p=A.b,b(h,d),e[E+t]=A.a,e[B+t]=A.b,b(f,p),e[T+t]=A.a,e[S+t]=A.b):(_(e[E+t],e[T+t]),h=A.a,f=A.b,_(e[B+t],e[S+t]),d=A.a,p=A.b,_(h,d),e[E+t]=A.a,e[B+t]=A.b,_(f,p),e[T+t]=A.a,e[S+t]=A.b)}if(n&u){var T=E+g;l?b(e[E+t],e[T+t]):_(e[E+t],e[T+t]),h=A.a,e[T+t]=A.b,e[E+t]=h}}if(i&u)for(E=m,x=m+r*(n-s);E<=x;E+=C){B=E+w;l?b(e[E+t],e[B+t]):_(e[E+t],e[B+t]),h=A.a,e[B+t]=A.b,e[E+t]=h}s=u,u>>=1}return m}function C(e,t,o,a,s,l){var c=o.value,g=H(t,o),y=H(t,o);o.value+=4;var A=H(t,o);if(o.value+=4,g<0||g>=r||y<0||y>=r)throw"Something wrong with HUF_ENCSIZE";var b=new Array(r),_=new Array(i);if(function(e){for(var t=0;t<i;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(_),u(e,0,o,a-(o.value-c),g,y,b),A>8*(a-(o.value-c)))throw"Something wrong with hufUncompress";!function(e,t,r,i){for(;t<=r;t++){var o=d(e[t]),a=h(e[t]);if(o>>a)throw"Invalid table entry";if(a>n){if((u=i[o>>a-n]).len)throw"Invalid table entry";if(u.lit++,u.p){var s=u.p;u.p=new Array(u.lit);for(var l=0;l<u.lit-1;++l)u.p[l]=s[l]}else u.p=new Array(1);u.p[u.lit-1]=t}else if(a){var c=0;for(l=1<<n-a;l>0;l--){var u;if((u=i[(o<<n-a)+c]).len||u.p)throw"Invalid table entry";u.len=a,u.lit=t,c++}}}}(b,g,y,_),function(e,t,r,i,o,a,s,l,c,u){for(var g=0,y=0,A=l,b=Math.trunc(o.value+(a+7)/8);o.value<b;)for(p(g,y,r,o),g=f.c,y=f.lc;y>=n;)if((E=t[g>>y-n&16383]).len)y-=E.len,v(E.lit,s,g,y,r,0,o,c,u,A),g=m.c,y=m.lc;else{if(!E.p)throw"hufDecode issues";var _;for(_=0;_<E.lit;_++){for(var w=h(e[E.p[_]]);y<w&&o.value<b;)p(g,y,r,o),g=f.c,y=f.lc;if(y>=w&&d(e[E.p[_]])==(g>>y-w&(1<<w)-1)){y-=w,v(E.p[_],s,g,y,r,0,o,c,u,A),g=m.c,y=m.lc;break}}if(_==E.lit)throw"hufDecode issues"}var C=8-a&7;for(g>>=C,y-=C;y>0;){var E;if(!(E=t[g<<n-y&16383]).len)throw"hufDecode issues";y-=E.len,v(E.lit,s,g,y,r,0,o,c,u,A),g=m.c,y=m.lc}}(b,_,e,0,o,A,y,l,s,{value:0})}function E(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function x(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,o=e.length-1;!(i>o||(t[i++]=e[n++],i>o));)t[i++]=e[r++]}function B(e){for(var t=e.byteLength,n=new Array,r=0,i=new DataView(e);t>0;){var o=i.getInt8(r++);if(o<0){t-=(s=-o)+1;for(var a=0;a<s;a++)n.push(i.getUint8(r++))}else{var s=o;t-=2;var l=i.getUint8(r++);for(a=0;a<s+1;a++)n.push(l)}}return n}function S(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function T(e,t){t[0]=V(e[0]),t[1]=V(e[1]),t[2]=V(e[5]),t[3]=V(e[6]),t[4]=V(e[14]),t[5]=V(e[15]),t[6]=V(e[27]),t[7]=V(e[28]),t[8]=V(e[2]),t[9]=V(e[4]),t[10]=V(e[7]),t[11]=V(e[13]),t[12]=V(e[16]),t[13]=V(e[26]),t[14]=V(e[29]),t[15]=V(e[42]),t[16]=V(e[3]),t[17]=V(e[8]),t[18]=V(e[12]),t[19]=V(e[17]),t[20]=V(e[25]),t[21]=V(e[30]),t[22]=V(e[41]),t[23]=V(e[43]),t[24]=V(e[9]),t[25]=V(e[11]),t[26]=V(e[18]),t[27]=V(e[24]),t[28]=V(e[31]),t[29]=V(e[40]),t[30]=V(e[44]),t[31]=V(e[53]),t[32]=V(e[10]),t[33]=V(e[19]),t[34]=V(e[23]),t[35]=V(e[32]),t[36]=V(e[39]),t[37]=V(e[45]),t[38]=V(e[52]),t[39]=V(e[54]),t[40]=V(e[20]),t[41]=V(e[22]),t[42]=V(e[33]),t[43]=V(e[38]),t[44]=V(e[46]),t[45]=V(e[51]),t[46]=V(e[55]),t[47]=V(e[60]),t[48]=V(e[21]),t[49]=V(e[34]),t[50]=V(e[37]),t[51]=V(e[47]),t[52]=V(e[50]),t[53]=V(e[56]),t[54]=V(e[59]),t[55]=V(e[61]),t[56]=V(e[35]),t[57]=V(e[36]),t[58]=V(e[48]),t[59]=V(e[49]),t[60]=V(e[57]),t[61]=V(e[58]),t[62]=V(e[62]),t[63]=V(e[63])}function M(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625);for(var l=new Array(4),c=new Array(4),u=new Array(4),h=new Array(4),d=0;d<8;++d){var f=8*d;l[0]=r*e[f+2],l[1]=a*e[f+2],l[2]=r*e[f+6],l[3]=a*e[f+6],c[0]=n*e[f+1]+i*e[f+3]+o*e[f+5]+s*e[f+7],c[1]=i*e[f+1]-s*e[f+3]-n*e[f+5]-o*e[f+7],c[2]=o*e[f+1]-n*e[f+3]+s*e[f+5]+i*e[f+7],c[3]=s*e[f+1]-o*e[f+3]+i*e[f+5]-n*e[f+7],u[0]=t*(e[f+0]+e[f+4]),u[3]=t*(e[f+0]-e[f+4]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],h[0]=u[0]+u[1],h[1]=u[3]+u[2],h[2]=u[3]-u[2],h[3]=u[0]-u[1],e[f+0]=h[0]+c[0],e[f+1]=h[1]+c[1],e[f+2]=h[2]+c[2],e[f+3]=h[3]+c[3],e[f+4]=h[3]-c[3],e[f+5]=h[2]-c[2],e[f+6]=h[1]-c[1],e[f+7]=h[0]-c[0]}for(var p=0;p<8;++p)l[0]=r*e[16+p],l[1]=a*e[16+p],l[2]=r*e[48+p],l[3]=a*e[48+p],c[0]=n*e[8+p]+i*e[24+p]+o*e[40+p]+s*e[56+p],c[1]=i*e[8+p]-s*e[24+p]-n*e[40+p]-o*e[56+p],c[2]=o*e[8+p]-n*e[24+p]+s*e[40+p]+i*e[56+p],c[3]=s*e[8+p]-o*e[24+p]+i*e[40+p]-n*e[56+p],u[0]=t*(e[p]+e[32+p]),u[3]=t*(e[p]-e[32+p]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],h[0]=u[0]+u[1],h[1]=u[3]+u[2],h[2]=u[3]-u[2],h[3]=u[0]-u[1],e[0+p]=h[0]+c[0],e[8+p]=h[1]+c[1],e[16+p]=h[2]+c[2],e[24+p]=h[3]+c[3],e[32+p]=h[3]-c[3],e[40+p]=h[2]-c[2],e[48+p]=h[1]-c[1],e[56+p]=h[0]-c[0]}function R(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function O(e,t,n){for(var r=0;r<64;++r)t[n+r]=We.toHalfFloat(D(e[r]))}function D(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function F(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function U(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(B(t)),r=new Uint8Array(n.length);return E(n),x(n,r),new DataView(r.buffer)}function I(e){var t=Ca(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return E(t),x(t,n),new DataView(n.buffer)}function k(e){for(var n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192),a=0,s=new Array(e.channels),l=0;l<e.channels;l++)s[l]={},s[l].start=a,s[l].end=s[l].start,s[l].nx=e.width,s[l].ny=e.lines,s[l].size=e.type,a+=s[l].nx*s[l].ny*s[l].size;var c=X(n,r),u=X(n,r);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=u)for(l=0;l<u-c+1;l++)o[l+c]=j(n,r);var h=new Uint16Array(t),d=function(e,n){for(var r=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(n[r++]=i);for(var o=r-1;r<t;)n[r++]=0;return o}(o,h),f=H(n,r);C(e.array,n,r,f,i,a);for(l=0;l<e.channels;++l)for(var p=s[l],m=0;m<s[l].size;++m)w(i,p.start+m,p.nx,p.size,p.ny,p.nx*p.size,d);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(h,i,a);for(var v=0,g=new Uint8Array(i.buffer.byteLength),y=0;y<e.lines;y++)for(var A=0;A<e.channels;A++){var b=(p=s[A]).nx*p.size,_=new Uint8Array(i.buffer,2*p.end,2*b);g.set(_,v),v+=2*b,p.end+=b}return new DataView(g.buffer)}function P(e){var t=Ca(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n);let i=0,o=0;const a=new Array(4);for(let s=0;s<e.lines;s++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:a[0]=i,a[1]=a[0]+e.width,i=a[1]+e.width;for(let i=0;i<e.width;++i){n+=t[a[0]++]<<8|t[a[1]++],r[o]=n,o++}break;case 2:a[0]=i,a[1]=a[0]+e.width,a[2]=a[1]+e.width,i=a[2]+e.width;for(let i=0;i<e.width;++i){n+=t[a[0]++]<<24|t[a[1]++]<<16|t[a[2]++]<<8,r[o]=n,o++}}}return new DataView(r.buffer)}function L(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:J(t,n),unknownUncompressedSize:J(t,n),unknownCompressedSize:J(t,n),acCompressedSize:J(t,n),dcCompressedSize:J(t,n),rleCompressedSize:J(t,n),rleUncompressedSize:J(t,n),rleRawSize:J(t,n),totalAcUncompressedCount:J(t,n),totalDcUncompressedCount:J(t,n),acCompression:J(t,n)};if(i.version<2)throw"EXRLoader.parse: "+ee.compression+" version "+i.version+" is unsupported";for(var o=new Array,a=X(t,n)-2;a>0;){var s=G(t.buffer,n),l=j(t,n),c=l>>2&3,u=new Int8Array([(l>>4)-1])[0],h=j(t,n);o.push({name:s,index:u,type:h,compression:c}),a-=s.length+3}for(var d=ee.channels,f=new Array(e.channels),p=0;p<e.channels;++p){var m=f[p]={},v=d[p];m.name=v.name,m.compression=0,m.decoded=!1,m.type=v.pixelType,m.pLinear=v.pLinear,m.width=e.width,m.height=e.lines}for(var g={idx:new Array(3)},y=0;y<e.channels;++y)for(m=f[y],p=0;p<o.length;++p){var A=o[p];m.name==A.name&&(m.compression=A.compression,A.index>=0&&(g.idx[A.index]=y),m.offset=y)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var b=new Uint16Array(i.totalAcUncompressedCount);C(e.array,t,n,i.acCompressedSize,b,i.totalAcUncompressedCount);break;case 1:var _=Ca(e.array.slice(n.value,n.value+i.totalAcUncompressedCount));b=new Uint16Array(_.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var w={array:e.array,offset:n,size:i.dcCompressedSize},E=new Uint16Array(I(w).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var x=B((_=Ca(e.array.slice(n.value,n.value+i.rleCompressedSize))).buffer);n.value+=i.rleCompressedSize}var D=0,F=new Array(f.length);for(p=0;p<F.length;++p)F[p]=new Array;for(var U=0;U<e.lines;++U)for(var k=0;k<f.length;++k)F[k].push(D),D+=f[k].width*e.type*2;!function(e,t,n,r,i,o){var a=new DataView(o.buffer),s=n[e.idx[0]].width,l=n[e.idx[0]].height,c=Math.floor(s/8),u=Math.ceil(s/8),h=Math.ceil(l/8),d=s-8*(u-1),f=l-8*(h-1),p={value:0},m=new Array(3),v=new Array(3),g=new Array(3),y=new Array(3),A=new Array(3);for(let S=0;S<3;++S)A[S]=t[e.idx[S]],m[S]=S<1?0:m[S-1]+u*h,v[S]=new Float32Array(64),g[S]=new Uint16Array(64),y[S]=new Uint16Array(64*u);for(let D=0;D<h;++D){var b=8;D==h-1&&(b=f);var _=8;for(let e=0;e<u;++e){e==u-1&&(_=d);for(let e=0;e<3;++e)g[e].fill(0),g[e][0]=i[m[e]++],S(p,r,g[e]),T(g[e],v[e]),M(v[e]);R(v);for(let t=0;t<3;++t)O(v[t],y[t],64*e)}let t=0;for(let r=0;r<3;++r){const i=n[e.idx[r]].type;for(let e=8*D;e<8*D+b;++e){t=A[r][e];for(let n=0;n<c;++n){const o=64*n+8*(7&e);a.setUint16(t+0*i,y[r][o+0],!0),a.setUint16(t+2*i,y[r][o+1],!0),a.setUint16(t+4*i,y[r][o+2],!0),a.setUint16(t+6*i,y[r][o+3],!0),a.setUint16(t+8*i,y[r][o+4],!0),a.setUint16(t+10*i,y[r][o+5],!0),a.setUint16(t+12*i,y[r][o+6],!0),a.setUint16(t+14*i,y[r][o+7],!0),t+=16*i}}if(c!=u)for(let e=8*D;e<8*D+b;++e){const t=A[r][e]+8*c*2*i,n=64*c+8*(7&e);for(let e=0;e<_;++e)a.setUint16(t+2*e*i,y[r][n+e],!0)}}}for(var w=new Uint16Array(s),C=(a=new DataView(o.buffer),0);C<3;++C){n[e.idx[C]].decoded=!0;var E=n[e.idx[C]].type;if(2==n[C].type)for(var x=0;x<l;++x){const e=A[C][x];for(var B=0;B<s;++B)w[B]=a.getUint16(e+2*B*E,!0);for(B=0;B<s;++B)a.setFloat32(e+2*B*E,V(w[B]),!0)}}}(g,F,f,b,E,r);for(p=0;p<f.length;++p){if(!(m=f[p]).decoded){if(2!==m.compression)throw"EXRLoader.parse: unsupported channel compression";var P=0,L=0;for(U=0;U<e.lines;++U){for(var z=F[p][P],H=0;H<m.width;++H){for(var N=0;N<2*m.type;++N)r[z++]=x[L+N*m.width*m.height];L++}P++}}}return new DataView(r.buffer)}function G(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function z(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function H(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function N(e,t){var n=e[t.value];return t.value=t.value+1,n}function j(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const J=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function K(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function W(e,t){return We.toHalfFloat(K(e,t))}function V(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function X(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function Y(e,t){return V(X(e,t))}function Q(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){for(var i=n.value,o=[];n.value<i+r-1;){var a=G(t,n),s=z(e,n),l=j(e,n);n.value+=3;var c=z(e,n),u=z(e,n);o.push({name:a,pixelType:s,pLinear:l,xSampling:c,ySampling:u})}return n.value+=1,o}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:K(e,t),redY:K(e,t),greenX:K(e,t),greenY:K(e,t),blueX:K(e,t),blueY:K(e,t),whiteX:K(e,t),whiteY:K(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][j(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:H(e,t),yMin:H(e,t),xMax:H(e,t),yMax:H(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][j(e,t)]}(e,n):"float"===r?K(e,n):"v2f"===r?function(e,t){return[K(e,t),K(e,t)]}(e,n):"v3f"===r?function(e,t){return[K(e,t),K(e,t),K(e,t)]}(e,n):"int"===r?z(e,n):"rational"===r?function(e,t){return[z(e,t),H(e,t)]}(e,n):"timecode"===r?function(e,t){return[H(e,t),H(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const Z=new DataView(e),q=new Uint8Array(e),$={value:0},ee=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var o=!0;o;){var a=G(t,n);if(0==a)o=!1;else{var s=G(t,n),l=Q(e,t,n,s,H(e,n));void 0===l?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${s}'.`):r[a]=l}}if(0!=i)throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(Z,e,$),te=function(e,t,n,r,i){const o={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ns?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=F;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=U;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=I;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=I;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=k;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=P;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=L;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=L;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(i){case Ke:o.getter=Y,o.inputSize=2;break;case Je:o.getter=X,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(i){case Ke:o.getter=K,o.inputSize=4;break;case Je:o.getter=W,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var a=0;a<o.blockCount;a++)J(t,r);o.outputChannels=3==o.channels?4:o.channels;const l=o.width*o.height*o.outputChannels;switch(i){case Ke:o.byteArray=new Float32Array(l),o.channels<o.outputChannels&&o.byteArray.fill(1,0,l);break;case Je:o.byteArray=new Uint16Array(l),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=s:o.format=Ve,Ns?o.colorSpace="srgb-linear":o.encoding=3e3,o}(ee,Z,q,$,this.type),ne={value:0},re={R:0,G:1,B:2,A:3,Y:0};for(let s=0;s<te.height/te.scanlineBlockSize;s++){const e=H(Z,$);te.size=H(Z,$),te.lines=e+te.scanlineBlockSize>te.height?te.height-e:te.scanlineBlockSize;const t=te.size<te.lines*te.bytesPerLine?te.uncompress(te):F(te);$.value+=te.size;for(let n=0;n<te.scanlineBlockSize;n++){const e=n+s*te.scanlineBlockSize;if(e>=te.height)break;for(let r=0;r<te.channels;r++){const i=re[ee.channels[r].name];for(let o=0;o<te.width;o++){ne.value=(n*(te.channels*te.width)+r*te.width+o)*te.inputSize;const a=(te.height-1-e)*(te.width*te.outputChannels)+o*te.outputChannels+i;te.byteArray[a]=te.getter(t,ne)}}}}return{header:ee,width:te.width,height:te.height,data:te.byteArray,format:te.format,[Ns?"colorSpace":"encoding"]:te[Ns?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){Ns?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=le,e.magFilter=le,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,r)}}const Js=new WeakMap;class Ks extends Y{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new Z(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const s in t.attributeTypes){const e=t.attributeTypes[s];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[s]=e.name)}const n=JSON.stringify(t);if(Js.has(e)){const t=Js.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),Js.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new d;e.index&&t.setIndex(new P(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new P(o,a))}return t}_loadLibrary(e,t){const n=new Z(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=Ws.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ws(){let e,t;function n(e,t,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);const h=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:h,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,o=i.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeBufferToMesh(r,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in o){const r=self[a[h]];let l,c;if(i.useUniqueIDs)c=o[h],l=t.GetAttributeByUniqueId(s,c);else{if(c=t.GetAttributeId(s,e[o[h]]),-1===c)continue;l=t.GetAttribute(s,c)}u.attributes.push(n(e,t,s,h,r,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=n.num_faces(),i=3*r,o=4*i,a=e._malloc(o);t.GetTrianglesUInt32Array(n,o,a);const s=new Uint32Array(e.HEAPF32.buffer,a,i).slice();return e._free(a),{array:s,itemSize:1}}(e,t,s));return e.destroy(s),u}(t,a,s,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(s),t.destroy(a)}}))}}}let Vs;const Xs=()=>{if(Vs)return Vs;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function o(e,t,r,i,o,a){const s=n.exports.sbrk,l=r+3&-4,c=s(l*i),u=s(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,u);const d=e(c,r,i,u,o.length);if(0===d&&a&&a(c,l,i),t.set(h.subarray(c,c+r*i)),s(c-s(0)),0!==d)throw new Error(`Malformed buffer data: ${d}`)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Vs={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,s){o(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[s]])},decodeIndexBuffer(e,t,r,i){o(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){o(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,l,c){o(n.exports[s[l]],e,t,r,i,n.exports[a[c]])}},Vs};function Ys(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function Qs(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),c&&(c=n("<"+a+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(h){h&&h.noLog||console.error(h),i(h)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(l){n(l)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}}))}var Zs=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return Zs=function(){return e},e},qs=0,$s=0,el=!1,tl=Object.create(null),nl=Object.create(null),rl=Object.create(null);function il(e){if(!(e&&"function"==typeof e.init||el))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!Zs())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++qs,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=al(i,"registerModule",l.workerModuleData);var n=function(){s=null,nl[i].delete(n)};(nl[i]||(nl[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return al(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(el=!0,e=il({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+ol(e)+"\n)}"}),el=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:ol(n),getTransferables:r&&ol(r)},l}function ol(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function al(e,t,n){return new Promise((function(r,i){var o=++$s;rl[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=tl[e];if(!t){var n=ol(Qs);(t=tl[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=rl[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete rl[n],r(t)}}return t}(e).postMessage({messageId:o,action:t,data:n})}))}function sl(){var e=function(e){function t(e,t,n,r,i,o,a,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*a,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*s}function n(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function r(e,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(e,(function(e,n,a,s,l,c,u,h,d){switch(e){case"L":r(n,a,s,l);break;case"Q":for(var f=n,p=a,m=1;m<i;m++)A=a,b=u,_=l,E=void 0,E=1-(w=m/(i-1)),(C=o).x=E*E*n+2*E*w*c+w*w*s,C.y=E*E*A+2*E*w*b+w*w*_,r(f,p,o.x,o.y),f=o.x,p=o.y;break;case"C":for(var v=n,g=a,y=1;y<i;y++)t(n,a,c,u,h,d,s,l,y/(i-1),o),r(v,g,o.x,o.y),v=o.x,g=o.y}var A,b,_,w,C,E}))}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",a=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,r=a.get(n);if(!r){let e=function(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t},t=function(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r},s=function(r,o,a,s){if(!l[r]){var c={},u={},h=n.createProgram();n.attachShader(h,t(o,n.VERTEX_SHADER)),n.attachShader(h,t(a,n.FRAGMENT_SHADER)),n.linkProgram(h),l[r]={program:h,transaction:function(t){n.useProgram(h),t({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=u[t]||(u[t]=n.getUniformLocation(h,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(t,r,o,a,s){var l=c[t];l||(l=c[t]={buf:n.createBuffer(),loc:n.getAttribLocation(h,t),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,r,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,a):e("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,a),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,o),l.data=s)}})}}}l[r].transaction(s)},d=function(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}},f=function(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}},p=function(){o={},l={},c={},u=-1,h.length=0};var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},l={},c={},u=-1,h=[];n.canvas.addEventListener("webglcontextlost",(function(e){p(),e.preventDefault()}),!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:e,withProgram:s,withTexture:d,withTextureFramebuffer:f,handleContextLoss:p})}t(r)}function c(e,t,n,r,a,s,c,u){void 0===c&&(c=15),void 0===u&&(u=null),l(e,(function(e){var l=e.gl,h=e.withProgram;(0,e.withTexture)("copy",(function(e,d){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,s,0,l.RGBA,l.UNSIGNED_BYTE,t),h("copy",i,o,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),l.bindFramebuffer(l.FRAMEBUFFER,u||null),l.disable(l.BLEND),l.colorMask(8&c,4&c,2&c,1&c),l.viewport(n,r,a,s),l.scissor(n,r,a,s),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;l(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,c(a,s,0,0,r,i)}))}});function h(e,t,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var f=v(i[0]+l*(h+.5)/e,i[1]+c*(d+.5)/t),m=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[d*e+h]=m}return s;function v(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=p(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function d(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),f(e,t,n,r,i,o,a,null,s,l,c)}function f(e,t,n,r,i,o,a,s,l,u,d){void 0===o&&(o=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0);for(var f=h(e,t,n,r,i,o),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+d]=f[m];c(a,p,l,u,e,t,1<<3-d,s)}function p(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,u=e-(n+c*a),h=t-(r+c*s);return u*u+h*h}var m=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:f}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",g="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",y="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),b=null,_=!1,w={},C=new WeakMap;function E(e){if(!_&&!T(e))throw new Error("WebGL generation not supported")}function x(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=b)){var s="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=b=s.getContext("webgl",{depth:!1})}E(a);var c=new Uint8Array(e*t*4);l(a,(function(a){var s=a.gl,l=a.withTexture,u=a.withTextureFramebuffer;l("readable",(function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,l,(function(a){S(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<c.length;h+=4)u[d++]=c[h];return u}function B(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),S(e,t,n,r,i,o,a,null,s,l,c)}function S(e,t,n,o,a,s,c,u,h,d,f){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),E(c);var p=[];r(n,(function(e,t,n,r){p.push(e,t,n,r)})),p=new Float32Array(p),l(c,(function(n){var r=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,b=n.withTexture,_=n.withTextureFramebuffer,w=n.handleContextLoss;if(b("rawDistances",(function(n,b){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),m("main",v,g,(function(i){var u=i.setAttribute,h=i.setUniform,d=!l&&c("ANGLE_instanced_arrays"),f=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,A),u("aLineSegment",4,r.DYNAMIC_DRAW,1,p),h.apply(void 0,["4f","uGlyphBounds"].concat(o)),h("1f","uMaxDistance",a),h("1f","uExponent",s),_(n,b,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:f.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,p.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,p.length/4)}))})),m("post",i,y,(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,A),n.setUniform("1i","tex",b),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===f,1===f,2===f,3===f),r.viewport(h,d,e,t),r.scissor(h,d,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw w(),new Error("webgl context lost")}))}function T(e){var t=e&&e!==b?e.canvas||e:w,n=C.get(t);if(void 0===n){_=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=x(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})))||(r="bad trial run results",console.info(i,o))}catch(a){n=!1,r=a.message}r&&console.warn("WebGL SDF generation not supported:",r),_=!1,C.set(t,n)}return n}var M=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:B,generateIntoFramebuffer:S,isSupported:T});return e.forEachPathCommand=n,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return x.apply(M,arguments)}catch(em){return console.info("WebGL SDF generation failed, falling back to JS",em),h.apply(m,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return B.apply(M,arguments)}catch(em){return console.info("WebGL SDF generation failed, falling back to JS",em),d.apply(m,arguments)}},e.javascript=m,e.pathToLineSegments=r,e.webgl=M,e.webglUtils=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const ll=/\bvoid\s+main\s*\(\s*\)\s*{/g;function cl(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=qe[t];return n?cl(n):e}))}const ul=[];for(let tm=0;tm<256;tm++)ul[tm]=(tm<16?"0":"")+tm.toString(16);const hl=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},dl=Date.now(),fl=new WeakMap,pl=new Map;let ml=1e10;function vl(e,t){const n=function(e){const t=JSON.stringify(e,yl);let n=bl.get(t);null==n&&bl.set(t,n=++Al);return n}(t);let r=fl.get(e);if(r||fl.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(r,o){e.onBeforeCompile.call(this,r,o);const a=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=pl[a];if(!s){const e=function(e,{vertexShader:t,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:d,customRewriter:f,timeUniform:p}=r;o=o||"",a=a||"",s=s||"",c=c||"",u=u||"",h=h||"",(l||f)&&(t=cl(t));(d||f)&&(n=cl(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(f){let e=f({vertexShader:t,fragmentShader:n});t=e.vertexShader,n=e.fragmentShader}if(d){let e=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),h=`${d}\n${e.join("\n")}\n${h}`}if(p){const e=`\nuniform float ${p};\n`;o=e+o,c=e+c}l&&(o=`${o}\nvoid troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${l}\n}\n`,a=`\ntroika_position_${i} = vec3(position);\ntroika_normal_${i} = vec3(normal);\ntroika_uv_${i} = vec2(uv);\ntroikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});\n${a}\n`,t=(t=`vec3 troika_position_${i};\nvec3 troika_normal_${i};\nvec2 troika_uv_${i};\n${t}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:`troika_${t}_${i}`)),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${i}`)));return t=gl(t,i,o,a,s),n=gl(n,i,c,u,h),{vertexShader:t,fragmentShader:n}}(this,r,t,n);s=pl[a]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,hl(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-dl}}),this[i]&&this[i](r)},a=function(){return s(t.chained?e:e.clone())},s=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:ml++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ul[255&e]+ul[e>>8&255]+ul[e>>16&255]+ul[e>>24&255]+"-"+ul[255&t]+ul[t>>8&255]+"-"+ul[t>>16&15|64]+ul[t>>24&255]+"-"+ul[63&n|128]+ul[n>>8&255]+"-"+ul[n>>16&255]+ul[n>>24&255]+ul[255&r]+ul[r>>8&255]+ul[r>>16&255]+ul[r>>24&255]).toUpperCase()}(),i.uniforms=hl({},r.uniforms,t.uniforms),i.defines=hl({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=hl({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(hl(this.extensions,t.extensions),hl(this.defines,t.defines),hl(this.uniforms,Xe.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=vl(e.isDerivedMaterial?e.getDepthMaterial():new Ye({depthPacking:Qe}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=vl(e.isDerivedMaterial?e.getDistanceMaterial():new Ze,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=a,new a}function gl(e,t,n,r,i){return(r||i||n)&&(e=e.replace(ll,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function yl(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let Al=0;const bl=new Map;const _l=()=>(self.performance||Date).now(),wl=sl();let Cl;const El=[];let xl=0;function Bl(){const e=_l();for(;El.length&&_l()-e<5;)El.shift()();xl=El.length?setTimeout(Bl,0):0}const Sl=(...e)=>new Promise(((t,n)=>{El.push((()=>{const r=_l();try{wl.webgl.generateIntoCanvas(...e),t({timing:_l()-r})}catch(i){n(i)}})),xl||(xl=setTimeout(Bl,0))})),Tl=4,Ml=2e3,Rl={};let Ol=0;function Dl(e,t,n,r,i,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+Ol++%Tl;let h=Rl[u];return h||(h=Rl[u]={workerModule:il({name:u,workerId:u,dependencies:[sl,_l],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,o).then((({textureData:n,timing:r})=>{const i=_l(),o=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)o[4*e+c]=n[e];return wl.webglUtils.renderImageData(a,o,s,l,e,t,1<<3-c),r+=_l()-i,0==--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){nl[e]&&nl[e].forEach((function(e){e()})),tl[e]&&(tl[e].terminate(),delete tl[e])}(u)}),Ml)),{timing:r}}))}const Fl=wl.webglUtils.resizeWebGLCanvasWithoutClearing;
/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/const Ul=il({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},c=0;c<o;c++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<a.length;c++){var f=a[c];l[f]&&(s[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var c=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var c=a.readUshort(e,n);n+=2;var u=a.readUshort(e,n);n+=2;var h=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+h,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+c,r);a.push(u)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,c=0;c<s;c++){var u=i.readUshort(e,n);n+=2;var h=r(e,l,o+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var c=r.readUshort(e,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+c)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+a);var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=f}if(u.ROS){n=u.FDArray;var p=[];for(n=t.CFF.readIndex(e,n,p),u.FDArray=[],s=0;s<p.length-1;s++){var m=t.CFF.readDict(e,n+p[s],n+p[s+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=p[p.length-1],n=u.FDSelect,u.FDSelect=[];var v=e[n];if(n++,3!=v)throw v;var g=i.readUshort(e,n);for(n+=2,s=0;s<g+1;s++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var c=0;for(1==a?(c=e[n],n++):(c=i.readUshort(e,n),n+=2),s=0;s<=c;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-a-108,s=2),255==o&&(c=i.readInt(e,n+1)/65535,s=5),r.val=null!=c?c:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=o.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=o.readInt(e,n+1)/65535,c=5),a.push(null!=h?h:"o"+u),n+=c}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==s&&(h=i.readShort(e,n+1),c=3),29==s&&(h=i.readInt(e,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=i.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var f=e[n+c];c++;var p=f>>4,m=15&f;if(15!=p&&d.push(p),15!=m&&d.push(m),15==m)break}for(var v="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)v+=g[d[y]];h=parseFloat(v)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=c}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var c=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+c+"e"+u,f=s.indexOf(h);if(-1==f){var p;f=o.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?p=t.cmap.parse0(e,h):4==m?p=t.cmap.parse4(e,h):6==m?p=t.cmap.parse6(e,h):12==m?p=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=f}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),c=r.readUint(e,s+4),u=r.readUint(e,s+8);i.groups.push([l,c,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<c;s++){var u=i[o];if(o++,a.flags.push(u),0!=(8&u)){var h=i[o];o++;for(var d=0;d<h;d++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<c;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?i[o]:-i[o]),o++):p?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<c;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?i[o]:-i[o]),o++):p?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,v=0;for(s=0;s<c;s++)m+=a.xs[s],v+=a.ys[s],a.xs[s]=m,a.ys[s]=v}else{var g;a.parts=[];do{g=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&g){var A=r.readShort(i,o);o+=2;var b=r.readShort(i,o);o+=2}else A=r.readInt8(i,o),o++,b=r.readInt8(i,o),o++;2&g?(y.m.tx=A,y.m.ty=b):(y.p1=A,y.p2=b),8&g?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&g?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&g&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&g);if(256&g){var _=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<_;s++)a.instr.push(i[o]),o++}}return a},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var c=o.readUshort(e,r);r+=2;var u=t._lctf.numOfOnes(c);0!=c&&(s.pos=t.GPOS.readValueRecord(e,r,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(e,r),r+=2;var h=o.readUshort(e,r);r+=2,u=t._lctf.numOfOnes(c);var d=t._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(e,r);r+=2;for(var p=0;p<f;p++){var m=a+o.readUshort(e,r);r+=2;var v=o.readUshort(e,m);m+=2;for(var g=[],y=0;y<v;y++){var A=o.readUshort(e,m);m+=2,0!=c&&(x=t.GPOS.readValueRecord(e,m,c),m+=2*u),0!=h&&(B=t.GPOS.readValueRecord(e,m,h),m+=2*d),g.push({gid2:A,val1:x,val2:B})}s.pairsets.push(g)}}if(2==s.fmt){var b=o.readUshort(e,r);r+=2;var _=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);r+=2;var C=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+b),s.classDef2=t._lctf.readClassDef(e,a+_),s.matrix=[],p=0;p<w;p++){var E=[];for(y=0;y<C;y++){var x=null,B=null;0!=c&&(x=t.GPOS.readValueRecord(e,r,c),r+=2*u),0!=h&&(B=t.GPOS.readValueRecord(e,r,h),r+=2*d),E.push({val1:x,val2:B})}s.matrix.push(E)}}}else{if(9==n&&1==s.fmt){var S=o.readUshort(e,r);r+=2;var T=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=S;else if(i.ltype!=S)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+T)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var c=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,c),r+=2*s.newg.length}}else if(4==n){s.vals=[],c=o.readUshort(e,r),r+=2;for(var u=0;u<c;u++){var h=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+h))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var d=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+d),s.scset=[];var f=o.readUshort(e,r);for(r+=2,u=0;u<f;u++){var p=o.readUshort(e,r);r+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,a+p))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(e,r),r+=2;for(var m=[],v=0;v<c;v++)m.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*v)));r+=2*c,0==u&&(s.backCvg=m),1==u&&(s.inptCvg=m),2==u&&(s.ahedCvg=m)}c=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,c)}}else{if(7==n&&1==s.fmt){var g=o.readUshort(e,r);r+=2;var y=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=g;else if(i.ltype!=g)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+y)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var c=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)a.push(o.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)a.push(o.readUint(e,n+(c<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<a;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var v=i.readUshort(e,n);n+=2;var g,y=l[p],A=c+12*a+v;if(0==h)g=i.readUnicode(e,A,m/2);else if(3==h&&0==d)g=i.readUnicode(e,A,m/2);else if(0==d)g=i.readASCII(e,A,m);else if(1==d)g=i.readUnicode(e,A,m/2);else if(3==d)g=i.readUnicode(e,A,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=i.readASCII(e,A,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+f.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==y?y:p]=g,o[b]._lang=f}for(var _ in o)if(null!=o[_].postScriptName&&1033==o[_]._lang)return o[_];for(var _ in o)if(null!=o[_].postScriptName&&0==o[_]._lang)return o[_];for(var _ in o)if(null!=o[_].postScriptName&&3084==o[_]._lang)return o[_];for(var _ in o)if(null!=o[_].postScriptName)return o[_];for(var _ in o){s=_;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,c=1&e.flags[a],u=1&e.flags[s],h=1&e.flags[l],d=e.xs[a],f=e.ys[a];if(a==i)if(c){if(!u){t.U.P.moveTo(n,d,f);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+f)/2);c?u&&t.U.P.lineTo(n,d,f):h?t.U.P.qcurveTo(n,d,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,f,(d+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];r.crds.push(c*s.a+u*s.b+s.tx),r.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=!1;if(e.GPOS)for(var o=e.GPOS,a=o.lookupList,s=o.featureList,l=[],c=0;c<s.length;c++){var u=s[c];if("kern"==u.tag){i=!0;for(var h=0;h<u.tab.length;h++)if(!l[u.tab[h]]){l[u.tab[h]]=!0;for(var d=a[u.tab[h]],f=0;f<d.tabs.length;f++)if(null!=d.tabs[f]){var p,m=d.tabs[f];if(!m.coverage||-1!=(p=t._lctf.coverageIndex(m.coverage,n)))if(1==d.ltype);else if(2==d.ltype){var v=null;if(1==m.fmt){var g=m.pairsets[p];for(c=0;c<g.length;c++)g[c].gid2==r&&(v=g[c])}else if(2==m.fmt){var y=t.U._getGlyphClass(n,m.classDef1),A=t.U._getGlyphClass(r,m.classDef2);v=m.matrix[y][A]}if(v){var b=0;return v.val1&&v.val1[2]&&(b+=v.val1[2]),v.val2&&v.val2[0]&&(b+=v.val2[0]),b}}}}}}if(e.kern&&!i){var _=e.kern.glyph1.indexOf(n);if(-1!=_){var w=e.kern.rval[_].glyph2.indexOf(r);if(-1!=w)return e.kern.rval[_].vals[w]}}return 0},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var f=!0,p=0,m=0;m<d;m++){for(;-1==e[n+p+(1+m)];)p++;h.chain[m]!=e[n+p+(1+m)]&&(f=!1)}if(f){for(e[n]=h.nglyph,m=0;m<d+p;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var v=t._lctf.getInterval(l.cDef,e[n]),g=l.cDef[v+2],y=l.scset[g],A=0;A<y.length;A++){var b=y[A],_=b.input;if(!(_.length>o)){for(f=!0,m=0;m<_.length;m++){var w=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==v&&l.cDef[w+2]!=_[m]){f=!1;break}}if(f){var C=b.substLookupRecords;for(u=0;u<C.length;u+=2)C[u],C[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(A=0;A<E.length;A+=2){v=E[A];var x=i[E[A+1]];t.U._applySubs(e,n+v,x,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+o),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,f=n.y,p=0,m=0,v=0,g=0,y=0,A=0,b=0,_=0,w=0,C=0,E={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,E);var x=E.val;if(h+=E.size,"o1"==x||"o18"==x)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==x||"o23"==x)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==x)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),u&&t.U.P.closePath(o),f+=a.pop(),t.U.P.moveTo(o,d,f),u=!0;else if("o5"==x)for(;a.length>0;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);else if("o6"==x||"o7"==x)for(var B=a.length,S="o6"==x,T=0;T<B;T++){var M=a.shift();S?d+=M:f+=M,S=!S,t.U.P.lineTo(o,d,f)}else if("o8"==x||"o24"==x){B=a.length;for(var R=0;R+6<=B;)p=d+a.shift(),m=f+a.shift(),v=p+a.shift(),g=m+a.shift(),d=v+a.shift(),f=g+a.shift(),t.U.P.curveTo(o,p,m,v,g,d,f),R+=6;"o24"==x&&(d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f))}else{if("o11"==x)break;if("o1234"==x||"o1235"==x||"o1236"==x||"o1237"==x)"o1234"==x&&(m=f,v=(p=d+a.shift())+a.shift(),C=g=m+a.shift(),A=g,_=f,d=(b=(y=(w=v+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,v,g,w,C),t.U.P.curveTo(o,y,A,b,_,d,f)),"o1235"==x&&(p=d+a.shift(),m=f+a.shift(),v=p+a.shift(),g=m+a.shift(),w=v+a.shift(),C=g+a.shift(),y=w+a.shift(),A=C+a.shift(),b=y+a.shift(),_=A+a.shift(),d=b+a.shift(),f=_+a.shift(),a.shift(),t.U.P.curveTo(o,p,m,v,g,w,C),t.U.P.curveTo(o,y,A,b,_,d,f)),"o1236"==x&&(p=d+a.shift(),m=f+a.shift(),v=p+a.shift(),C=g=m+a.shift(),A=g,b=(y=(w=v+a.shift())+a.shift())+a.shift(),_=A+a.shift(),d=b+a.shift(),t.U.P.curveTo(o,p,m,v,g,w,C),t.U.P.curveTo(o,y,A,b,_,d,f)),"o1237"==x&&(p=d+a.shift(),m=f+a.shift(),v=p+a.shift(),g=m+a.shift(),w=v+a.shift(),C=g+a.shift(),y=w+a.shift(),A=C+a.shift(),b=y+a.shift(),_=A+a.shift(),Math.abs(b-d)>Math.abs(_-f)?d=b+a.shift():f=_+a.shift(),t.U.P.curveTo(o,p,m,v,g,w,C),t.U.P.curveTo(o,y,A,b,_,d,f));else if("o14"==x){if(a.length>0&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),4==a.length){var O=a.shift(),D=a.shift(),F=a.shift(),U=a.shift(),I=t.CFF.glyphBySE(r,F),k=t.CFF.glyphBySE(r,U);t.U._drawCFF(r.CharStrings[I],n,r,i,o),n.x=O,n.y=D,t.U._drawCFF(r.CharStrings[k],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==x||"o20"==x)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,h+=s+7>>3;else if("o21"==x)a.length>2&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),f+=a.pop(),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o22"==x)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o25"==x){for(;a.length>6;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);p=d+a.shift(),m=f+a.shift(),v=p+a.shift(),g=m+a.shift(),d=v+a.shift(),f=g+a.shift(),t.U.P.curveTo(o,p,m,v,g,d,f)}else if("o26"==x)for(a.length%2&&(d+=a.shift());a.length>0;)p=d,m=f+a.shift(),d=v=p+a.shift(),f=(g=m+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,v,g,d,f);else if("o27"==x)for(a.length%2&&(f+=a.shift());a.length>0;)m=f,v=(p=d+a.shift())+a.shift(),g=m+a.shift(),d=v+a.shift(),f=g,t.U.P.curveTo(o,p,m,v,g,d,f);else if("o10"==x||"o29"==x){var P="o10"==x?i:r;if(0==a.length)console.debug("error: empty stack");else{var L=a.pop(),G=P.Subrs[L+P.Bias];n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(G,n,r,i,o),d=n.x,f=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==x||"o31"==x){var z=a.length,H=(R=0,"o31"==x);for(R+=z-(B=-3&z);R<B;)H?(m=f,v=(p=d+a.shift())+a.shift(),f=(g=m+a.shift())+a.shift(),B-R==5?(d=v+a.shift(),R++):d=v,H=!1):(p=d,m=f+a.shift(),v=p+a.shift(),g=m+a.shift(),d=v+a.shift(),B-R==5?(f=g+a.shift(),R++):f=g,H=!0),t.U.P.curveTo(o,p,m,v,g,d,f),R+=4}else{if("o"==(x+"").charAt(0))throw console.debug("Unknown operation: "+x,e),x;a.push(x)}}}n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr
/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(o,0)[0],d=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],f=l[e[o]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[d[f]>>>c]=u}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=d[l[e[o]-1]++]>>>15-e[o]);return s},v=new t(288);for(f=0;f<144;++f)v[f]=8;for(f=144;f<256;++f)v[f]=9;for(f=256;f<280;++f)v[f]=7;for(f=280;f<288;++f)v[f]=8;var g=new t(32);for(f=0;f<32;++f)g[f]=5;var y=m(v,9,1),A=m(g,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},_=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},w=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(e,t,n){var r=new Error(t||C[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,E),!n)throw r;return r},x=new t(0),B="undefined"!=typeof TextDecoder&&new TextDecoder;try{B.decode(x,{stream:!0})}catch(S){}return e.convert_streams=function(e){var s=new DataView(e),l=0;function u(){var e=s.getUint16(l);return l+=2,e}function d(){var e=s.getUint32(l);return l+=4,e}function f(e){D.setUint16(F,e),F+=2}function p(e){D.setUint32(F,e),F+=4}for(var v={signature:d(),flavor:d(),length:d(),numTables:u(),reserved:u(),totalSfntSize:d(),majorVersion:u(),minorVersion:u(),metaOffset:d(),metaLength:d(),metaOrigLength:d(),privOffset:d(),privLength:d()},g=0;Math.pow(2,g)<=v.numTables;)g++;g--;for(var C=16*Math.pow(2,g),x=16*v.numTables-C,B=12,S=[],T=0;T<v.numTables;T++)S.push({tag:d(),offset:d(),compLength:d(),origLength:d(),origChecksum:d()}),B+=16;var M,R=new Uint8Array(12+16*S.length+S.reduce((function(e,t){return e+t.origLength+4}),0)),O=R.buffer,D=new DataView(O),F=0;return p(v.flavor),f(v.numTables),f(C),f(g),f(x),S.forEach((function(e){p(e.tag),p(e.origChecksum),p(B),p(e.origLength),e.outOffset=B,(B+=e.origLength)%4!=0&&(B+=4-B%4)})),S.forEach((function(s){var l=e.slice(s.offset,s.offset+s.compLength);if(s.compLength!=s.origLength){var u=new Uint8Array(s.origLength);(function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var d=!s||l,f=!l||l.i;l||(l={}),s||(s=new t(3*u));var p,v=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},g=l.f||0,C=l.p||0,x=l.b||0,B=l.l,S=l.d,T=l.m,M=l.n,R=8*u;do{if(!B){l.f=g=_(e,C,1);var O=_(e,C+1,3);if(C+=3,!O){var D=e[(j=((p=C)/8|0)+(7&p&&1)+4)-4]|e[j-3]<<8,F=j+D;if(F>u){f&&E(0);break}d&&v(x+D),s.set(e.subarray(j,F),x),l.b=x+=D,l.p=C=8*F;continue}if(1==O)B=y,S=A,T=9,M=5;else if(2==O){var U=_(e,C,31)+257,I=_(e,C+10,15)+4,k=U+_(e,C+5,31)+1;C+=14;for(var P=new t(k),L=new t(19),G=0;G<I;++G)L[a[G]]=_(e,C+3*G,7);C+=3*I;var z=b(L),H=(1<<z)-1,N=m(L,z,1);for(G=0;G<k;){var j,J=N[_(e,C,H)];if(C+=15&J,(j=J>>>4)<16)P[G++]=j;else{var K=0,W=0;for(16==j?(W=3+_(e,C,3),C+=2,K=P[G-1]):17==j?(W=3+_(e,C,7),C+=3):18==j&&(W=11+_(e,C,127),C+=7);W--;)P[G++]=K}}var V=P.subarray(0,U),X=P.subarray(U);T=b(V),M=b(X),B=m(V,T,1),S=m(X,M,1)}else E(1);if(C>R){f&&E(0);break}}d&&v(x+131072);for(var Y=(1<<T)-1,Q=(1<<M)-1,Z=C;;Z=C){var q=(K=B[w(e,C)&Y])>>>4;if((C+=15&K)>R){f&&E(0);break}if(K||E(2),q<256)s[x++]=q;else{if(256==q){Z=C,B=null;break}var $=q-254;if(q>264){var ee=i[G=q-257];$=_(e,C,(1<<ee)-1)+c[G],C+=ee}var te=S[w(e,C)&Q],ne=te>>>4;if(te||E(3),C+=15&te,X=h[ne],ne>3&&(ee=o[ne],X+=w(e,C)&(1<<ee)-1,C+=ee),C>R){f&&E(0);break}d&&v(x+131072);for(var re=x+$;x<re;x+=4)s[x]=s[x-X],s[x+1]=s[x+1-X],s[x+2]=s[x+2-X],s[x+3]=s[x+3-X];x=re}}l.l=B,l.p=Z,l.b=x,B&&(g=1,l.m=T,l.d=S,l.n=M)}while(!g);x==s.length||function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);a.set(e.subarray(i,o))}(s,0,x)})(new Uint8Array(l,2),u)}else u=new Uint8Array(l);R.set(u,s.outOffset);var d=0;(B=s.outOffset+s.origLength)%4!=0&&(d=4-B%4),R.set(new Uint8Array(d).buffer,s.outOffset+s.origLength),M=B+d})),O.slice(0,M)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,c=32;let u;function h(e){if(!u){const e={R:o,L:i,D:a,C:l,U:c,T:s};u=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[i,o]=r.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,u.set(n+=i,e[t]);for(let a=o;a--;)u.set(++n,e[t])}))}}return u.get(e)||c}const d=1,f=2,p=3,m=4,v=[null,"isol","init","fina","medi"];function g(e){const t=new Uint8Array(e.length);let n=c,r=d,u=-1;for(let v=0;v<e.length;v++){const g=e.codePointAt(v);let y=0|h(g),A=d;y&s||(n&(i|a|l)?y&(o|a|l)?(A=p,r!==d&&r!==p||t[u]++):y&(i|c)&&(r!==f&&r!==m||t[u]--):n&(o|c)&&(r!==f&&r!==m||t[u]--),r=t[v]=A,n=y,u=v,g>65535&&v++)}return t}function y(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}function A(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,a=t.head.unitsPerEm,s=y(i&&i.sTypoAscender,o&&o.ascender,a),l={unitsPerEm:a,ascender:s,descender:y(i&&i.sTypoDescender,o&&o.descender,0),capHeight:y(i&&i.sCapHeight,s),xHeight:y(i&&i.sxHeight,s),lineGap:y(i&&i.sTypoLineGap,o&&o.lineGap),forEachGlyph(i,o,a,s){let c=0;const u=1/l.unitsPerEm*o,h=function(t,n){const r=[];for(let o=0;o<n.length;o++){const i=n.codePointAt(o);i>65535&&o++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let a;const s=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,l=[];o.forEach((i=>{if(s.test(i.tag))for(let o=0;o<i.tab.length;o++){if(l[i.tab[o]])continue;l[i.tab[o]]=!0;const s=t[i.tab[o]],c=/^(isol|init|fina|medi)$/.test(i.tag);c&&!a&&(a=g(n));for(let n=0;n<r.length;n++)a&&c&&v[a[n]]!==i.tag||e.U._applySubs(r,n,s,t)}}))}return r}(t,i);let d=0,f=-1;return h.forEach(((l,h)=>{if(-1!==l){let i=r[l];if(!i){const{cmds:o,crds:a}=e.U.glyphToPath(t,l);let s,c,u,h,d="",f=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];d+=o[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+a[f++]}if(a.length){s=c=1/0,u=h=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],n=a[e+1];t<s&&(s=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else s=u=c=h=0;i=r[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:s,yMin:c,xMax:u,yMax:h,path:d,pathCommandCount:o.length}}-1!==f&&(c+=e.U.getPairAdjustment(t,f,l)*u),s.call(null,i,c,d),i.advanceWidth&&(c+=i.advanceWidth*u),a&&(c+=a*o),f=l}d+=i.codePointAt(d)>65535?2:1})),c}};return l}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return A(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())}),Il={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},kl=new p;function Pl(){return(self.performance||Date).now()}const Ll=Object.create(null);function Gl(e,t){e=function(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},e);const n=Pl();if(e.font=function(e){Hl||(Hl="undefined"==typeof document?{}:document.createElement("a"));return Hl.href=e,Hl.href}(e.font||Il.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Il.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=kl.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:r,sdfExponent:i}=Il,{sdfGlyphSize:o}=e,s=r/o*4;let l=Ll[o];if(!l){const e=document.createElement("canvas");e.width=r,e.height=256*o/s,l=Ll[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:e,sdfTexture:new a(e,void 0,void 0,void 0,le,le),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(zl(t,e,!0))}))})),Promise.all(n).then((()=>{Nl(e),e.sdfTexture.needsUpdate=!0}))}))}(l)}const{sdfTexture:c,sdfCanvas:u}=l;let h=l.glyphsByFont.get(e.font);h||l.glyphsByFont.set(e.font,h=new Map),Jl(e).then((a=>{const{glyphIds:d,glyphPositions:f,fontSize:p,unitsPerEm:m,timings:v}=a,g=[],y=new Float32Array(4*d.length),A=p/m;let b=0,_=0;const w=Pl();d.forEach(((e,t)=>{let n=h.get(e);if(!n){const{path:t,pathBounds:r}=a.glyphData[e],i=Math.max(r[2]-r[0],r[3]-r[1])/o*(Il.sdfMargin*o+.5),s=l.glyphCount++,c=[r[0]-i,r[1]-i,r[2]+i,r[3]+i];h.set(e,n={path:t,atlasIndex:s,sdfViewBox:c}),g.push(n)}const{sdfViewBox:r}=n,i=f[_++],s=f[_++];y[b++]=i+r[0]*A,y[b++]=s+r[1]*A,y[b++]=i+r[2]*A,y[b++]=s+r[3]*A,d[t]=n.atlasIndex})),v.quads=(v.quads||0)+(Pl()-w);const C=Pl();v.sdf={};const E=u.height,x=Math.ceil(l.glyphCount/s),B=Math.pow(2,Math.ceil(Math.log2(x*o)));B>E&&(console.info(`Increasing SDF texture size ${E}->${B}`),Fl(u,r,B),c.dispose()),Promise.all(g.map((t=>zl(t,l,e.gpuAccelerateSDF).then((({timing:e})=>{v.sdf[t.atlasIndex]=e}))))).then((()=>{g.length&&!l.contextLost&&(Nl(l),c.needsUpdate=!0),v.sdfTotal=Pl()-C,v.total=Pl()-n,t(Object.freeze({parameters:e,sdfTexture:c,sdfGlyphSize:o,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:d,glyphColors:a.glyphColors,caretPositions:a.caretPositions,caretHeight:a.caretHeight,chunkedBounds:a.chunkedBounds,ascender:a.ascender,descender:a.descender,lineHeight:a.lineHeight,capHeight:a.capHeight,xHeight:a.xHeight,topBaseline:a.topBaseline,blockBounds:a.blockBounds,visibleBounds:a.visibleBounds,timings:a.timings}))}))})),Promise.resolve().then((()=>{var e;l.contextLost||(e=u)._warm||(wl.webgl.isSupported(e),e._warm=!0)}))}function zl({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=Il,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,l,c,u=!0){return u?Sl(e,t,n,r,i,o,a,s,l,c).then(null,(u=>(Cl||(console.warn("WebGL SDF generation failed, falling back to JS",u),Cl=!0),Dl(e,t,n,r,i,o,a,s,l,c)))):Dl(e,t,n,r,i,o,a,s,l,c)}(r,r,e,n,c,l,i,u%(s/r)*r,Math.floor(u/(s/r))*r,t%4,a)}let Hl;function Nl(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const jl=il({name:"Typesetter",dependencies:[Il,Ul,function(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(t,n){t||(t=r);let o=i[t];o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},function(t,n){!function i(){const o=e=>{console.error(`Failure loading font ${t}${t===r?"":"; trying fallback"}`,e),t!==r&&(t=r,i())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(em){o(em)}},r.onerror=o,r.send()}catch(a){o(a)}}()}(t,(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})))}function u({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:u=1,letterSpacing:m=0,lineHeight:v="normal",maxWidth:g=o,direction:y,textAlign:A="left",textIndent:b=0,whiteSpace:_="normal",overflowWrap:w="normal",anchorX:C=0,anchorY:E=0,includeCaretPositions:x=!1,chunkedBoundsSize:B=8192,colorRanges:S=null},T,M=!1){const R=f(),O={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,m=+m,g=+g,v=v||"normal",b=+b,c(n,(n=>{const r=isFinite(g);let i=null,c=null,D=null,F=null,U=null,I=null,k=null,P=0,L=0,G="nowrap"!==_;const{ascender:z,descender:H,unitsPerEm:N,lineGap:j,capHeight:J,xHeight:K}=n;O.fontLoad=f()-R;const W=f(),V=u/N;"normal"===v&&(v=(z-H+j)/N);const X=((v*=u)-(z-H)*V)/2,Y=-(z*V+X),Q=Math.min(v,(z-H)*V),Z=(z+H)/2*V-Q/2;let q=b,$=new p;const ee=[$];n.forEachGlyph(e,u,m,((t,n,i)=>{const o=e.charAt(i),c=t.advanceWidth*V,h=$.count;let d;if("isEmpty"in t||(t.isWhitespace=!!o&&new RegExp(s).test(o),t.canBreakAfter=!!o&&l.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||L++,G&&r&&!t.isWhitespace&&n+c+q>g&&h){if($.glyphAt(h-1).glyphObj.canBreakAfter)d=new p,q=-n;else for(let e=h;e--;){if(0===e&&"break-word"===w){d=new p,q=-n;break}if($.glyphAt(e).glyphObj.canBreakAfter){d=$.splitAt(e+1);const t=d.glyphAt(0).x;q-=t;for(let e=d.count;e--;)d.glyphAt(e).x-=t;break}}d&&($.isSoftWrapped=!0,$=d,ee.push($),P=g)}let f=$.glyphAt($.count);f.glyphObj=t,f.x=n+q,f.width=c,f.charIndex=i,"\n"===o&&($=new p,ee.push($),q=-(n+c+m*u)+b)})),ee.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>P&&(P=e.width))}}));let te=0,ne=0;if(C&&("number"==typeof C?te=-C:"string"==typeof C&&(te=-P*("left"===C?0:"center"===C?.5:"right"===C?1:h(C)))),E)if("number"==typeof E)ne=-E;else if("string"==typeof E){let e=ee.length*v;ne="top"===E?0:"top-baseline"===E?-Y:"top-cap"===E?-Y-J*V:"top-ex"===E?-Y-K*V:"middle"===E?e/2:"bottom"===E?e:"bottom-baseline"===E?e-X+H*V:h(E)*e}if(!M){const r=t.getEmbeddingLevels(e,y);i=new Uint16Array(L),c=new Float32Array(2*L),D={},I=[o,o,-o,-o],k=[];let a=Y;x&&(U=new Float32Array(3*e.length)),S&&(F=new Uint8Array(3*L));let s,l,u=0,h=-1,f=-1;if(ee.forEach(((p,m)=>{let{count:g,width:y}=p;if(g>0){let m=0;for(let e=g;e--&&p.glyphAt(e).glyphObj.isWhitespace;)m++;let v=0,b=0;if("center"===A)v=(P-y)/2;else if("right"===A)v=P-y;else if("justify"===A&&p.isSoftWrapped){let e=0;for(let t=g-m;t--;)p.glyphAt(t).glyphObj.isWhitespace&&e++;b=(P-y)/e}if(b||v){let e=0;for(let t=0;t<g;t++){let n=p.glyphAt(t);const r=n.glyphObj;n.x+=v+e,0!==b&&r.isWhitespace&&t<g-m&&(e+=b,n.width+=b)}}const _=t.getReorderSegments(e,r,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let e=0;e<_.length;e++){const[t,n]=_[e];let r=1/0,i=-1/0;for(let e=0;e<g;e++)if(p.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<g;o++){let e=p.glyphAt(o);if(e.charIndex>n)break;o<g-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=p.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let w;const C=e=>w=e;for(let y=0;y<g;y++){let m=p.glyphAt(y);w=m.glyphObj;const v=w.index,g=1&r.levels[m.charIndex];if(g){const r=t.getMirroredCharacter(e[m.charIndex]);r&&n.forEachGlyph(r,0,0,C)}if(x){const{charIndex:e}=m,t=m.x+te,n=m.x+m.width+te;U[3*e]=g?n:t,U[3*e+1]=g?t:n,U[3*e+2]=a+Z+ne;const r=e-h;r>1&&d(U,h,r),h=e}if(S){const{charIndex:e}=m;for(;e>f;)f++,S.hasOwnProperty(f)&&(l=S[f])}if(!w.isWhitespace&&!w.isEmpty){const e=u++;D[v]||(D[v]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const t=m.x+te,n=a+ne;c[2*e]=t,c[2*e+1]=n;const r=t+w.xMin*V,h=n+w.yMin*V,d=t+w.xMax*V,f=n+w.yMax*V;r<I[0]&&(I[0]=r),h<I[1]&&(I[1]=h),d>I[2]&&(I[2]=d),f>I[3]&&(I[3]=f),e%B==0&&(s={start:e,end:e,rect:[o,o,-o,-o]},k.push(s)),s.end++;const p=s.rect;if(r<p[0]&&(p[0]=r),h<p[1]&&(p[1]=h),d>p[2]&&(p[2]=d),f>p[3]&&(p[3]=f),i[e]=v,S){const t=3*e;F[t]=l>>16&255,F[t+1]=l>>8&255,F[t+2]=255&l}}}}a-=v})),U){const t=e.length-h;t>1&&d(U,h,t)}}O.typesetting=f()-W,T({glyphIds:i,glyphPositions:c,glyphData:D,caretPositions:U,caretHeight:Q,glyphColors:F,chunkedBounds:k,fontSize:u,unitsPerEm:N,ascender:z*V,descender:H*V,capHeight:J*V,xHeight:K*V,lineHeight:v,topBaseline:Y,blockBounds:[te,ne-ee.length*v,te+P,ne],visibleBounds:I,timings:O})}))}function h(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function d(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],a=(i-r)/n;for(let s=0;s<n;s++){const n=3*(t+s);e[n]=r+a*s,e[n+1]=r+a*(s+1),e[n+2]=o}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(e){let t=p.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new p;return t.data=this.data.splice(e*m.length),t}},p.flyweight=m.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*m.length+n]},set(e){this.data[this.index*m.length+n]=e}}),e)),{data:null,index:0}),{typeset:u,measure:function(e,t){u(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:c}},function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,c.set(r+=o,n[e]);for(var s=0;s<a;s++)c.set(++r,n[e])}))}};for(var r in t)e(r)}}(),c.get(e.codePointAt(0))||n.L}var h,d,f,p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}})),{map:i,reverseMap:o}}function v(){if(!h){var e=m(p.pairs,!0),t=e.map,n=e.reverseMap;h=t,d=n,f=m(p.canonical,!1).map}}function g(e){return v(),h.get(e)||null}function y(e){return v(),d.get(e)||null}function A(e){return v(),f.get(e)||null}var b=n.L,_=n.R,w=n.EN,C=n.ES,E=n.ET,x=n.AN,B=n.CS,S=n.B,T=n.S,M=n.ON,R=n.BN,O=n.NSM,D=n.AL,F=n.LRO,U=n.RLO,I=n.LRE,k=n.RLE,P=n.PDF,L=n.LRI,G=n.RLI,z=n.FSI,H=n.PDI;var N,j="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function J(e){return function(){if(!N){var e=m(j,!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),N=t}}(),N.get(e)||null}function K(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var c=t.levels.slice(a,s+1),h=s;h>=a&&u(e[h])&l;h--)c[h]=i.level;for(var d=i.level,f=1/0,p=0;p<c.length;p++){var m=c[p];m>d&&(d=m),m<f&&(f=1|m)}for(var v=d;v>=f;v--)for(var g=0;g<c.length;g++)if(c[g]>=v){for(var y=g;g+1<c.length&&c[g+1]>=v;)g++;g>y&&o.push([y+n,g+n])}}})),o}function W(e,t,n,r){for(var i=K(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=A,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var c=new Map;function h(e,t){var r=n[e];n[e]=t,c.set(r,c.get(r)-1),r&a&&c.set(a,c.get(a)-1),c.set(t,(c.get(t)||0)+1),t&a&&c.set(a,(c.get(a)||0)+1)}for(var d=new Uint8Array(e.length),f=new Map,p=[],m=null,v=0;v<e.length;v++)m||p.push(m={start:v,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Ht(v,!1)}),n[v]&S&&(m.end=v,m=null);for(var N=k|I|U|F|i|H|P|S,j=function(e){return e+(1&e?1:2)},J=function(e){return e+(1&e?2:1)},K=0;K<p.length;K++){var W=[{_level:(m=p[K]).level,_override:0,_isolate:0}],V=void 0,X=0,Y=0,Q=0;c.clear();for(var Z=m.start;Z<=m.end;Z++){var q=n[Z];if(V=W[W.length-1],c.set(q,(c.get(q)||0)+1),q&a&&c.set(a,(c.get(a)||0)+1),q&N)if(q&(k|I)){d[Z]=V._level;var $=(q===k?J:j)(V._level);$<=125&&!X&&!Y?W.push({_level:$,_override:0,_isolate:0}):X||Y++}else if(q&(U|F)){d[Z]=V._level;var ee=(q===U?J:j)(V._level);ee<=125&&!X&&!Y?W.push({_level:ee,_override:q&U?_:b,_isolate:0}):X||Y++}else if(q&i){q&z&&(q=1===Ht(Z+1,!0)?G:L),d[Z]=V._level,V._override&&h(Z,V._override);var te=(q===G?J:j)(V._level);te<=125&&0===X&&0===Y?(Q++,W.push({_level:te,_override:0,_isolate:1,_isolInitIndex:Z})):X++}else if(q&H){if(X>0)X--;else if(Q>0){for(Y=0;!W[W.length-1]._isolate;)W.pop();var ne=W[W.length-1]._isolInitIndex;null!=ne&&(f.set(ne,Z),f.set(Z,ne)),W.pop(),Q--}V=W[W.length-1],d[Z]=V._level,V._override&&h(Z,V._override)}else q&P?(0===X&&(Y>0?Y--:!V._isolate&&W.length>1&&(W.pop(),V=W[W.length-1])),d[Z]=V._level):q&S&&(d[Z]=m.level);else d[Z]=V._level,V._override&&q!==R&&h(Z,V._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=d[oe],le=ae&i,ce=ae===H;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!f.has(de._start)){for(var fe=[ie=de],pe=void 0;ie&&ie._endsWithIsolInit&&null!=(pe=f.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===pe){fe.push(ie=re[me]);break}for(var ve=[],ge=0;ge<fe.length;ge++)for(var ye=fe[ge],Ae=ye._start;Ae<=ye._end;Ae++)ve.push(Ae);for(var be=d[ve[0]],_e=m.level,we=ve[0]-1;we>=0;we--)if(!(n[we]&s)){_e=d[we];break}var Ce=ve[ve.length-1],Ee=d[Ce],xe=m.level;if(!(n[Ce]&i))for(var Be=Ce+1;Be<=m.end;Be++)if(!(n[Be]&s)){xe=d[Be];break}ue.push({_seqIndices:ve,_sosType:Math.max(_e,be)%2?_:b,_eosType:Math.max(xe,Ee)%2?_:b})}}for(var Se=0;Se<ue.length;Se++){var Te=ue[Se],Me=Te._seqIndices,Re=Te._sosType,Oe=Te._eosType;if(c.get(O))for(var De=0;De<Me.length;De++){var Fe=Me[De];if(n[Fe]&O){for(var Ue=Re,Ie=De-1;Ie>=0;Ie--)if(!(n[Me[Ie]]&s)){Ue=n[Me[Ie]];break}h(Fe,Ue&(i|H)?M:Ue)}}if(c.get(w))for(var ke=0;ke<Me.length;ke++){var Pe=Me[ke];if(n[Pe]&w)for(var Le=ke-1;Le>=-1;Le--){var Ge=-1===Le?Re:n[Me[Le]];if(Ge&o){Ge===D&&h(Pe,x);break}}}if(c.get(D))for(var ze=0;ze<Me.length;ze++){var He=Me[ze];n[He]&D&&h(He,_)}if(c.get(C)||c.get(B))for(var Ne=1;Ne<Me.length-1;Ne++){var je=Me[Ne];if(n[je]&(C|B)){for(var Je=0,Ke=0,We=Ne-1;We>=0&&(Je=n[Me[We]])&s;We--);for(var Ve=Ne+1;Ve<Me.length&&(Ke=n[Me[Ve]])&s;Ve++);Je===Ke&&(n[je]===C?Je===w:Je&(w|x))&&h(je,Je)}}if(c.get(w))for(var Xe=0;Xe<Me.length;Xe++){var Ye=Me[Xe];if(n[Ye]&w){for(var Qe=Xe-1;Qe>=0&&n[Me[Qe]]&(E|s);Qe--)h(Me[Qe],w);for(var Ze=Xe+1;Ze<Me.length&&n[Me[Ze]]&(E|s);Ze++)h(Me[Ze],w)}}if(c.get(E)||c.get(C)||c.get(B))for(var qe=0;qe<Me.length;qe++){var $e=Me[qe];if(n[$e]&(E|C|B)){h($e,M);for(var et=qe-1;et>=0&&n[Me[et]]&s;et--)h(Me[et],M);for(var tt=qe+1;tt<Me.length&&n[Me[tt]]&s;tt++)h(Me[tt],M)}}if(c.get(w))for(var nt=0,rt=Re;nt<Me.length;nt++){var it=Me[nt],ot=n[it];ot&w?rt===b&&h(it,b):ot&o&&(rt=ot)}if(c.get(a)){for(var at=_|w|x,st=at|b,lt=[],ct=[],ut=0;ut<Me.length;ut++)if(n[Me[ut]]&a){var ht=e[Me[ut]],dt=void 0;if(null!==g(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=y(ht)))for(var ft=ct.length-1;ft>=0;ft--){var pt=ct[ft].char;if(pt===dt||pt===y(A(ht))||g(A(pt))===ht){lt.push([ct[ft].seqIndex,ut]),ct.length=ft;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var vt=lt[mt],gt=vt[0],yt=vt[1],At=!1,bt=0,_t=gt+1;_t<yt;_t++){var wt=Me[_t];if(n[wt]&st){At=!0;var Ct=n[wt]&at?_:b;if(Ct===jt(wt)){bt=Ct;break}}}if(At&&!bt){bt=Re;for(var Et=gt-1;Et>=0;Et--){var xt=Me[Et];if(n[xt]&st){var Bt=n[xt]&at?_:b;bt=Bt!==jt(xt)?Bt:jt(xt);break}}}if(bt){if(n[Me[gt]]=n[Me[yt]]=bt,bt!==jt(Me[gt]))for(var St=gt+1;St<Me.length;St++)if(!(n[Me[St]]&s)){u(e[Me[St]])&O&&(n[Me[St]]=bt);break}if(bt!==jt(Me[yt]))for(var Tt=yt+1;Tt<Me.length;Tt++)if(!(n[Me[Tt]]&s)){u(e[Me[Tt]])&O&&(n[Me[Tt]]=bt);break}}}for(var Mt=0;Mt<Me.length;Mt++)if(n[Me[Mt]]&a){for(var Rt=Mt,Ot=Mt,Dt=Re,Ft=Mt-1;Ft>=0;Ft--){if(!(n[Me[Ft]]&s)){Dt=n[Me[Ft]]&at?_:b;break}Rt=Ft}for(var Ut=Oe,It=Mt+1;It<Me.length;It++){if(!(n[Me[It]]&(a|s))){Ut=n[Me[It]]&at?_:b;break}Ot=It}for(var kt=Rt;kt<=Ot;kt++)n[Me[kt]]=Dt===Ut?Dt:jt(Me[kt]);Mt=Ot}}}for(var Pt=m.start;Pt<=m.end;Pt++){var Lt=d[Pt],Gt=n[Pt];if(1&Lt?Gt&(b|w|x)&&d[Pt]++:Gt&_?d[Pt]++:Gt&(x|w)&&(d[Pt]+=2),Gt&s&&(d[Pt]=0===Pt?m.level:d[Pt-1]),Pt===m.end||u(e[Pt])&(T|S))for(var zt=Pt;zt>=0&&u(e[zt])&l;zt--)d[zt]=m.level}}return{levels:d,paragraphs:p};function Ht(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(_|D))return 1;if(a&(S|b)||r&&a===H)return 0;if(a&i){var s=Nt(o);o=-1===s?e.length:s}}return 0}function Nt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&S)break;if(a&H){if(0==--r)return o}else a&i&&r++}return-1}function jt(e){return 1&d[e]?_:b}},e.getMirroredCharacter=J,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=J(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=K,e.getReorderedIndices=W,e.getReorderedString=function(e,t,n,r){var i=W(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?J(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),Jl=il({name:"Typesetter",dependencies:[jl],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}}),Kl={};const Wl="aTroikaGlyphIndex";class Vl extends $e{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new H,this.boundingBox=new Le}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===et?t/2:0,e===T?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=function(e){let t=Kl[e];if(!t){const n=new rt(1,1,e,e),r=n.clone(),i=n.attributes,o=r.attributes,a=new d,s=i.uv.count;for(let e=0;e<s;e++)o.position.array[3*e]*=-1,o.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{a.setAttribute(e,new ze([...i[e].array,...o[e].array],i[e].itemSize))})),a.setIndex([...n.index.array,...r.index.array.map((e=>e+s))]),a.translate(.5,.5,0),t=Kl[e]=a}return t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){Xl(this,"aTroikaGlyphBounds",e,4),Xl(this,Wl,t,1),Xl(this,"aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,f=e[2]/h,p=i((d+c)/u)!==i((f+c)/u)?-h:o(s(d)*h,s(f)*h),m=i((d-c)/u)!==i((f-c)/u)?h:a(s(d)*h,s(f)*h),v=i((d+r)/u)!==i((f+r)/u)?2*h:a(h-l(d)*h,h-l(f)*h);n.min.set(p,e[1],t<0?-v:0),n.max.set(m,e[3],t<0?0:v)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Wl).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function Xl(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new tt(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}const Yl=new te({color:16777215,side:T,transparent:!0}),Ql=8421504,Zl=new R,ql=new h,$l=new h,ec=[],tc=new h,nc="+x+y";function rc(e){return Array.isArray(e)?e[0]:e}let ic=()=>{const e=new G(new rt(1,1),Yl);return ic=()=>e,e},oc=()=>{const e=new G(new rt(1,1,32,1),Yl);return oc=()=>e,e};const ac={type:"syncstart"},sc={type:"synccomplete"},lc=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],cc=lc.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let uc=class extends G{constructor(){super(new Vl,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Ql,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=nc,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(ac),Gl({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(sc),e&&e()}))))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=Fe}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Yl.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){const t=vl(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new u},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new O(0,0,0,0)},uTroikaClipRect:{value:new O(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new u},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new p},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new nt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(ll,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return rc(this.material).getDepthMaterial()}get customDistanceMaterial(){return rc(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let o,a,s,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(r)||0),o=i,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?Ql:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)n.uTroikaClipRect.value.fromArray(f);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new p;i===t._input&&"object"!=typeof i||t.set(t._input=i)}let o=this.orientation||nc;if(o!==e._orientation){let t=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let r=o!==nc&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;ql.set(0,0,0)[n]="-"===e?1:-1,$l.set(0,0,0)[o]="-"===i?-1:1,Zl.lookAt(tc,ql.cross($l),$l),t.setFromMatrix4(Zl)}else t.identity();e._orientation=o}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new u){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new u){return ql.copy(e),this.localPositionToTextCoords(this.worldToLocal(ql),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?oc():ic(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,ec.length=0,o.raycast(e,ec);for(let e=0;e<ec.length;e++)ec[e].object=this,t.push(ec[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,cc.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}};lc.forEach((e=>{const t="_private_"+e;Object.defineProperty(uc.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));const hc=t.forwardRef((({sdfGlyphSize:e=64,anchorX:n="center",anchorY:i="middle",font:o,fontSize:a=1,children:s,characters:l,onSync:c,...u},h)=>{const d=Pn((({invalidate:e})=>e)),[f]=t.useState((()=>new uc)),[p,m]=t.useMemo((()=>{const e=[];let n="";return t.Children.forEach(s,(t=>{"string"==typeof t||"number"==typeof t?n+=t:e.push(t)})),[e,n]}),[s]);return Gt((()=>new Promise((e=>function({font:e,characters:t,sdfGlyphSize:n},r){Gl({font:e,sdfGlyphSize:n,text:Array.isArray(t)?t.join("\n"):""+t},r)}({font:o,characters:l},e)))),["troika-text",o,l]),t.useLayoutEffect((()=>{f.sync((()=>{d(),c&&c(f)}))})),t.useEffect((()=>()=>f.dispose()),[f]),t.createElement("primitive",r({object:f,ref:h,font:o,text:m,anchorX:n,anchorY:i,fontSize:a,sdfGlyphSize:e},u),p)}));let dc=null;async function fc(e){dc||(dc=new Ls);let t="string"==typeof e?await(await fetch(e)).json():e;return dc.parse(t)}function pc(e){return Gt(fc,[e])}pc.preload=e=>zt(fc,[e]),pc.clear=e=>Ht([e]);const mc=["string","number"],vc=t.forwardRef((({font:e,letterSpacing:n=0,lineHeight:i=1,size:o=1,height:a=.2,bevelThickness:s=.1,bevelSize:l=.01,bevelEnabled:c=!1,bevelOffset:u=0,bevelSegments:h=4,curveSegments:d=8,smooth:f,children:p,...m},v)=>{t.useMemo((()=>jt({RenamedTextGeometry:Fs})),[]);const g=t.useRef(null),y=pc(e),A=t.useMemo((()=>({font:y,size:o,height:a,bevelThickness:s,bevelSize:l,bevelEnabled:c,bevelSegments:h,bevelOffset:u,curveSegments:d,letterSpacing:n,lineHeight:i})),[y,o,a,s,l,c,h,u,d,n,i]),[b,..._]=t.useMemo((()=>(e=>{let n="";const r=[];return t.Children.forEach(e,(e=>{mc.includes(typeof e)?n+=e+"":r.push(e)})),[n,...r]})(p)),[p]),w=t.useMemo((()=>[b,A]),[b,A]);return t.useLayoutEffect((()=>{f&&(g.current.geometry=function(e,t=1e-4){t=Math.max(t,Number.EPSILON);const n={},r=e.getIndex(),i=e.getAttribute("position"),o=r?r.count:i.count;let a=0;const s=Object.keys(e.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"];for(let m=0,v=s.length;m<v;m++){const t=s[m];l[t]=[];const n=e.morphAttributes[t];n&&(c[t]=new Array(n.length).fill(0).map((()=>[])))}const d=Math.log10(1/t),f=Math.pow(10,d);for(let m=0;m<o;m++){const t=r?r.getX(m):m;let i="";for(let n=0,r=s.length;n<r;n++){const r=s[n],o=e.getAttribute(r),a=o.itemSize;for(let e=0;e<a;e++)i+=~~(o[h[e]](t)*f)+","}if(i in n)u.push(n[i]);else{for(let n=0,r=s.length;n<r;n++){const r=s[n],i=e.getAttribute(r),o=e.morphAttributes[r],a=i.itemSize,u=l[r],d=c[r];for(let e=0;e<a;e++){const n=h[e];if(u.push(i[n](t)),o)for(let e=0,r=o.length;e<r;e++)d[e].push(o[e][n](t))}}n[i]=a,u.push(a),a++}}const p=e.clone();for(let m=0,v=s.length;m<v;m++){const t=s[m],n=e.getAttribute(t),r=new n.array.constructor(l[t]),i=new P(r,n.itemSize,n.normalized);if(p.setAttribute(t,i),t in c)for(let o=0;o<c[t].length;o++){const n=e.morphAttributes[t][o],r=new n.array.constructor(c[t][o]),i=new P(r,n.itemSize,n.normalized);p.morphAttributes[t][o]=i}}return p.setIndex(u),p}(g.current.geometry,f),g.current.geometry.computeVertexNormals())}),[w,f]),t.useImperativeHandle(v,(()=>g.current),[]),t.createElement("mesh",r({},m,{ref:g}),t.createElement("renamedTextGeometry",{args:w}),_)}));function gc(e,t,n,r){const i=class extends j{constructor(i={}){const o=Object.entries(e);super({uniforms:o.reduce(((e,[t,n])=>({...e,...Xe.clone({[t]:{value:n}})})),{}),vertexShader:t,fragmentShader:n}),this.key="",o.forEach((([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t}))),Object.assign(this,i),r&&r(this)}};return i.key=_e.generateUUID(),i}const yc=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function Ac(e,n){const r=Pn((e=>e.gl)),i=Hn(oe,yc(e)?Object.values(e):e);if(t.useLayoutEffect((()=>{null==n||n(i)}),[n]),t.useEffect((()=>{if("initTexture"in r){(Array.isArray(i)?i:[i]).forEach(r.initTexture)}}),[r,i]),yc(e)){const t=Object.keys(e),n={};return t.forEach((e=>Object.assign(n,{[e]:i[t.indexOf(e)]}))),n}return i}Ac.preload=e=>Hn.preload(oe,e),Ac.clear=e=>Hn.clear(oe,e);const bc=gc({color:new p("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},"\n  varying vec2 vUv;\n  void main() {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n    vUv = uv;\n  }\n",`\n  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44\n  varying vec2 vUv;\n  uniform vec2 scale;\n  uniform vec2 imageBounds;\n  uniform vec3 color;\n  uniform sampler2D map;\n  uniform float zoom;\n  uniform float grayscale;\n  uniform float opacity;\n  const vec3 luma = vec3(.299, 0.587, 0.114);\n  vec4 toGrayscale(vec4 color, float intensity) {\n    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n  }\n  vec2 aspect(vec2 size) {\n    return size / min(size.x, size.y);\n  }\n  void main() {\n    vec2 s = aspect(scale);\n    vec2 i = aspect(imageBounds);\n    float rs = s.x / s.y;\n    float ri = i.x / i.y;\n    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n    vec2 uv = vUv * s / new + offset;\n    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);\n    \n    #include <tonemapping_fragment>\n    #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n  }\n`),_c=t.forwardRef((({children:e,color:n,segments:i=1,scale:o=1,zoom:a=1,grayscale:s=0,opacity:l=1,texture:c,toneMapped:u,transparent:h,...d},f)=>{jt({ImageMaterial:bc});const p=Array.isArray(o)?[o[0],o[1]]:[o,o],m=[c.image.width,c.image.height];return t.createElement("mesh",r({ref:f,scale:Array.isArray(o)?[...o,1]:o},d),t.createElement("planeGeometry",{args:[1,1,i,i]}),t.createElement("imageMaterial",{color:n,map:c,zoom:a,grayscale:s,opacity:l,scale:p,imageBounds:m,toneMapped:u,transparent:h}),e)})),wc=t.forwardRef((({url:e,...n},i)=>{const o=Ac(e);return t.createElement(_c,r({},n,{texture:o,ref:i}))})),Cc=t.forwardRef((({url:e,...n},i)=>t.createElement(_c,r({},n,{ref:i})))),Ec=t.forwardRef(((e,n)=>{if(e.url)return t.createElement(wc,r({},e,{ref:n}));if(e.texture)return t.createElement(Cc,r({},e,{ref:n}));throw new Error("<Image /> requires a url or texture")})),xc=t.createContext(null),Bc=t.forwardRef((({resolution:e=28,maxPolyCount:n=1e4,enableUvs:i=!1,enableColors:o=!1,children:a,...s},l)=>{const c=t.useRef(null),u=t.useMemo((()=>new xa(e,null,i,o,n)),[e,n,i,o]),h=t.useMemo((()=>({getParent:()=>c})),[]);return Ln((()=>{u.update(),u.reset()}),-1),t.createElement(t.Fragment,null,t.createElement("primitive",r({object:u,ref:Pr([c,l])},s),t.createElement(xc.Provider,{value:h},a)))})),Sc=t.forwardRef((({strength:e=.5,subtract:n=12,color:i,...o},a)=>{const{getParent:s}=t.useContext(xc),l=t.useMemo((()=>s()),[s]),c=t.useRef(),u=new h;return Ln((t=>{l.current&&c.current&&(c.current.getWorldPosition(u),l.current.addBall(.5+.5*u.x,.5+.5*u.y,.5+.5*u.z,e,n,i))})),t.createElement("group",r({ref:Pr([a,c])},o))}));function Tc(e=[0,0,0]){return function(e){return Array.isArray(e)}(e)?e:e instanceof h||e instanceof D?[e.x,e.y,e.z]:[e,e,e]}const Mc=t.forwardRef((function({debug:e,depthTest:n=!1,polygonOffsetFactor:i=-10,map:o,mesh:a,children:s,position:l,rotation:c,scale:u,...d},f){const p=t.useRef(null);t.useImperativeHandle(f,(()=>p.current));const m=t.useRef(null);return t.useLayoutEffect((()=>{const e=(null==a?void 0:a.current)||p.current.parent,t=p.current;if(!(e instanceof G))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const n={position:new h,rotation:new D,scale:new h(1,1,1)};if(e){Wn(n,{position:l,scale:u});const r=e.matrixWorld.clone();if(e.matrixWorld.identity(),c&&"number"!=typeof c)Wn(n,{rotation:c});else{const t=new ie;t.position.copy(n.position),t.lookAt(e.position),"number"==typeof c&&t.rotateZ(c),Wn(n,{rotation:t.rotation})}return t.geometry=new Os(e,n.position,n.rotation,n.scale),m.current&&(Wn(m.current,n),m.current.traverse((e=>e.raycast=()=>null))),e.matrixWorld=r,()=>{t.geometry.dispose()}}}),[a,...Tc(l),...Tc(u),...Tc(c)]),t.createElement("mesh",r({ref:p,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":n,"material-map":o},d),s,e&&t.createElement("mesh",{ref:m},t.createElement("boxGeometry",null),t.createElement("meshNormalMaterial",{wireframe:!0}),t.createElement("axesHelper",null)))}));let Rc=null,Oc="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Dc(e,t,n){return r=>{n&&n(r),e&&(Rc||(Rc=new Ks),Rc.setDecoderPath("string"==typeof e?e:Oc),r.setDRACOLoader(Rc)),t&&r.setMeshoptDecoder("function"==typeof Xs?Xs():Xs)}}function Fc(e,t=!0,n=!0,r){return Hn(ka,e,Dc(t,n,r))}function Uc(e,n,r){const i=Pn((e=>e.size)),o=Pn((e=>e.viewport)),a="number"==typeof e?e:i.width*o.dpr,s="number"==typeof n?n:i.height*o.dpr,l=("number"==typeof e?r:e)||{},{samples:c=0,depth:u,...h}=l,d=t.useMemo((()=>{const e=new it(a,s,{minFilter:le,magFilter:le,type:Je,...h});return u&&(e.depthTexture=new ot(a,s,Ke)),e.samples=c,e}),[]);return t.useLayoutEffect((()=>{d.setSize(a,s),c&&(d.samples=c)}),[c,d,a,s]),t.useEffect((()=>()=>d.dispose()),[]),d}Fc.preload=(e,t=!0,n=!0,r)=>Hn.preload(ka,e,Dc(t,n,r)),Fc.clear=e=>Hn.clear(ka,e),Fc.setDecoderPath=e=>{Oc=e};const Ic=t.forwardRef((({envMap:e,resolution:n=256,frames:i=1/0,children:o,makeDefault:a,...s},l)=>{const c=Pn((({set:e})=>e)),u=Pn((({camera:e})=>e)),h=Pn((({size:e})=>e)),d=t.useRef(null),f=t.useRef(null),p=Uc(n);t.useLayoutEffect((()=>{s.manual||d.current.updateProjectionMatrix()}),[h,s]),t.useLayoutEffect((()=>{d.current.updateProjectionMatrix()})),t.useLayoutEffect((()=>{if(a){const e=u;return c((()=>({camera:d.current}))),()=>c((()=>({camera:e})))}}),[d,a,c]);let m=0,v=null;const g="function"==typeof o;return Ln((t=>{g&&(i===1/0||m<i)&&(f.current.visible=!1,t.gl.setRenderTarget(p),v=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,d.current),t.scene.background=v,t.gl.setRenderTarget(null),f.current.visible=!0,m++)})),t.createElement(t.Fragment,null,t.createElement("orthographicCamera",r({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:Pr([d,l])},s),!g&&o),t.createElement("group",{ref:f},g&&o(p.texture)))})),kc=t.forwardRef((({envMap:e,resolution:n=256,frames:i=1/0,makeDefault:o,children:a,...s},l)=>{const c=Pn((({set:e})=>e)),u=Pn((({camera:e})=>e)),h=Pn((({size:e})=>e)),d=t.useRef(null),f=t.useRef(null),p=Uc(n);t.useLayoutEffect((()=>{s.manual||(d.current.aspect=h.width/h.height)}),[h,s]),t.useLayoutEffect((()=>{d.current.updateProjectionMatrix()}));let m=0,v=null;const g="function"==typeof a;return Ln((t=>{g&&(i===1/0||m<i)&&(f.current.visible=!1,t.gl.setRenderTarget(p),v=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,d.current),t.scene.background=v,t.gl.setRenderTarget(null),f.current.visible=!0,m++)})),t.useLayoutEffect((()=>{if(o){const e=u;return c((()=>({camera:d.current}))),()=>c((()=>({camera:e})))}}),[d,o,c]),t.createElement(t.Fragment,null,t.createElement("perspectiveCamera",r({ref:Pr([d,l])},s),!g&&a),t.createElement("group",{ref:f},g&&a(p.texture)))})),Pc=t.forwardRef((({makeDefault:e,camera:n,regress:i,domElement:o,enableDamping:a=!0,keyEvents:s=!1,onChange:l,onStart:c,onEnd:u,...h},d)=>{const f=Pn((e=>e.invalidate)),p=Pn((e=>e.camera)),m=Pn((e=>e.gl)),v=Pn((e=>e.events)),g=Pn((e=>e.setEvents)),y=Pn((e=>e.set)),A=Pn((e=>e.get)),b=Pn((e=>e.performance)),_=n||p,w=o||v.connected||m.domElement,C=t.useMemo((()=>new Ia(_)),[_]);return Ln((()=>{C.enabled&&C.update()}),-1),t.useEffect((()=>(s&&C.connect(!0===s?w:s),C.connect(w),()=>{C.dispose()})),[s,w,i,C,f]),t.useEffect((()=>{const e=e=>{f(),i&&b.regress(),l&&l(e)},t=e=>{c&&c(e)},n=e=>{u&&u(e)};return C.addEventListener("change",e),C.addEventListener("start",t),C.addEventListener("end",n),()=>{C.removeEventListener("start",t),C.removeEventListener("end",n),C.removeEventListener("change",e)}}),[l,c,u,C,f,g]),t.useEffect((()=>{if(e){const e=A().controls;return y({controls:C}),()=>y({controls:e})}}),[e,C]),t.createElement("primitive",r({ref:d,object:C,enableDamping:a},h))})),Lc=1,Gc=2,zc=4,Hc=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Nc=0,jc=1,Jc=-1;function Kc(e){return e.isPerspectiveCamera}function Wc(e){return e.isOrthographicCamera}const Vc=2*Math.PI,Xc=Math.PI/2,Yc=1e-5,Qc=Math.PI/180;function Zc(e,t,n){return Math.max(t,Math.min(n,e))}function qc(e,t=Yc){return Math.abs(e)<t}function $c(e,t,n=Yc){return qc(e-t,n)}function eu(e,t){return Math.round(e/t)*t}function tu(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function nu(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function ru(e,t,n,r,i=1/0,o){const a=2/(r=Math.max(1e-4,r)),s=a*o,l=1/(1+s+.48*s*s+.235*s*s*s);let c=e-t;const u=t,h=i*r;c=Zc(c,-h,h),t=e-c;const d=(n.value+a*c)*o;n.value=(n.value-a*d)*l;let f=t+(c+d)*l;return u-e>0==f>u&&(f=u,n.value=(f-u)/o),f}function iu(e,t,n,r,i=1/0,o,a){const s=2/(r=Math.max(1e-4,r)),l=s*o,c=1/(1+l+.48*l*l+.235*l*l*l);let u=t.x,h=t.y,d=t.z,f=e.x-u,p=e.y-h,m=e.z-d;const v=u,g=h,y=d,A=i*r,b=f*f+p*p+m*m;if(b>A*A){const e=Math.sqrt(b);f=f/e*A,p=p/e*A,m=m/e*A}u=e.x-f,h=e.y-p,d=e.z-m;const _=(n.x+s*f)*o,w=(n.y+s*p)*o,C=(n.z+s*m)*o;n.x=(n.x-s*_)*c,n.y=(n.y-s*w)*c,n.z=(n.z-s*C)*c,a.x=u+(f+_)*c,a.y=h+(p+w)*c,a.z=d+(m+C)*c;const E=v-e.x,x=g-e.y,B=y-e.z;return E*(a.x-v)+x*(a.y-g)+B*(a.z-y)>0&&(a.x=v,a.y=g,a.z=y,n.x=(a.x-v)/o,n.y=(a.y-g)/o,n.z=(a.z-y)/o),a}function ou(e,t){t.set(0,0),e.forEach((e=>{t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function au(e,t){return!!Wc(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}class su{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}const lu=1/8,cu="undefined"!=typeof window,uu=cu&&/Mac/.test(navigator.platform),hu=!(cu&&"PointerEvent"in window);let du,fu,pu,mu,vu,gu,yu,Au,bu,_u,wu,Cu,Eu,xu,Bu,Su,Tu,Mu,Ru,Ou,Du,Fu,Uu,Iu=class e extends su{static install(e){du=e.THREE,fu=Object.freeze(new du.Vector3(0,0,0)),pu=Object.freeze(new du.Vector3(0,1,0)),mu=Object.freeze(new du.Vector3(0,0,1)),vu=new du.Vector2,gu=new du.Vector3,yu=new du.Vector3,Au=new du.Vector3,bu=new du.Vector3,_u=new du.Vector3,wu=new du.Vector3,Cu=new du.Vector3,Eu=new du.Vector3,xu=new du.Vector3,Bu=new du.Spherical,Su=new du.Spherical,Tu=new du.Box3,Mu=new du.Box3,Ru=new du.Sphere,Ou=new du.Quaternion,Du=new du.Quaternion,Fu=new du.Matrix4,Uu=new du.Raycaster}static get ACTION(){return Hc}constructor(t,n){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Hc.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Nc,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new du.Vector3,this._focalOffsetVelocity=new du.Vector3,this._zoomVelocity={value:0},this._truckInternal=(e,t,n)=>{let r,i;if(Kc(this._camera)){const n=gu.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*Qc,a=n.length()*Math.tan(.5*o);r=this.truckSpeed*e*a/this._elementRect.height,i=this.truckSpeed*t*a/this._elementRect.height}else{if(!Wc(this._camera))return;{const n=this._camera;r=e*(n.right-n.left)/n.zoom/this._elementRect.width,i=t*(n.top-n.bottom)/n.zoom/this._elementRect.height}}this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-i,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+i,this._focalOffsetEnd.z,!0):this.truck(r,i,!0)},this._rotateInternal=(e,t)=>{const n=Vc*this.azimuthRotateSpeed*e/this._elementRect.height,r=Vc*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{const r=Math.pow(.95,-e*this.dollySpeed),i=this._sphericalEnd.radius,o=this._sphericalEnd.radius*r,a=du.MathUtils.clamp(o,this.minDistance,this.maxDistance),s=a-o;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(o,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(s,!0),this._dollyToNoClamp(a,!0)):this._dollyToNoClamp(a,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?o:a)-i,this._dollyControlCoord.set(t,n)),this._lastDollyDirection=Math.sign(-e)},this._zoomInternal=(e,t,n)=>{const r=Math.pow(.95,e*this.dollySpeed),i=this._zoom,o=this._zoom*r;this.zoomTo(o,!0),this.dollyToCursor&&(this._changedZoom+=o-i,this._dollyControlCoord.set(t,n))},void 0===du&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=(new du.Quaternion).setFromUnitVectors(this._camera.up,pu),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Hc.NONE,this._target=new du.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new du.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new du.Spherical).setFromVector3(gu.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new du.Vector3,new du.Vector3,new du.Vector3,new du.Vector3],this._updateNearPlaneCorners(),this._boundary=new du.Box3(new du.Vector3(-1/0,-1/0,-1/0),new du.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new du.Vector2,this.mouseButtons={left:Hc.ROTATE,middle:Hc.DOLLY,right:Hc.TRUCK,wheel:Kc(this._camera)?Hc.DOLLY:Wc(this._camera)?Hc.ZOOM:Hc.NONE},this.touches={one:Hc.TOUCH_ROTATE,two:Kc(this._camera)?Hc.TOUCH_DOLLY_TRUCK:Wc(this._camera)?Hc.TOUCH_ZOOM_TRUCK:Hc.NONE,three:Hc.TOUCH_TRUCK};const r=new du.Vector2,i=new du.Vector2,o=new du.Vector2,a=e=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}const t="mouse"!==e.pointerType?null:(e.buttons&Lc)===Lc?Lc:(e.buttons&zc)===zc?zc:(e.buttons&Gc)===Gc?Gc:null;if(null!==t){const e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}if((e.buttons&Lc)===Lc&&this._lockedPointer)return;const n={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:t};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,m(e)},s=e=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}const t=(e.buttons&Lc)===Lc?Lc:(e.buttons&zc)===zc?zc:(e.buttons&Gc)===Gc?Gc:null;if(null!==t){const e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}const n={pointerId:1,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:(e.buttons&Lc)===Lc?Lc:(e.buttons&zc)===Lc?zc:(e.buttons&Gc)===Lc?Gc:null};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,m(e)},l=e=>{e.cancelable&&e.preventDefault();const t=e.pointerId,n=this._lockedPointer||this._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,this._state=0,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(e.buttons&Lc)===Lc)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(e.buttons&zc)===zc&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(e.buttons&Gc)===Gc&&(this._state=this._state|this.mouseButtons.right);v()}},c=e=>{const t=this._lockedPointer||this._findPointerById(1);t&&(t.clientX=e.clientX,t.clientY=e.clientY,t.deltaX=e.movementX,t.deltaY=e.movementY,this._state=0,(this._lockedPointer||(e.buttons&Lc)===Lc)&&(this._state=this._state|this.mouseButtons.left),(e.buttons&zc)===zc&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&Gc)===Gc&&(this._state=this._state|this.mouseButtons.right),v())},u=e=>{const t=this._findPointerById(e.pointerId);if(!t||t!==this._lockedPointer){if(t&&this._disposePointer(t),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=Hc.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=Hc.NONE;g()}},h=()=>{const e=this._findPointerById(1);e&&e===this._lockedPointer||(e&&this._disposePointer(e),this._state=Hc.NONE,g())};let d=-1;const f=e=>{if(!this._domElement)return;if(!this._enabled||this.mouseButtons.wheel===Hc.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Hc.ROTATE||this.mouseButtons.wheel===Hc.TRUCK){const e=performance.now();d-e<1e3&&this._getClientRect(this._elementRect),d=e}const t=uu?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?(e.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Hc.ROTATE:this._rotateInternal(e.deltaX,e.deltaY),this._isUserControllingRotate=!0;break;case Hc.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1),this._isUserControllingTruck=!0;break;case Hc.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0),this._isUserControllingOffset=!0;break;case Hc.DOLLY:this._dollyInternal(-n,r,i),this._isUserControllingDolly=!0;break;case Hc.ZOOM:this._zoomInternal(-n,r,i),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},p=t=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===e.ACTION.NONE){const e=t instanceof PointerEvent?t.pointerId:(MouseEvent,0),n=this._findPointerById(e);return n&&this._disposePointer(n),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),void this._domElement.ownerDocument.removeEventListener("mouseup",h)}t.preventDefault()}},m=e=>{if(!this._enabled)return;ou(this._activePointers,vu),this._getClientRect(this._elementRect),r.copy(vu),i.copy(vu);if(this._activePointers.length>=2){const e=vu.x-this._activePointers[1].clientX,t=vu.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t);o.set(0,n);const r=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);i.set(r,a)}if(this._state=0,e)if("pointerType"in e&&"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||(e.buttons&Lc)!==Lc||(this._state=this._state|this.mouseButtons.left),(e.buttons&zc)===zc&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&Gc)===Gc&&(this._state=this._state|this.mouseButtons.right);else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);(this._state&Hc.ROTATE)!==Hc.ROTATE&&(this._state&Hc.TOUCH_ROTATE)!==Hc.TOUCH_ROTATE&&(this._state&Hc.TOUCH_DOLLY_ROTATE)!==Hc.TOUCH_DOLLY_ROTATE&&(this._state&Hc.TOUCH_ZOOM_ROTATE)!==Hc.TOUCH_ZOOM_ROTATE||(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),(this._state&Hc.TRUCK)!==Hc.TRUCK&&(this._state&Hc.TOUCH_TRUCK)!==Hc.TOUCH_TRUCK&&(this._state&Hc.TOUCH_DOLLY_TRUCK)!==Hc.TOUCH_DOLLY_TRUCK&&(this._state&Hc.TOUCH_ZOOM_TRUCK)!==Hc.TOUCH_ZOOM_TRUCK||(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),(this._state&Hc.DOLLY)!==Hc.DOLLY&&(this._state&Hc.TOUCH_DOLLY)!==Hc.TOUCH_DOLLY&&(this._state&Hc.TOUCH_DOLLY_TRUCK)!==Hc.TOUCH_DOLLY_TRUCK&&(this._state&Hc.TOUCH_DOLLY_OFFSET)!==Hc.TOUCH_DOLLY_OFFSET&&(this._state&Hc.TOUCH_DOLLY_ROTATE)!==Hc.TOUCH_DOLLY_ROTATE||(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),(this._state&Hc.ZOOM)!==Hc.ZOOM&&(this._state&Hc.TOUCH_ZOOM)!==Hc.TOUCH_ZOOM&&(this._state&Hc.TOUCH_ZOOM_TRUCK)!==Hc.TOUCH_ZOOM_TRUCK&&(this._state&Hc.TOUCH_ZOOM_OFFSET)!==Hc.TOUCH_ZOOM_OFFSET&&(this._state&Hc.TOUCH_ZOOM_ROTATE)!==Hc.TOUCH_ZOOM_ROTATE||(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),(this._state&Hc.OFFSET)!==Hc.OFFSET&&(this._state&Hc.TOUCH_OFFSET)!==Hc.TOUCH_OFFSET&&(this._state&Hc.TOUCH_DOLLY_OFFSET)!==Hc.TOUCH_DOLLY_OFFSET&&(this._state&Hc.TOUCH_ZOOM_OFFSET)!==Hc.TOUCH_ZOOM_OFFSET||(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},v=()=>{if(!this._enabled)return;ou(this._activePointers,vu);const e=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,t=e?-e.deltaX:i.x-vu.x,n=e?-e.deltaY:i.y-vu.y;if(i.copy(vu),(this._state&Hc.ROTATE)!==Hc.ROTATE&&(this._state&Hc.TOUCH_ROTATE)!==Hc.TOUCH_ROTATE&&(this._state&Hc.TOUCH_DOLLY_ROTATE)!==Hc.TOUCH_DOLLY_ROTATE&&(this._state&Hc.TOUCH_ZOOM_ROTATE)!==Hc.TOUCH_ZOOM_ROTATE||(this._rotateInternal(t,n),this._isUserControllingRotate=!0),(this._state&Hc.DOLLY)===Hc.DOLLY||(this._state&Hc.ZOOM)===Hc.ZOOM){const e=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,t=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,i=this.dollyDragInverted?-1:1;(this._state&Hc.DOLLY)===Hc.DOLLY?(this._dollyInternal(i*n*lu,e,t),this._isUserControllingDolly=!0):(this._zoomInternal(i*n*lu,e,t),this._isUserControllingZoom=!0)}if((this._state&Hc.TOUCH_DOLLY)===Hc.TOUCH_DOLLY||(this._state&Hc.TOUCH_ZOOM)===Hc.TOUCH_ZOOM||(this._state&Hc.TOUCH_DOLLY_TRUCK)===Hc.TOUCH_DOLLY_TRUCK||(this._state&Hc.TOUCH_ZOOM_TRUCK)===Hc.TOUCH_ZOOM_TRUCK||(this._state&Hc.TOUCH_DOLLY_OFFSET)===Hc.TOUCH_DOLLY_OFFSET||(this._state&Hc.TOUCH_ZOOM_OFFSET)===Hc.TOUCH_ZOOM_OFFSET||(this._state&Hc.TOUCH_DOLLY_ROTATE)===Hc.TOUCH_DOLLY_ROTATE||(this._state&Hc.TOUCH_ZOOM_ROTATE)===Hc.TOUCH_ZOOM_ROTATE){const e=vu.x-this._activePointers[1].clientX,t=vu.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t),r=o.y-n;o.set(0,n);const a=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,s=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Hc.TOUCH_DOLLY)===Hc.TOUCH_DOLLY||(this._state&Hc.TOUCH_DOLLY_ROTATE)===Hc.TOUCH_DOLLY_ROTATE||(this._state&Hc.TOUCH_DOLLY_TRUCK)===Hc.TOUCH_DOLLY_TRUCK||(this._state&Hc.TOUCH_DOLLY_OFFSET)===Hc.TOUCH_DOLLY_OFFSET?(this._dollyInternal(r*lu,a,s),this._isUserControllingDolly=!0):(this._zoomInternal(r*lu,a,s),this._isUserControllingZoom=!0)}(this._state&Hc.TRUCK)!==Hc.TRUCK&&(this._state&Hc.TOUCH_TRUCK)!==Hc.TOUCH_TRUCK&&(this._state&Hc.TOUCH_DOLLY_TRUCK)!==Hc.TOUCH_DOLLY_TRUCK&&(this._state&Hc.TOUCH_ZOOM_TRUCK)!==Hc.TOUCH_ZOOM_TRUCK||(this._truckInternal(t,n,!1),this._isUserControllingTruck=!0),(this._state&Hc.OFFSET)!==Hc.OFFSET&&(this._state&Hc.TOUCH_OFFSET)!==Hc.TOUCH_OFFSET&&(this._state&Hc.TOUCH_DOLLY_OFFSET)!==Hc.TOUCH_DOLLY_OFFSET&&(this._state&Hc.TOUCH_ZOOM_OFFSET)!==Hc.TOUCH_ZOOM_OFFSET||(this._truckInternal(t,n,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},g=()=>{ou(this._activePointers,vu),i.copy(vu),(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",y),this._domElement.ownerDocument.addEventListener("pointerlockerror",A),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),m())},this.unlockPointer=()=>{null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",A))};const y=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},A=()=>{this.unlockPointer()};this._addAllEventListeners=e=>{this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),hu&&this._domElement.addEventListener("mousedown",s),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",p)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("mousedown",s),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",y),this._domElement.ownerDocument.removeEventListener("pointerlockerror",A))},this.cancel=()=>{this._state!==Hc.NONE&&(this._state=Hc.NONE,this._activePointers.length=0,g())},n&&this.connect(n),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Zc(e.width,0,1),this._interactiveArea.height=Zc(e.height,0,1),this._interactiveArea.x=Zc(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Zc(e.x,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=Zc(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=Zc(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||$c(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&$c(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Nc,this._changedDolly=0,this._dollyToNoClamp(Zc(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const t=this._collisionTest(),r=$c(t,this._spherical.radius);if(!(n>e)&&r)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,t)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const r=!t||$c(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(bu).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||$c(this._target.x,this._targetEnd.x,this.restThreshold)&&$c(this._target.y,this._targetEnd.y,this.restThreshold)&&$c(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Zc(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||$c(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),_u.setFromMatrixColumn(this._camera.matrix,0),wu.setFromMatrixColumn(this._camera.matrix,1),_u.multiplyScalar(e),wu.multiplyScalar(-t);const r=gu.copy(_u).add(wu),i=yu.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e,t=!1){gu.setFromMatrixColumn(this._camera.matrix,0),gu.crossVectors(this._camera.up,gu),gu.multiplyScalar(e);const n=yu.copy(this._targetEnd).add(gu);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return gu.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+gu.x,this._targetEnd.y+gu.y,this._targetEnd.z+gu.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const i=gu.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||$c(this._target.x,this._targetEnd.x,this.restThreshold)&&$c(this._target.y,this._targetEnd.y,this.restThreshold)&&$c(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,r=!1){const i=gu.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(i.x,i.y,i.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}={}){const s=[],l=e.isBox3?Tu.copy(e):Tu.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const c=eu(this._sphericalEnd.theta,Xc),u=eu(this._sphericalEnd.phi,Xc);s.push(this.rotateTo(c,u,t));const h=gu.setFromSpherical(this._sphericalEnd).normalize(),d=Ou.setFromUnitVectors(h,mu),f=$c(Math.abs(h.y),1);f&&d.multiply(Du.setFromAxisAngle(pu,c)),d.multiply(this._yAxisUpSpaceInverse);const p=Mu.makeEmpty();yu.copy(l.min).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.min).setX(l.max.x).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.min).setY(l.max.y).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.max).setZ(l.min.z).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.min).setZ(l.max.z).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.max).setY(l.min.y).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.max).setX(l.min.x).applyQuaternion(d),p.expandByPoint(yu),yu.copy(l.max).applyQuaternion(d),p.expandByPoint(yu),p.min.x-=r,p.min.y-=o,p.max.x+=i,p.max.y+=a,d.setFromUnitVectors(mu,h),f&&d.premultiply(Du.invert()),d.premultiply(this._yAxisUpSpace);const m=p.getSize(gu),v=p.getCenter(yu).applyQuaternion(d);if(Kc(this._camera)){const e=this.getDistanceToFitBox(m.x,m.y,m.z,n);s.push(this.moveTo(v.x,v.y,v.z,t)),s.push(this.dollyTo(e,t)),s.push(this.setFocalOffset(0,0,0,t))}else if(Wc(this._camera)){const e=this._camera,r=e.right-e.left,i=e.top-e.bottom,o=n?Math.max(r/m.x,i/m.y):Math.min(r/m.x,i/m.y);s.push(this.moveTo(v.x,v.y,v.z,t)),s.push(this.zoomTo(o,t)),s.push(this.setFocalOffset(0,0,0,t))}return Promise.all(s)}fitToSphere(t,n){const r=[],i=t instanceof du.Sphere?Ru.copy(t):e.createBoundingSphere(t,Ru);if(r.push(this.moveTo(i.center.x,i.center.y,i.center.z,n)),Kc(this._camera)){const e=this.getDistanceToFitSphere(i.radius);r.push(this.dollyTo(e,n))}else if(Wc(this._camera)){const e=this._camera.right-this._camera.left,t=this._camera.top-this._camera.bottom,o=2*i.radius,a=Math.min(e/o,t/o);r.push(this.zoomTo(a,n))}return r.push(this.setFocalOffset(0,0,0,n)),Promise.all(r)}setLookAt(e,t,n,r,i,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Nc,this._changedDolly=0;const s=yu.set(r,i,o),l=gu.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!a||$c(this._target.x,this._targetEnd.x,this.restThreshold)&&$c(this._target.y,this._targetEnd.y,this.restThreshold)&&$c(this._target.z,this._targetEnd.z,this.restThreshold)&&$c(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&$c(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&$c(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,t,n,r,i,o,a,s,l,c,u,h,d,f=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Nc,this._changedDolly=0;const p=gu.set(r,i,o),m=yu.set(e,t,n);Bu.setFromVector3(m.sub(p).applyQuaternion(this._yAxisUpSpace));const v=Au.set(c,u,h),g=yu.set(a,s,l);Su.setFromVector3(g.sub(v).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(v,d));const y=Su.theta-Bu.theta,A=Su.phi-Bu.phi,b=Su.radius-Bu.radius;this._sphericalEnd.set(Bu.radius+b*d,Bu.phi+A*d,Bu.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const _=!f||$c(this._target.x,this._targetEnd.x,this.restThreshold)&&$c(this._target.y,this._targetEnd.y,this.restThreshold)&&$c(this._target.z,this._targetEnd.z,this.restThreshold)&&$c(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&$c(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&$c(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(_)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const i=this.getPosition(gu),o=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=Zc(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||$c(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&$c(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&$c(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),_u.setFromMatrixColumn(this._camera.matrixWorldInverse,0),wu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Cu.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=gu.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);_u.multiplyScalar(o.x),wu.multiplyScalar(o.y),Cu.multiplyScalar(o.z),gu.copy(_u).add(wu).add(Cu),gu.z=gu.z+i,this.dollyTo(i,!1),this.setFocalOffset(-gu.x,gu.y,-gu.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){null!==e?(this._viewport=this._viewport||new du.Vector4,"number"==typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}getDistanceToFitBox(e,t,n,r=!1){if(au(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*Qc,a=this._camera.aspect;return.5*((r?i>a:i<a)?t:e/a)/Math.tan(.5*o)+.5*n}getDistanceToFitSphere(e){if(au(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Qc,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}getTarget(e,t=!0){return(e&&e.isVector3?e:new du.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new du.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof du.Spherical?e:new du.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new du.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Vc,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Vc),this._spherical.theta+=Vc*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Vc)}reset(e=!1){if(!$c(this._camera.up.x,this._cameraUp0.x)||!$c(this._camera.up.y,this._cameraUp0.y)||!$c(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const e=this.getPosition(gu);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,pu),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=gu.subVectors(this._target,this._camera.position).normalize(),t=yu.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();const n=this.getPosition(gu);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=Eu.subVectors(this._targetEnd,this._target),o=xu.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(qc(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=ru(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,t,1/0,e),this._needsUpdate=!0}if(qc(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=ru(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,t,1/0,e),this._needsUpdate=!0}if(qc(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const t=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=ru(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,t,this.maxSpeed,e),this._needsUpdate=!0}if(qc(i.x)&&qc(i.y)&&qc(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const t=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;iu(this._target,this._targetEnd,this._targetVelocity,t,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(qc(o.x)&&qc(o.y)&&qc(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const t=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;iu(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,t,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(qc(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const t=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=ru(this._zoom,this._zoomEnd,this._zoomVelocity,t,1/0,e)}if(this.dollyToCursor)if(Kc(this._camera)&&0!==this._changedDolly){const e=this._spherical.radius-this._lastDistance,t=this._camera,n=this._getCameraDirection(bu),r=gu.copy(n).cross(t.up).normalize();0===r.lengthSq()&&(r.x=1);const i=yu.crossVectors(r,n),o=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*Qc*.5),a=(this._sphericalEnd.radius-e-this._sphericalEnd.radius)/this._sphericalEnd.radius,s=Au.copy(this._targetEnd).add(r.multiplyScalar(this._dollyControlCoord.x*o*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*o)),l=gu.copy(this._targetEnd).lerp(s,a),c=this._lastDollyDirection===jc&&this._spherical.radius<=this.minDistance,u=this._lastDollyDirection===Jc&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(c||u)){this._sphericalEnd.radius-=e,this._spherical.radius-=e;const t=yu.copy(n).multiplyScalar(-e);l.add(t)}this._boundary.clampPoint(l,l);const h=yu.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedDolly-=e,qc(this._changedDolly)&&(this._changedDolly=0)}else if(Wc(this._camera)&&0!==this._changedZoom){const e=this._zoom-this._lastZoom,t=this._camera,n=gu.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),r=yu.set(0,0,-1).applyQuaternion(t.quaternion),i=Au.copy(n).add(r.multiplyScalar(-n.dot(t.up))),o=-(this._zoom-e-this._zoom)/this._zoom,a=this._getCameraDirection(bu),s=this._targetEnd.dot(a),l=gu.copy(this._targetEnd).lerp(i,o),c=l.dot(a),u=a.multiplyScalar(c-s);l.sub(u),this._boundary.clampPoint(l,l);const h=yu.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedZoom-=e,qc(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const s=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,s),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);(!qc(this._focalOffset.x)||!qc(this._focalOffset.y)||!qc(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),_u.setFromMatrixColumn(this._camera.matrix,0),wu.setFromMatrixColumn(this._camera.matrix,1),Cu.setFromMatrixColumn(this._camera.matrix,2),_u.multiplyScalar(this._focalOffset.x),wu.multiplyScalar(-this._focalOffset.y),Cu.multiplyScalar(this._focalOffset.z),gu.copy(_u).add(wu).add(Cu),this._camera.position.add(gu)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),gu.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const l=this._needsUpdate;return l&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):l?(this.dispatchEvent({type:"update"}),qc(t,this.restThreshold)&&qc(n,this.restThreshold)&&qc(r,this.restThreshold)&&qc(i.x,this.restThreshold)&&qc(i.y,this.restThreshold)&&qc(i.z,this.restThreshold)&&qc(o.x,this.restThreshold)&&qc(o.y,this.restThreshold)&&qc(o.z,this.restThreshold)&&qc(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!l&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=l,this._needsUpdate=!1,l}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:tu(this.maxDistance),minZoom:this.minZoom,maxZoom:tu(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:tu(this.maxPolarAngle),minAzimuthAngle:tu(this.minAzimuthAngle),maxAzimuthAngle:tu(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:gu.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=nu(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=nu(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=nu(n.maxPolarAngle),this.minAzimuthAngle=nu(n.minAzimuthAngle),this.maxAzimuthAngle=nu(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),Bu.setFromVector3(gu.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Bu.theta,Bu.phi,t),this.dollyTo(Bu.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){this._domElement?console.warn("camera-controls is already connected."):(e.setAttribute("data-camera-controls-version","2.7.0"),this._addAllEventListeners(e))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find((t=>t.pointerId===e))}_findPointerByMouseButton(e){return this._activePointers.find((t=>t.mouseButton===e))}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(0===r)return e;const i=yu.copy(t).add(e),o=this._boundary.clampPoint(i,Au).sub(i),a=o.lengthSq();if(0===a)return e.add(t);if(a===r)return e;if(0===n)return e.add(t).add(o);{const r=1+n*a/t.dot(o);return e.add(yu.copy(t).multiplyScalar(r)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Kc(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*Qc,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(Wc(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(au(this._camera,"_collisionTest"))return e;const t=this._getTargetDirection(bu);Fu.lookAt(fu,t,this._camera.up);for(let n=0;n<4;n++){const r=yu.copy(this._nearPlaneCorners[n]);r.applyMatrix4(Fu);const i=Au.addVectors(this._target,r);Uu.set(i,t),Uu.far=this._spherical.radius+1;const o=Uu.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((e=>{const t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)})))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new du.Sphere){const n=t,r=n.center;Tu.makeEmpty(),e.traverseVisible((e=>{e.isMesh&&Tu.expandByObject(e)})),Tu.getCenter(r);let i=0;return e.traverseVisible((e=>{if(!e.isMesh)return;const t=e,n=t.geometry.clone();n.applyMatrix4(t.matrixWorld);const o=n.attributes.position;for(let a=0,s=o.count;a<s;a++)gu.fromBufferAttribute(o,a),i=Math.max(i,r.distanceToSquared(gu))})),n.radius=Math.sqrt(i),n}};const ku=t.forwardRef(((e,n)=>{t.useMemo((()=>{const e={Box3:Le,MathUtils:{clamp:_e.clamp},Matrix4:R,Quaternion:M,Raycaster:c,Sphere:H,Spherical:F,Vector2:u,Vector3:h,Vector4:O};Iu.install({THREE:e}),jt({CameraControlsImpl:Iu})}),[]);const{camera:i,domElement:o,makeDefault:a,onStart:s,onEnd:l,onChange:d,regress:f,...p}=e,m=Pn((e=>e.camera)),v=Pn((e=>e.gl)),g=Pn((e=>e.invalidate)),y=Pn((e=>e.events)),A=Pn((e=>e.setEvents)),b=Pn((e=>e.set)),_=Pn((e=>e.get)),w=Pn((e=>e.performance)),C=i||m,E=o||y.connected||v.domElement,x=t.useMemo((()=>new Iu(C)),[C]);return Ln(((e,t)=>{x.enabled&&x.update(t)}),-1),t.useEffect((()=>(x.connect(E),()=>{x.disconnect()})),[E,x]),t.useEffect((()=>{const e=e=>{g(),f&&w.regress(),d&&d(e)},t=e=>{s&&s(e)},n=e=>{l&&l(e)};return x.addEventListener("update",e),x.addEventListener("controlstart",t),x.addEventListener("controlend",n),x.addEventListener("control",e),x.addEventListener("transitionstart",e),x.addEventListener("wake",e),()=>{x.removeEventListener("update",e),x.removeEventListener("controlstart",t),x.removeEventListener("controlend",n),x.removeEventListener("control",e),x.removeEventListener("transitionstart",e),x.removeEventListener("wake",e)}}),[x,s,l,g,A,f,d]),t.useEffect((()=>{if(a){const e=_().controls;return b({controls:x}),()=>b({controls:e})}}),[a,x]),t.createElement("primitive",r({ref:n,object:x},p))}));function Pu(e,n,...r){const i=t.useRef(),o=Pn((e=>e.scene));return t.useLayoutEffect((()=>{let t;if(e&&null!=e&&e.current&&n&&(i.current=t=new n(e.current,...r)),t)return t.traverse((e=>e.raycast=()=>null)),o.add(t),()=>{i.current=void 0,o.remove(t),null==t.dispose||t.dispose()}}),[o,n,e,...r]),Ln((()=>{var e;null==(e=i.current)||null==e.update||e.update()})),i}function Lu(e,n){const r=t.useRef(),[i]=t.useState((()=>n?n instanceof ie?{current:n}:n:r)),[o]=t.useState((()=>new at(void 0)));t.useLayoutEffect((()=>{n&&(i.current=n instanceof ie?n:n.current),o._root=i.current}));const a=t.useRef({}),s=t.useMemo((()=>{const t={};return e.forEach((e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(i.current)return a.current[e.name]||(a.current[e.name]=o.clipAction(e,i.current))},configurable:!0}))),{ref:i,clips:e,actions:t,names:e.map((e=>e.name)),mixer:o}}),[e]);return Ln(((e,t)=>o.update(t))),t.useEffect((()=>{const e=i.current;return()=>{a.current={},o.stopAllAction(),Object.values(s.actions).forEach((t=>{e&&o.uncacheAction(t,e)}))}}),[e]),s}const Gu=t.forwardRef((function({children:e,disable:n,disableX:i,disableY:o,disableZ:a,left:s,right:l,top:c,bottom:u,front:d,back:f,onCentered:p,precise:m=!0,cacheKey:v=0,...g},y){const A=t.useRef(null),b=t.useRef(null),_=t.useRef(null);return t.useLayoutEffect((()=>{b.current.matrixWorld.identity();const e=(new Le).setFromObject(_.current,m),t=new h,r=new H,v=e.max.x-e.min.x,g=e.max.y-e.min.y,y=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(r);const w=c?g/2:u?-g/2:0,C=s?-v/2:l?v/2:0,E=d?y/2:f?-y/2:0;b.current.position.set(n||i?0:-t.x+C,n||o?0:-t.y+w,n||a?0:-t.z+E),void 0!==p&&p({parent:A.current.parent,container:A.current,width:v,height:g,depth:y,boundingBox:e,boundingSphere:r,center:t,verticalAlignment:w,horizontalAlignment:C,depthAlignment:E})}),[v,p,c,s,d,n,i,o,a,m,l,u,f]),t.useImperativeHandle(y,(()=>A.current),[]),t.createElement("group",r({ref:A},g),t.createElement("group",{ref:b},t.createElement("group",{ref:_},e)))}));class zu extends ne{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`\n      uniform float time;\n      uniform float radius;\n      uniform float distort;\n      #define GLSLIFY 1\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\n      ${e.vertexShader}\n    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n        float updateTime = time / 50.0;\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\n        ")}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const Hu=t.forwardRef((({speed:e=1,...n},i)=>{const[o]=t.useState((()=>new zu));return Ln((t=>o&&(o.time=t.clock.getElapsedTime()*e))),t.createElement("primitive",r({object:o,ref:i,attach:"material"},n))}));class Nu extends j{constructor(e=new u){super({uniforms:{inputBuffer:new st(null),depthBuffer:new st(null),resolution:new st(new u),texelSize:new st(new u),halfTexelSize:new st(new u),kernel:new st(0),scale:new st(1),cameraNear:new st(0),cameraFar:new st(1),minDepthThreshold:new st(0),maxDepthThreshold:new st(1),depthScale:new st(0),depthToBlurRatioBias:new st(.25)},fragmentShader:`#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n        }`,vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:lt,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class ju{constructor({gl:e,resolution:t,width:n=500,height:r=500,minDepthThreshold:i=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:s=.25}){this.renderToScreen=!1,this.renderTargetA=new it(t,t,{minFilter:le,magFilter:le,stencilBuffer:!1,depthBuffer:!1,type:Je}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new Nu,this.convolutionMaterial.setTexelSize(1/n,1/r),this.convolutionMaterial.setResolution(new u(n,r)),this.scene=new g,this.camera=new w,this.convolutionMaterial.uniforms.minDepthThreshold.value=i,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=s,this.convolutionMaterial.defines.USE_DEPTH=a>0;const l=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),c=new Float32Array([0,0,2,0,0,2]),h=new d;h.setAttribute("position",new P(l,3)),h.setAttribute("uv",new P(c,2)),this.screen=new G(h,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,t,n){const r=this.scene,i=this.camera,o=this.renderTargetA,a=this.renderTargetB;let s=this.convolutionMaterial,l=s.uniforms;l.depthBuffer.value=t.depthTexture;const c=s.kernel;let u,h,d,f=t;for(h=0,d=c.length-1;h<d;++h)u=0==(1&h)?o:a,l.kernel.value=c[h],l.inputBuffer.value=f.texture,e.setRenderTarget(u),e.render(r,i),f=u;l.kernel.value=c[h],l.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(r,i)}}jt({MeshReflectorMaterialImpl:class extends fe{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var t;null!=(t=e.defines)&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),e.fragmentShader=`\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}}});const Ju=t.forwardRef((({mixBlur:e=0,mixStrength:n=1,resolution:i=256,blur:o=[0,0],minDepthThreshold:a=.9,maxDepthThreshold:s=1,depthScale:l=0,depthToBlurRatioBias:c=.25,mirror:u=0,distortion:d=1,mixContrast:f=1,distortionMap:p,reflectorOffset:m=0,...g},y)=>{const A=Pn((({gl:e})=>e)),b=Pn((({camera:e})=>e)),_=Pn((({scene:e})=>e)),w=(o=Array.isArray(o)?o:[o,o])[0]+o[1]>0,C=t.useRef(null),[E]=t.useState((()=>new K)),[x]=t.useState((()=>new h)),[B]=t.useState((()=>new h)),[S]=t.useState((()=>new h)),[T]=t.useState((()=>new R)),[M]=t.useState((()=>new h(0,0,-1))),[D]=t.useState((()=>new O)),[F]=t.useState((()=>new h)),[U]=t.useState((()=>new h)),[I]=t.useState((()=>new O)),[k]=t.useState((()=>new R)),[P]=t.useState((()=>new v)),L=t.useCallback((()=>{var e;const t=C.current.parent||(null==(e=C.current)?void 0:e.__r3f.parent);if(!t)return;if(B.setFromMatrixPosition(t.matrixWorld),S.setFromMatrixPosition(b.matrixWorld),T.extractRotation(t.matrixWorld),x.set(0,0,1),x.applyMatrix4(T),B.addScaledVector(x,m),F.subVectors(B,S),F.dot(x)>0)return;F.reflect(x).negate(),F.add(B),T.extractRotation(b.matrixWorld),M.set(0,0,-1),M.applyMatrix4(T),M.add(S),U.subVectors(B,M),U.reflect(x).negate(),U.add(B),P.position.copy(F),P.up.set(0,1,0),P.up.applyMatrix4(T),P.up.reflect(x),P.lookAt(U),P.far=b.far,P.updateMatrixWorld(),P.projectionMatrix.copy(b.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(P.projectionMatrix),k.multiply(P.matrixWorldInverse),k.multiply(t.matrixWorld),E.setFromNormalAndCoplanarPoint(x,B),E.applyMatrix4(P.matrixWorldInverse),D.set(E.normal.x,E.normal.y,E.normal.z,E.constant);const n=P.projectionMatrix;I.x=(Math.sign(D.x)+n.elements[8])/n.elements[0],I.y=(Math.sign(D.y)+n.elements[9])/n.elements[5],I.z=-1,I.w=(1+n.elements[10])/n.elements[14],D.multiplyScalar(2/D.dot(I)),n.elements[2]=D.x,n.elements[6]=D.y,n.elements[10]=D.z+1,n.elements[14]=D.w}),[b,m]),[G,z,H,N]=t.useMemo((()=>{const t={minFilter:le,magFilter:le,type:Je},r=new it(i,i,t);r.depthBuffer=!0,r.depthTexture=new ot(i,i),r.depthTexture.format=ct,r.depthTexture.type=ut;const h=new it(i,i,t);return[r,h,new ju({gl:A,resolution:i,width:o[0],height:o[1],minDepthThreshold:a,maxDepthThreshold:s,depthScale:l,depthToBlurRatioBias:c}),{mirror:u,textureMatrix:k,mixBlur:e,tDiffuse:r.texture,tDepth:r.depthTexture,tDiffuseBlur:h.texture,hasBlur:w,mixStrength:n,minDepthThreshold:a,maxDepthThreshold:s,depthScale:l,depthToBlurRatioBias:c,distortion:d,distortionMap:p,mixContrast:f,"defines-USE_BLUR":w?"":void 0,"defines-USE_DEPTH":l>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0}]}),[A,o,k,i,u,w,e,n,a,s,l,c,d,p,f]);return Ln((()=>{var e;const t=C.current.parent||(null==(e=C.current)?void 0:e.__r3f.parent);if(!t)return;t.visible=!1;const n=A.xr.enabled,r=A.shadowMap.autoUpdate;L(),A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(G),A.state.buffers.depth.setMask(!0),A.autoClear||A.clear(),A.render(_,P),w&&H.render(A,G,z),A.xr.enabled=n,A.shadowMap.autoUpdate=r,t.visible=!0,A.setRenderTarget(null)})),t.createElement("meshReflectorMaterialImpl",r({attach:"material",key:"key"+N["defines-USE_BLUR"]+N["defines-USE_DEPTH"]+N["defines-USE_DISTORTION"],ref:Pr([C,y])},N,g))})),Ku=gc({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class Wu extends ne{constructor(e=6,t=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new p("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=n=>{n.uniforms={...n.uniforms,...this.uniforms},this.anisotropy>0&&(n.defines.USE_ANISOTROPY=""),t?n.defines.USE_SAMPLER="":n.defines.USE_TRANSMISSION="",n.fragmentShader="\n      uniform float chromaticAberration;         \n      uniform float anisotropicBlur;      \n      uniform float time;\n      uniform float distortion;\n      uniform float distortionScale;\n      uniform float temporalDistortion;\n      uniform sampler2D buffer;\n\n      vec3 random3(vec3 c) {\n        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n        vec3 r;\n        r.z = fract(512.0*j);\n        j *= .125;\n        r.x = fract(512.0*j);\n        j *= .125;\n        r.y = fract(512.0*j);\n        return r-0.5;\n      }\n\n      float seed = 0.0;\n      uint hash( uint x ) {\n        x += ( x << 10u );\n        x ^= ( x >>  6u );\n        x += ( x <<  3u );\n        x ^= ( x >> 11u );\n        x += ( x << 15u );\n        return x;\n      }\n\n      // Compound versions of the hashing algorithm I whipped together.\n      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }\n      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }\n      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }\n\n      // Construct a float with half-open range [0:1] using low 23 bits.\n      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.\n      float floatConstruct( uint m ) {\n        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask\n        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32\n        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)\n        m |= ieeeOne;                          // Add fractional part to 1.0\n        float  f = uintBitsToFloat( m );       // Range [1:2]\n        return f - 1.0;                        // Range [0:1]\n      }\n\n      // Pseudo-random value in half-open range [0:1].\n      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }\n      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n\n      float rand() {\n        float result = random(vec3(gl_FragCoord.xy, seed));\n        seed += 1.0;\n        return result;\n      }\n\n      const float F3 =  0.3333333;\n      const float G3 =  0.1666667;\n\n      float snoise(vec3 p) {\n        vec3 s = floor(p + dot(p, vec3(F3)));\n        vec3 x = p - s + dot(s, vec3(G3));\n        vec3 e = step(vec3(0.0), x - x.yzx);\n        vec3 i1 = e*(1.0 - e.zxy);\n        vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n        vec3 x1 = x - i1 + G3;\n        vec3 x2 = x - i2 + 2.0*G3;\n        vec3 x3 = x - 1.0 + 3.0*G3;\n        vec4 w, d;\n        w.x = dot(x, x);\n        w.y = dot(x1, x1);\n        w.z = dot(x2, x2);\n        w.w = dot(x3, x3);\n        w = max(0.6 - w, 0.0);\n        d.x = dot(random3(s), x);\n        d.y = dot(random3(s + i1), x1);\n        d.z = dot(random3(s + i2), x2);\n        d.w = dot(random3(s + 1.0), x3);\n        w *= w;\n        w *= w;\n        d *= w;\n        return dot(d, vec4(52.0));\n      }\n\n      float snoiseFractal(vec3 m) {\n        return 0.5333333* snoise(m)\n              +0.2666667* snoise(2.0*m)\n              +0.1333333* snoise(4.0*m)\n              +0.0666667* snoise(8.0*m);\n      }\n"+n.fragmentShader,n.fragmentShader=n.fragmentShader.replace("#include <transmission_pars_fragment>","\n        #ifdef USE_TRANSMISSION\n          // Transmission code is based on glTF-Sampler-Viewer\n          // https://github.com/KhronosGroup/glTF-Sample-Viewer\n          uniform float _transmission;\n          uniform float thickness;\n          uniform float attenuationDistance;\n          uniform vec3 attenuationColor;\n          #ifdef USE_TRANSMISSIONMAP\n            uniform sampler2D transmissionMap;\n          #endif\n          #ifdef USE_THICKNESSMAP\n            uniform sampler2D thicknessMap;\n          #endif\n          uniform vec2 transmissionSamplerSize;\n          uniform sampler2D transmissionSamplerMap;\n          uniform mat4 modelMatrix;\n          uniform mat4 projectionMatrix;\n          varying vec3 vWorldPosition;\n          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n            // Direction of refracted light.\n            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n            // Compute rotation-independant scaling of the model matrix.\n            vec3 modelScale;\n            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n            // The thickness is specified in local space.\n            return normalize( refractionVector ) * thickness * modelScale;\n          }\n          float applyIorToRoughness( const in float roughness, const in float ior ) {\n            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n            // an IOR of 1.5 results in the default amount of microfacet refraction.\n            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n          }\n          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            \n            #ifdef USE_SAMPLER\n              #ifdef texture2DLodEXT\n                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #else\n                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #endif\n            #else\n              return texture2D(buffer, fragCoord.xy);\n            #endif\n          }\n          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n            if ( isinf( attenuationDistance ) ) {\n              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.\n              return radiance;\n            } else {\n              // Compute light attenuation using Beer's law.\n              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n              return transmittance * radiance;\n            }\n          }\n          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n            const in vec3 attenuationColor, const in float attenuationDistance ) {\n            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n            vec3 refractedRayExit = position + transmissionRay;\n            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n            vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n            refractionCoords += 1.0;\n            refractionCoords /= 2.0;\n            // Sample framebuffer to get pixel the refracted ray hits.\n            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n            // Get the specular component.\n            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n          }\n        #endif\n"),n.fragmentShader=n.fragmentShader.replace("#include <transmission_fragment>",`  \n        // Improve the refraction to use the world pos\n        material.transmission = _transmission;\n        material.transmissionAlpha = 1.0;\n        material.thickness = thickness;\n        material.attenuationDistance = attenuationDistance;\n        material.attenuationColor = attenuationColor;\n        #ifdef USE_TRANSMISSIONMAP\n          material.transmission *= texture2D( transmissionMap, vUv ).r;\n        #endif\n        #ifdef USE_THICKNESSMAP\n          material.thickness *= texture2D( thicknessMap, vUv ).g;\n        #endif\n        \n        vec3 pos = vWorldPosition;\n        vec3 v = normalize( cameraPosition - pos );\n        vec3 n = inverseTransformDirection( normal, viewMatrix );\n        vec3 transmission = vec3(0.0);\n        float transmissionR, transmissionB, transmissionG;\n        float randomCoords = rand();\n        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);\n        vec3 distortionNormal = vec3(0.0);\n        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;\n        if (distortion > 0.0) {\n          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));\n        }\n        for (float i = 0.0; i < ${e}.0; i ++) {\n          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);\n          transmissionR = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).r;\n          transmissionG = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).g;\n          transmissionB = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).b;\n          transmission.r += transmissionR;\n          transmission.g += transmissionG;\n          transmission.b += transmissionB;\n        }\n        transmission /= ${e}.0;\n        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n`)},Object.keys(this.uniforms).forEach((e=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})))}}const Vu=t.forwardRef((({buffer:e,transmissionSampler:n=!1,backside:i=!1,side:o=Fe,transmission:a=1,thickness:s=0,backsideThickness:l=0,samples:c=10,resolution:u,backsideResolution:h,background:d,anisotropy:f,anisotropicBlur:p,...m},v)=>{jt({MeshTransmissionMaterial:Wu});const g=t.useRef(null),[y]=t.useState((()=>new Ku)),b=Uc(h||u),_=Uc(u);let w,C,E;return Ln((e=>{g.current.time=e.clock.getElapsedTime(),g.current.buffer!==_.texture||n||(E=g.current.__r3f.parent,E&&(C=e.gl.toneMapping,w=e.scene.background,e.gl.toneMapping=A,d&&(e.scene.background=d),E.material=y,i&&(e.gl.setRenderTarget(b),e.gl.render(e.scene,e.camera),E.material=g.current,E.material.buffer=b.texture,E.material.thickness=l,E.material.side=et),e.gl.setRenderTarget(_),e.gl.render(e.scene,e.camera),E.material=g.current,E.material.thickness=s,E.material.side=o,E.material.buffer=_.texture,e.scene.background=w,e.gl.setRenderTarget(null),e.gl.toneMapping=C))})),t.useImperativeHandle(v,(()=>g.current),[]),t.createElement("meshTransmissionMaterial",r({args:[c,n],ref:g},m,{buffer:e||_.texture,_transmission:a,anisotropicBlur:null!=p?p:f,transmission:n?a:0,thickness:s,side:o}))}));function Xu(e,t,n){t.traverse((t=>{t.material&&(e.properties.remove(t.material),null==t.material.dispose||t.material.dispose())})),e.info.programs.length=0,e.compile(t,n)}function Yu({focus:e=0,samples:n=10,size:r=25}){const i=Pn((e=>e.gl)),o=Pn((e=>e.scene)),a=Pn((e=>e.camera));return t.useEffect((()=>{const t=qe.shadowmap_pars_fragment;return qe.shadowmap_pars_fragment=qe.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n"+(({focus:e=0,size:t=25,samples:n=10}={})=>`\n#define PENUMBRA_FILTER_SIZE float(${t})\n#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\nvec3 randRGB(vec2 uv) {\n  return vec3(\n    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n  );\n}\n\nvec3 lowPassRandRGB(vec2 uv) {\n  // 3x3 convolution (average)\n  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n  vec3 result = vec3(0);\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n  result *= 0.111111111; // 1.0 / 9.0\n  return result;\n}\nvec3 highPassRandRGB(vec2 uv) {\n  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n  // hp(x) = x - lp(x)\n  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n}\n\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n  return (zReceiver - zBlocker) / zBlocker;\n}\nfloat findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n  float blockerDepthSum = float(${e});\n  float blockers = 0.0;\n\n  int j = 0;\n  vec2 offset = vec2(0.);\n  float depth = 0.;\n\n  #pragma unroll_loop_start\n  for(int i = 0; i < ${n}; i ++) {\n    offset = (vogelDiskSample(j, ${n}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n    if (depth < compare) {\n      blockerDepthSum += depth;\n      blockers++;\n    }\n    j++;\n  }\n  #pragma unroll_loop_end\n\n  if (blockers > 0.0) {\n    return blockerDepthSum / blockers;\n  }\n  return -1.0;\n}\n\n        \nfloat vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n  float shadow = 0.0f;\n  int j = 0;\n  vec2 vogelSample = vec2(0.0);\n  vec2 offset = vec2(0.0);\n  #pragma unroll_loop_start\n  for (int i = 0; i < ${n}; i++) {\n    vogelSample = vogelDiskSample(j, ${n}, angle) * texelSize;\n    offset = vogelSample * (1.0 + filterRadius * float(${t}));\n    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    j++;\n  }\n  #pragma unroll_loop_end\n  return shadow * 1.0 / ${n}.0;\n}\n\nfloat PCSS (sampler2D shadowMap, vec4 coords) {\n  vec2 uv = coords.xy;\n  float zReceiver = coords.z; // Assumed to be eye-space z in this code\n  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n  if (avgBlockerDepth == -1.0) {\n    return 1.0;\n  }\n  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n}`)({size:r,samples:n,focus:e})).replace("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),Xu(i,o,a),()=>{qe.shadowmap_pars_fragment=t,Xu(i,o,a)}}),[e,r,n]),null}const Qu=function(e,n){const i=e+"Geometry";return t.forwardRef((({args:e,children:o,...a},s)=>{const l=t.useRef(null);return t.useImperativeHandle(s,(()=>l.current)),t.useLayoutEffect((()=>{null==n||n(l.current)})),t.createElement("mesh",r({ref:l},a),t.createElement(i,{attach:"geometry",args:e}),o)}))}("box"),Zu=t.forwardRef((({children:e,enabled:n=!0,speed:r=1,rotationIntensity:i=1,floatIntensity:o=1,floatingRange:a=[-.1,.1],...s},l)=>{const c=t.useRef(null),u=t.useRef(1e4*Math.random());return Ln((e=>{var t,s;if(!n||0===r)return;const l=u.current+e.clock.getElapsedTime();c.current.rotation.x=Math.cos(l/4*r)/8*i,c.current.rotation.y=Math.sin(l/4*r)/8*i,c.current.rotation.z=Math.sin(l/4*r)/20*i;let h=Math.sin(l/4*r)/10;h=_e.mapLinear(h,-.1,.1,null!==(t=null==a?void 0:a[0])&&void 0!==t?t:-.1,null!==(s=null==a?void 0:a[1])&&void 0!==s?s:.1),c.current.position.y=h*o,c.current.updateMatrix()})),t.createElement("group",s,t.createElement("group",{ref:Pr([c,l]),matrixAutoUpdate:!1},e))})),qu={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},$u="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",eh=e=>Array.isArray(e);function th({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n,encoding:r,extensions:i}={}){var o;let a,s=null,l=!1;if(n){if(!(n in qu))throw new Error("Preset must be one of: "+Object.keys(qu).join(", "));e=qu[n],t=$u}if(l=eh(e),a=eh(e)?"cube":e.startsWith("data:application/exr")?"exr":e.startsWith("data:application/hdr")?"hdr":null==(o=e.split(".").pop())||null==(o=o.split("?"))||null==(o=o.shift())?void 0:o.toLowerCase(),s=l?ft:"hdr"===a?Hs:"exr"===a?js:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+e);const c=Hn(s,l?[e]:e,(e=>{null==e.setPath||e.setPath(t),i&&i(e)})),u=l?c[0]:c;u.mapping=l?ht:dt;return"colorSpace"in u?u.colorSpace=(null!=r?r:l)?"srgb":"srgb-linear":u.encoding=(null!=r?r:l)?3001:3e3,u}const nh=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function rh(e,t,n,r,i=0){const o=nh(t||n),a=o.background,s=o.environment,l=o.backgroundBlurriness||0;return"only"!==e&&(o.environment=r),e&&(o.background=r),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=i),()=>{"only"!==e&&(o.environment=s),e&&(o.background=a),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=l)}}function ih({scene:e,background:n=!1,blur:r,map:i}){const o=Pn((e=>e.scene));return t.useLayoutEffect((()=>{if(i)return rh(n,e,o,i,r)}),[o,e,i,n,r]),null}function oh({background:e=!1,scene:n,blur:r,...i}){const o=th(i),a=Pn((e=>e.scene));return t.useLayoutEffect((()=>rh(e,n,a,o,r)),[o,e,n,a,r]),null}function ah({children:e,near:n=1,far:r=1e3,resolution:i=256,frames:o=1,map:a,background:s=!1,blur:l,scene:c,files:u,path:h,preset:d,extensions:f}){const p=Pn((e=>e.gl)),m=Pn((e=>e.scene)),v=t.useRef(null),[y]=t.useState((()=>new g)),A=t.useMemo((()=>{const e=new pt(i);return e.texture.type=Je,e}),[i]);t.useLayoutEffect((()=>(1===o&&v.current.update(p,y),rh(s,c,m,A.texture,l))),[e,y,A.texture,c,m,s,o,p]);let b=1;return Ln((()=>{(o===1/0||b<o)&&(v.current.update(p,y),b++)})),t.createElement(t.Fragment,null,qn(t.createElement(t.Fragment,null,e,t.createElement("cubeCamera",{ref:v,args:[n,r,A]}),u||d?t.createElement(oh,{background:!0,files:u,preset:d,path:h,extensions:f}):a?t.createElement(ih,{background:!0,map:a,extensions:f}):null),y))}function sh(e){var n,i,o,a;const s=th(e),l=e.map||s;t.useMemo((()=>jt({GroundProjectedEnvImpl:Ta})),[]);const c=t.useMemo((()=>[l]),[l]),u=null==(n=e.ground)?void 0:n.height,h=null==(i=e.ground)?void 0:i.radius,d=null!==(o=null==(a=e.ground)?void 0:a.scale)&&void 0!==o?o:1e3;return t.createElement(t.Fragment,null,t.createElement(ih,r({},e,{map:l})),t.createElement("groundProjectedEnvImpl",{args:c,scale:d,height:u,radius:h}))}function lh(e){return e.ground?t.createElement(sh,e):e.map?t.createElement(ih,e):e.children?t.createElement(ah,e):t.createElement(oh,e)}const ch=t.forwardRef((({scale:e=10,frames:n=1/0,opacity:i=1,width:o=1,height:a=1,blur:s=1,near:l=0,far:c=10,resolution:u=512,smooth:h=!0,color:d="#000000",depthWrite:f=!1,renderOrder:m,...v},g)=>{const y=t.useRef(null),A=Pn((e=>e.scene)),b=Pn((e=>e.gl)),_=t.useRef(null);o*=Array.isArray(e)?e[0]:e||1,a*=Array.isArray(e)?e[1]:e||1;const[w,C,E,x,B,S,T]=t.useMemo((()=>{const e=new it(u,u),t=new it(u,u);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const n=new rt(o,a).rotateX(Math.PI/2),r=new G(n),i=new Ye;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new p(d)}},e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const s=new j(Us),l=new j(Is);return l.depthTest=s.depthTest=!1,[e,n,i,r,s,l,t]}),[u,o,a,e,d]),M=e=>{x.visible=!0,x.material=B,B.uniforms.tDiffuse.value=w.texture,B.uniforms.h.value=1*e/256,b.setRenderTarget(T),b.render(x,_.current),x.material=S,S.uniforms.tDiffuse.value=T.texture,S.uniforms.v.value=1*e/256,b.setRenderTarget(w),b.render(x,_.current),x.visible=!1};let R,O,D=0;return Ln((()=>{_.current&&(n===1/0||D<n)&&(D++,R=A.background,O=A.overrideMaterial,y.current.visible=!1,A.background=null,A.overrideMaterial=E,b.setRenderTarget(w),b.render(A,_.current),M(s),h&&M(.4*s),b.setRenderTarget(null),y.current.visible=!0,A.overrideMaterial=O,A.background=R)})),t.useImperativeHandle(g,(()=>y.current),[]),t.createElement("group",r({"rotation-x":Math.PI/2},v,{ref:y}),t.createElement("mesh",{renderOrder:m,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},t.createElement("meshBasicMaterial",{transparent:!0,map:w.texture,opacity:i,depthWrite:f})),t.createElement("orthographicCamera",{ref:_,args:[-o/2,o/2,a/2,-a/2,l,c]}))}));const uh=t.createContext(null),hh=gc({color:new p,blend:2,alphaTest:.75,opacity:0,map:null},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }",`varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n   }`),dh=t.forwardRef((({children:e,temporal:n,frames:r=40,limit:i=1/0,blend:o=20,scale:a=10,opacity:s=1,alphaTest:l=.75,color:c="black",colorBlend:u=2,resolution:h=1024,toneMapped:d=!0,...f},p)=>{jt({SoftShadowMaterial:hh});const m=Pn((e=>e.gl)),v=Pn((e=>e.scene)),g=Pn((e=>e.camera)),y=Pn((e=>e.invalidate)),A=t.useRef(null),b=t.useRef(null),[_]=t.useState((()=>new ph(m,v,h)));t.useLayoutEffect((()=>{_.configure(A.current)}),[]);const w=t.useMemo((()=>({lights:new Map,temporal:!!n,frames:Math.max(2,r),blend:Math.max(2,r===1/0?o:r),count:0,getMesh:()=>A.current,reset:()=>{_.clear();const e=A.current.material;e.opacity=0,e.alphaTest=0,w.count=0},update:(e=1)=>{const t=A.current.material;w.temporal?(t.opacity=Math.min(s,t.opacity+s/w.blend),t.alphaTest=Math.min(l,t.alphaTest+l/w.blend)):(t.opacity=s,t.alphaTest=l),b.current.visible=!0,_.prepare();for(let n=0;n<e;n++)w.lights.forEach((e=>e.update())),_.update(g,w.blend);b.current.visible=!1,_.finish()}})),[_,g,v,n,r,o,s,l]);return t.useLayoutEffect((()=>{w.reset(),w.temporal||w.frames===1/0||w.update(w.blend)})),t.useImperativeHandle(p,(()=>w),[w]),Ln((()=>{(w.temporal||w.frames===1/0)&&w.count<w.frames&&w.count<i&&(y(),w.update(),w.count++)})),t.createElement("group",f,t.createElement("group",{traverse:()=>null,ref:b},t.createElement(uh.Provider,{value:w},e)),t.createElement("mesh",{receiveShadow:!0,ref:A,scale:a,rotation:[-Math.PI/2,0,0]},t.createElement("planeGeometry",null),t.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:d,color:c,blend:u,map:_.progressiveLightMap2.texture})))})),fh=t.forwardRef((({castShadow:e=!0,bias:n=.001,mapSize:i=512,size:o=5,near:a=.5,far:s=500,frames:l=1,position:c=[0,0,0],radius:u=1,amount:d=8,intensity:f=(parseInt(L.replace(/\D+/g,""))>=155?Math.PI:1),ambient:p=.5,...m},v)=>{const g=t.useRef(null),y=new h(...c).length(),A=t.useContext(uh),b=t.useCallback((()=>{let e;if(g.current)for(let t=0;t<g.current.children.length;t++)if(e=g.current.children[t],Math.random()>p)e.position.set(c[0]+_e.randFloatSpread(u),c[1]+_e.randFloatSpread(u),c[2]+_e.randFloatSpread(u));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math.random();e.position.set(Math.cos(t)*Math.cos(n)*y,Math.abs(Math.cos(t)*Math.sin(n)*y),Math.sin(t)*y)}}),[u,p,y,...c]),_=t.useMemo((()=>({update:b})),[b]);return t.useImperativeHandle(v,(()=>_),[_]),t.useLayoutEffect((()=>{const e=g.current;return A&&A.lights.set(e.uuid,_),()=>{A.lights.delete(e.uuid)}}),[A,_]),t.createElement("group",r({ref:g},m),Array.from({length:d},((r,l)=>t.createElement("directionalLight",{key:l,castShadow:e,"shadow-bias":n,"shadow-mapSize":[i,i],intensity:f/d},t.createElement("orthographicCamera",{attach:"shadow-camera",args:[-o,o,o,-o,a,s]})))))}));class ph{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new p,this.clearAlpha=0;const r={type:Je,magFilter:Be,minFilter:Be};this.progressiveLightMap1=new it(this.res,this.res,r),this.progressiveLightMap2=new it(this.res,this.res,r),this.discardMat=new Ku,this.targetMat=new mt({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=e=>{e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+"\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }",e.uniforms.previousShadowMap=this.previousShadowMap,e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse((e=>{!function(e){return!!e.geometry}(e)?function(e){return e.isLight}(e)&&this.lights.push({object:e,intensity:e.intensity}):this.meshes.push({object:e,material:e.material})}))}prepare(){this.lights.forEach((e=>e.object.intensity=0)),this.meshes.forEach((e=>e.object.material=this.discardMat))}finish(){this.lights.forEach((e=>e.object.intensity=e.intensity)),this.meshes.forEach((e=>e.object.material=e.material))}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,i=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=i}}class mh extends j{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new h(0,0,0)},lightColor:{value:new p("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new u(0,0)}},transparent:!0,depthWrite:!1,vertexShader:"\n      varying vec3 vNormal;\n      varying vec3 vWorldPosition;\n      varying float vViewZ;\n      varying float vIntensity;\n      uniform vec3 spotPosition;\n      uniform float attenuation;      \n\n      void main() {\n        // compute intensity\n        vNormal = normalize( normalMatrix * normal );\n        vec4 worldPosition\t= modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n        vec4 viewPosition = viewMatrix * worldPosition;\n        vViewZ = viewPosition.z;\n        float intensity\t= distance(worldPosition.xyz, spotPosition) / attenuation;\n        intensity\t= 1.0 - clamp(intensity, 0.0, 1.0);\n        vIntensity = intensity;        \n        // set gl_Position\n        gl_Position\t= projectionMatrix * viewPosition;\n\n      }",fragmentShader:`\n      #include <packing>\n\n      varying vec3 vNormal;\n      varying vec3 vWorldPosition;\n      uniform vec3 lightColor;\n      uniform vec3 spotPosition;\n      uniform float attenuation;\n      uniform float anglePower;\n      uniform sampler2D depth;\n      uniform vec2 resolution;\n      uniform float cameraNear;\n      uniform float cameraFar;\n      varying float vViewZ;\n      varying float vIntensity;\n      uniform float opacity;\n\n      float readDepth( sampler2D depthSampler, vec2 coord ) {\n        float fragCoordZ = texture2D( depthSampler, coord ).x;\n        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\n        return viewZ;\n      }\n\n      void main() {\n        float d = 1.0;\n        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;\n        if (isSoft) {\n          vec2 sUv = gl_FragCoord.xy / resolution;\n          d = readDepth(depth, sUv);\n        }\n        float intensity = vIntensity;\n        vec3 normal\t= vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n        float angleIntensity\t= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );\n        intensity\t*= angleIntensity;\n        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry\n        if (isSoft) {\n          intensity\t*= smoothstep(0., 1., vViewZ - d);\n        }\n        gl_FragColor = vec4(lightColor, intensity * opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n      }`})}}function vh({opacity:e=1,radiusTop:n,radiusBottom:r,depthBuffer:i,color:o="white",distance:a=5,angle:s=.15,attenuation:l=5,anglePower:c=5}){const u=t.useRef(null),d=Pn((e=>e.size)),f=Pn((e=>e.camera)),p=Pn((e=>e.viewport.dpr)),[m]=t.useState((()=>new mh)),[v]=t.useState((()=>new h));n=void 0===n?.1:n,r=void 0===r?7*s:r,Ln((()=>{m.uniforms.spotPosition.value.copy(u.current.getWorldPosition(v)),u.current.lookAt(u.current.parent.target.getWorldPosition(v))}));const g=t.useMemo((()=>{const e=new vt(n,r,a,128,64,!0);return e.applyMatrix4((new R).makeTranslation(0,-a/2,0)),e.applyMatrix4((new R).makeRotationX(-Math.PI/2)),e}),[a,n,r]);return t.createElement(t.Fragment,null,t.createElement("mesh",{ref:u,geometry:g,raycast:()=>null},t.createElement("primitive",{object:m,attach:"material","uniforms-opacity-value":e,"uniforms-lightColor-value":o,"uniforms-attenuation-value":l,"uniforms-anglePower-value":c,"uniforms-depth-value":i,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":i?[d.width*p,d.height*p]:[0,0]})))}const gh=t.forwardRef((({opacity:e=1,radiusTop:n,radiusBottom:i,depthBuffer:o,color:a="white",distance:s=5,angle:l=.15,attenuation:c=5,anglePower:u=5,volumetric:h=!0,debug:d=!1,children:f,...p},m)=>{const v=t.useRef(null);return t.createElement("group",null,d&&v.current&&t.createElement("spotLightHelper",{args:[v.current]}),t.createElement("spotLight",r({ref:Pr([m,v]),angle:l,color:a,distance:s,castShadow:!0},p),h&&t.createElement(vh,{debug:d,opacity:e,radiusTop:n,radiusBottom:i,depthBuffer:o,color:a,distance:s,angle:l,attenuation:c,anglePower:u})),f&&t.cloneElement(f,{spotlightRef:v,debug:d}))})),yh=t.forwardRef((({args:e,map:n,toneMapped:i=!1,color:o="white",form:a="rect",intensity:s=1,scale:l=1,target:c,children:u,...d},f)=>{const p=t.useRef(null);return t.useLayoutEffect((()=>{u||d.material||(Wn(p.current.material,{color:o}),p.current.material.color.multiplyScalar(s))}),[o,s,u,d.material]),t.useLayoutEffect((()=>{c&&p.current.lookAt(Array.isArray(c)?new h(...c):c)}),[c]),l=Array.isArray(l)&&2===l.length?[l[0],l[1],1]:l,t.createElement("mesh",r({ref:Pr([p,f]),scale:l},d),"circle"===a?t.createElement("ringGeometry",{args:[0,1,64]}):"ring"===a?t.createElement("ringGeometry",{args:[.5,1,64]}):"rect"===a?t.createElement("planeGeometry",null):t.createElement(a,{args:e}),u||(d.material?null:t.createElement("meshBasicMaterial",{toneMapped:i,map:n,side:T})))})),Ah=gc({time:0,pixelRatio:1}," uniform float pixelRatio;\n    uniform float time;\n    attribute float size;  \n    attribute float speed;  \n    attribute float opacity;\n    attribute vec3 noise;\n    attribute vec3 color;\n    varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;\n      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;\n      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;\n      vec4 viewPosition = viewMatrix * modelPosition;\n      vec4 projectionPostion = projectionMatrix * viewPosition;\n      gl_Position = projectionPostion;\n      gl_PointSize = size * 25. * pixelRatio;\n      gl_PointSize *= (1.0 / - viewPosition.z);\n      vColor = color;\n      vOpacity = opacity;\n    }",` varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n      float strength = 0.05 / distanceToCenter - 0.1;\n      gl_FragColor = vec4(vColor, strength * vOpacity);\n      #include <tonemapping_fragment>\n      #include <${parseInt(L.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n    }`),bh=e=>e&&e.constructor===Float32Array,_h=e=>e instanceof u||e instanceof h||e instanceof O,wh=e=>Array.isArray(e)?e:_h(e)?e.toArray():[e,e,e];function Ch(e,n,r){return t.useMemo((()=>{if(void 0!==n){if(bh(n))return n;if(n instanceof p){const t=Array.from({length:3*e},(()=>{return[(e=n).r,e.g,e.b];var e})).flat();return Float32Array.from(t)}if(_h(n)||Array.isArray(n)){const t=Array.from({length:3*e},(()=>wh(n))).flat();return Float32Array.from(t)}return Float32Array.from({length:e},(()=>n))}return Float32Array.from({length:e},r)}),[n])}const Eh=t.forwardRef((({noise:e=1,count:n=100,speed:i=1,opacity:o=1,scale:a=1,size:s,color:l,children:c,...u},h)=>{t.useMemo((()=>jt({SparklesImplMaterial:Ah})),[]);const d=t.useRef(null),f=Pn((e=>e.viewport.dpr)),m=wh(a),v=t.useMemo((()=>Float32Array.from(Array.from({length:n},(()=>m.map(_e.randFloatSpread))).flat())),[n,...m]),g=Ch(n,s,Math.random),y=Ch(n,o),A=Ch(n,i),b=Ch(3*n,e),_=Ch(void 0===l?3*n:n,bh(l)?l:new p(l),(()=>1));return Ln((e=>{d.current&&d.current.material&&(d.current.material.time=e.clock.elapsedTime)})),t.useImperativeHandle(h,(()=>d.current),[]),t.createElement("points",r({key:`particle-${n}-${JSON.stringify(a)}`},u,{ref:d}),t.createElement("bufferGeometry",null,t.createElement("bufferAttribute",{attach:"attributes-position",args:[v,3]}),t.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]}),t.createElement("bufferAttribute",{attach:"attributes-opacity",args:[y,1]}),t.createElement("bufferAttribute",{attach:"attributes-speed",args:[A,1]}),t.createElement("bufferAttribute",{attach:"attributes-color",args:[_,3]}),t.createElement("bufferAttribute",{attach:"attributes-noise",args:[b,3]})),c||t.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))}));var xh,Bh,Sh,Th,Mh,Rh={exports:{}};function Oh(){if(Th)return Sh;Th=1;var e=Bh?xh:(Bh=1,xh="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,Sh=function(){function r(t,n,r,i,o,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function i(){return r}r.isRequired=r;var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}function Dh(){return Mh||(Mh=1,Rh.exports=Oh()()),Rh.exports}const Fh=n(Dh());Fh.func.isRequired,Fh.arrayOf(Fh.oneOfType([Fh.element,Fh.func])).isRequired;const Uh=new R,Ih=new R,kh=[],Ph=new G;class Lh extends be{constructor(){super(),this.color=new p("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return null==(e=this.instance.current)?void 0:e.geometry}raycast(e,t){const n=this.instance.current;if(!n)return;if(!n.geometry||!n.material)return;Ph.geometry=n.geometry;const r=n.matrixWorld,i=n.userData.instances.indexOf(this.instanceKey);if(!(-1===i||i>n.count)){n.getMatrixAt(i,Uh),Ih.multiplyMatrices(r,Uh),Ph.matrixWorld=Ih,n.material instanceof f?Ph.material.side=n.material.side:Ph.material.side=n.material[0].side,Ph.raycast(e,kh);for(let e=0,n=kh.length;e<n;e++){const n=kh[e];n.instanceId=i,n.object=this,t.push(n)}kh.length=0}}}const Gh=t.createContext(null),zh=new R,Hh=new R,Nh=new R,jh=new h,Jh=new M,Kh=new h,Wh=t.forwardRef((({context:e,children:n,...i},o)=>{t.useMemo((()=>jt({PositionMesh:Lh})),[]);const a=t.useRef(),{subscribe:s,getParent:l}=t.useContext(e||Gh);return t.useLayoutEffect((()=>s(a)),[]),t.createElement("positionMesh",r({instance:l(),instanceKey:a,ref:Pr([o,a])},i),n)})),Vh=t.forwardRef((({children:e,range:n,limit:i=1e3,frames:o=1/0,...a},s)=>{const[{context:l,instance:c}]=t.useState((()=>{const e=t.createContext(null);return{context:e,instance:t.forwardRef(((n,i)=>t.createElement(Wh,r({context:e},n,{ref:i}))))}})),u=t.useRef(null),[h,d]=t.useState([]),[[f,p]]=t.useState((()=>{const e=new Float32Array(16*i);for(let t=0;t<i;t++)Nh.identity().toArray(e,16*t);return[e,new Float32Array([...new Array(3*i)].map((()=>1)))]}));t.useEffect((()=>{u.current.instanceMatrix.needsUpdate=!0}));let m=0,v=0;Ln((()=>{if(o===1/0||m<o){u.current.updateMatrix(),u.current.updateMatrixWorld(),zh.copy(u.current.matrixWorld).invert(),v=Math.min(i,void 0!==n?n:i,h.length),u.current.count=v,u.current.instanceMatrix.updateRange.count=16*v,u.current.instanceColor.updateRange.count=3*v;for(let e=0;e<h.length;e++){const t=h[e].current;t.matrixWorld.decompose(jh,Jh,Kh),Hh.compose(jh,Jh,Kh).premultiply(zh),Hh.toArray(f,16*e),u.current.instanceMatrix.needsUpdate=!0,t.color.toArray(p,3*e),u.current.instanceColor.needsUpdate=!0}m++}}));const g=t.useMemo((()=>({getParent:()=>u,subscribe:e=>(d((t=>[...t,e])),()=>d((t=>t.filter((t=>t.current!==e.current)))))})),[]);return t.createElement("instancedMesh",r({userData:{instances:h},matrixAutoUpdate:!1,ref:Pr([s,u]),args:[null,null,0],raycast:()=>null},a),t.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:z}),t.createElement("instancedBufferAttribute",{attach:"instanceColor",count:p.length/3,array:p,itemSize:3,usage:z}),"function"==typeof e?t.createElement(l.Provider,{value:g},e(c)):t.createElement(Gh.Provider,{value:g},e))}));function Xh({all:e,scene:n,camera:r}){const i=Pn((({gl:e})=>e)),o=Pn((({camera:e})=>e)),a=Pn((({scene:e})=>e));return t.useLayoutEffect((()=>{const t=[];e&&(n||a).traverse((e=>{!1===e.visible&&(t.push(e),e.visible=!0)})),i.compile(n||a,r||o);const s=new pt(128);new gt(.01,1e5,s).update(i,n||a),s.dispose(),t.forEach((e=>e.visible=!1))}),[]),null}const Yh=t.createContext(null);function Qh({iterations:e=10,ms:n=250,threshold:r=.75,step:i=.1,factor:o=.5,flipflops:a=1/0,bounds:s=(e=>e>100?[60,100]:[40,60]),onIncline:l,onDecline:c,onChange:u,onFallback:h,children:d}){const f=Math.pow(10,0),[p,m]=t.useState((()=>({fps:0,index:0,factor:o,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:e=>{const t=Symbol();return p.subscriptions.set(t,e.current),()=>{p.subscriptions.delete(t)}}})));let v=0;return Ln((()=>{const{frames:t,averages:o}=p;if(!p.fallback&&o.length<e){t.push(performance.now());const d=t[t.length-1]-t[0];if(d>=n){if(p.fps=Math.round(t.length/d*1e3*f)/f,p.refreshrate=Math.max(p.refreshrate,p.fps),o[p.index++%e]=p.fps,o.length===e){const[t,n]=s(p.refreshrate),d=o.filter((e=>e>=n)),f=o.filter((e=>e<t));d.length>e*r&&(p.factor=Math.min(1,p.factor+i),p.flipped++,l&&l(p),p.subscriptions.forEach((e=>e.onIncline&&e.onIncline(p)))),f.length>e*r&&(p.factor=Math.max(0,p.factor-i),p.flipped++,c&&c(p),p.subscriptions.forEach((e=>e.onDecline&&e.onDecline(p)))),v!==p.factor&&(v=p.factor,u&&u(p),p.subscriptions.forEach((e=>e.onChange&&e.onChange(p)))),p.flipped>a&&!p.fallback&&(p.fallback=!0,h&&h(p),p.subscriptions.forEach((e=>e.onFallback&&e.onFallback(p)))),p.averages=[]}p.frames=[]}}})),t.createElement(Yh.Provider,{value:p},d)}const Zh=t.forwardRef((({children:e,compute:n,width:i,height:o,samples:a=8,renderPriority:s=0,eventPriority:l=0,frames:c=1/0,stencilBuffer:u=!1,depthBuffer:h=!0,generateMipmaps:d=!1,...f},p)=>{const{size:m,viewport:v}=Pn(),y=Uc((i||m.width)*v.dpr,(o||m.height)*v.dpr,{samples:a,stencilBuffer:u,depthBuffer:h,generateMipmaps:d}),[A]=t.useState((()=>new g)),b=t.useCallback(((e,t,n)=>{var r,i;let o=null==(r=y.texture)?void 0:r.__r3f.parent;for(;o&&!(o instanceof ie);)o=o.__r3f.parent;if(!o)return!1;n.raycaster.camera||n.events.compute(e,n,null==(i=n.previousRoot)?void 0:i.getState());const[a]=n.raycaster.intersectObject(o);if(!a)return!1;const s=a.uv;if(!s)return!1;t.raycaster.setFromCamera(t.pointer.set(2*s.x-1,2*s.y-1),t.camera)}),[]);return t.useImperativeHandle(p,(()=>y.texture),[y]),t.createElement(t.Fragment,null,qn(t.createElement(qh,{renderPriority:s,frames:c,fbo:y},e,t.createElement("group",{onPointerOver:()=>null})),A,{events:{compute:n||b,priority:l}}),t.createElement("primitive",r({object:y.texture},f)))}));function qh({frames:e,renderPriority:n,children:r,fbo:i}){let o,a=0;return Ln((t=>{(e===1/0||a<e)&&(o=t.gl.autoClear,t.gl.autoClear=!0,t.gl.setRenderTarget(i),t.gl.render(t.scene,t.camera),t.gl.setRenderTarget(null),t.gl.autoClear=o,a++)}),n),t.createElement(t.Fragment,null,r)}const $h=t.forwardRef((({id:e=1,colorWrite:n=!1,depthWrite:i=!1,...o},a)=>{const s=t.useRef(null),l=t.useMemo((()=>({colorWrite:n,depthWrite:i,stencilWrite:!0,stencilRef:e,stencilFunc:yt,stencilFail:At,stencilZFail:At,stencilZPass:At})),[e,n,i]);return t.useLayoutEffect((()=>{Object.assign(s.current.material,l)})),t.useImperativeHandle(a,(()=>s.current),[]),t.createElement("mesh",r({ref:s,renderOrder:-e},o))})),ed=new p;function td(e){return"top"in e}function nd({canvasSize:e,scene:n,index:r,children:i,frames:o,rect:a,track:s}){const l=Pn((e=>e.get)),c=Pn((e=>e.camera)),u=Pn((e=>e.scene)),h=Pn((e=>e.setEvents));let d=0;return Ln((t=>{var r,l;(o===1/0||d<=o)&&(a.current=null==(r=s.current)?void 0:r.getBoundingClientRect(),d++);if(a.current){const{position:{left:r,bottom:o,width:s,height:h},isOffscreen:d}=function(e,t){const{right:n,top:r,left:i,bottom:o,width:a,height:s}=t,l=t.bottom<0||r>e.height||n<0||t.left>e.width;if(td(e)){const t=e.top+e.height-o;return{position:{width:a,height:s,left:i-e.left,top:r,bottom:t,right:n},isOffscreen:l}}return{position:{width:a,height:s,top:r,left:i,bottom:e.height-o,right:n},isOffscreen:l}}(e,a.current),f=s/h;(l=c)&&l.isOrthographicCamera?c.left===s/-2&&c.right===s/2&&c.top===h/2&&c.bottom===h/-2||(Object.assign(c,{left:s/-2,right:s/2,top:h/2,bottom:h/-2}),c.updateProjectionMatrix()):c.aspect!==f&&(c.aspect=f,c.updateProjectionMatrix()),t.gl.setViewport(r,o,s,h),t.gl.setScissor(r,o,s,h),t.gl.setScissorTest(!0),d?(t.gl.getClearColor(ed),t.gl.setClearColor(ed,t.gl.getClearAlpha()),t.gl.clear(!0,!0)):t.gl.render(i?u:n,c),t.gl.setScissorTest(!0)}}),r),t.useEffect((()=>{const e=l().events.connected;return h({connected:s.current}),()=>h({connected:e})}),[]),t.useEffect((()=>{td(e)||console.warn("Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.\n See https://github.com/pmndrs/drei/issues/944")}),[]),t.createElement(t.Fragment,null,i)}const rd=({track:e,index:n=1,frames:r=1/0,children:i})=>{var o,a;const s=t.useRef(null),{size:l,scene:c}=Pn(),[u]=t.useState((()=>new g)),h=t.useCallback(((t,n)=>{if(s.current&&e.current&&t.target===e.current){const{width:e,height:r,left:i,top:o}=s.current,a=t.clientX-i,l=t.clientY-o;n.pointer.set(a/e*2-1,-l/r*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)}}),[s,e]),[d,f]=t.useReducer((()=>!0),!1);return t.useEffect((()=>{var t;s.current=null==(t=e.current)?void 0:t.getBoundingClientRect(),f()}),[e]),t.createElement(t.Fragment,null,d&&qn(t.createElement(nd,{canvasSize:l,frames:r,scene:c,track:e,rect:s,index:n},i,t.createElement("group",{onPointerOver:()=>null})),u,{events:{compute:h,priority:n},size:{width:null==(o=s.current)?void 0:o.width,height:null==(a=s.current)?void 0:a.height}}))};function id(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ad(e){return function(e){if(Array.isArray(e))return od(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return od(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?od(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(e,t){return n=e-Math.floor(e/t)*t,r=0,i=t,Math.max(r,Math.min(i,n));var n,r,i}function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}new u,new u;var cd=function e(t,n,r){var i=this;ld(this,e),id(this,"dot2",(function(e,t){return i.x*e+i.y*t})),id(this,"dot3",(function(e,t,n){return i.x*e+i.y*t+i.z*n})),this.x=t,this.y=n,this.z=r},ud=[new cd(1,1,0),new cd(-1,1,0),new cd(1,-1,0),new cd(-1,-1,0),new cd(1,0,1),new cd(-1,0,1),new cd(1,0,-1),new cd(-1,0,-1),new cd(0,1,1),new cd(0,-1,1),new cd(0,1,-1),new cd(0,-1,-1)],hd=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],dd=new Array(512),fd=new Array(512);function pd(e){var t=function(e){if("number"==typeof e)e=Math.abs(e);else if("string"==typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?hd[t]^255&e:hd[t]^e>>8&255,dd[t]=dd[t+256]=n,fd[t]=fd[t+256]=ud[n%12]}}(0);new function e(t){var n=this;ld(this,e),id(this,"seed",0),id(this,"init",(function(e){n.seed=e,n.value=pd(e)})),id(this,"value",pd(this.seed)),this.init(t)}(Math.random());var md,vd,gd,yd,Ad=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function bd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ad,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,l="velocity_"+t;if(void 0===e.__damp&&(e.__damp={}),void 0===e.__damp[l]&&(e.__damp[l]=0),Math.abs(e[t]-n)<=s)return e[t]=n,!1;var c=2/(r=Math.max(1e-4,r)),u=a(c*i),h=e[t]-n,d=n,f=o*r;h=Math.min(Math.max(h,-f),f),n=e[t]-h;var p=(e.__damp[l]+c*h)*i;e.__damp[l]=(e.__damp[l]-c*p)*u;var m=n+(h+p)*u;return d-e[t]>0==m>d&&(m=d,e.__damp[l]=(m-d)/i),e[t]=m,!0}function _d(e,t,n,r,i,o,a,s){return bd(e,t,e[t]+function(e,t){var n=sd(t-e,2*Math.PI);return n>Math.PI&&(n-=2*Math.PI),n}(e[t],n),r,i,o,a,s)}var wd=new u;var Cd=new h;function Ed(e,t,n,r,i,o,a){return"number"==typeof t?Cd.setScalar(t):Array.isArray(t)?Cd.set(t[0],t[1],t[2]):Cd.copy(t),md=bd(e,"x",Cd.x,n,r,i,o,a),vd=bd(e,"y",Cd.y,n,r,i,o,a),gd=bd(e,"z",Cd.z,n,r,i,o,a),md||vd||gd}var xd=new O;var Bd=new D;var Sd=new p;var Td=new M,Md=new O,Rd=new O,Od=new O;function Dd(e,t,n,r,i,o,a){var s=e;Array.isArray(t)?Td.set(t[0],t[1],t[2],t[3]):Td.copy(t);var l=e.dot(Td)>0?1:-1;return Td.x*=l,Td.y*=l,Td.z*=l,Td.w*=l,md=bd(e,"x",Td.x,n,r,i,o,a),vd=bd(e,"y",Td.y,n,r,i,o,a),gd=bd(e,"z",Td.z,n,r,i,o,a),yd=bd(e,"w",Td.w,n,r,i,o,a),Md.set(e.x,e.y,e.z,e.w).normalize(),Rd.set(s.__damp.velocity_x,s.__damp.velocity_y,s.__damp.velocity_z,s.__damp.velocity_w),Od.copy(Md).multiplyScalar(Rd.dot(Md)/Md.dot(Md)),s.__damp.velocity_x-=Od.x,s.__damp.velocity_y-=Od.y,s.__damp.velocity_z-=Od.z,s.__damp.velocity_w-=Od.w,e.set(Md.x,Md.y,Md.z,Md.w),md||vd||gd||yd}var Fd=new F;var Ud=new R,Id=new h,kd=new M,Pd=new h;var Ld,Gd,zd=Object.freeze({__proto__:null,rsqw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},exp:Ad,damp:bd,dampAngle:_d,damp2:function(e,t,n,r,i,o,a){return"number"==typeof t?wd.setScalar(t):Array.isArray(t)?wd.set(t[0],t[1]):wd.copy(t),md=bd(e,"x",wd.x,n,r,i,o,a),vd=bd(e,"y",wd.y,n,r,i,o,a),md||vd},damp3:Ed,damp4:function(e,t,n,r,i,o,a){return"number"==typeof t?xd.setScalar(t):Array.isArray(t)?xd.set(t[0],t[1],t[2],t[3]):xd.copy(t),md=bd(e,"x",Cd.x,n,r,i,o,a),vd=bd(e,"y",Cd.y,n,r,i,o,a),gd=bd(e,"z",Cd.z,n,r,i,o,a),md||vd||gd},dampE:function(e,t,n,r,i,o,a){return Array.isArray(t)?Bd.set(t[0],t[1],t[2],t[3]):Bd.copy(t),md=_d(e,"x",Bd.x,n,r,i,o,a),vd=_d(e,"y",Bd.y,n,r,i,o,a),gd=_d(e,"z",Bd.z,n,r,i,o,a),md||vd||gd},dampC:function(e,t,n,r,i,o,a){return t instanceof p?Sd.copy(t):Array.isArray(t)?Sd.setRGB(t[0],t[1],t[2]):Sd.set(t),md=bd(e,"r",Sd.r,n,r,i,o,a),vd=bd(e,"g",Sd.g,n,r,i,o,a),gd=bd(e,"b",Sd.b,n,r,i,o,a),md||vd||gd},dampQ:Dd,dampS:function(e,t,n,r,i,o,a){return Array.isArray(t)?Fd.set(t[0],t[1],t[2]):Fd.copy(t),md=bd(e,"radius",Fd.radius,n,r,i,o,a),vd=_d(e,"phi",Fd.phi,n,r,i,o,a),gd=_d(e,"theta",Fd.theta,n,r,i,o,a),md||vd||gd},dampM:function(e,t,n,r,i,o,a){var s=e;return void 0===s.__damp&&(s.__damp={position:new h,rotation:new M,scale:new h},e.decompose(s.__damp.position,s.__damp.rotation,s.__damp.scale)),Array.isArray(t)?Ud.set.apply(Ud,ad(t)):Ud.copy(t),Ud.decompose(Id,kd,Pd),md=Ed(s.__damp.position,Id,n,r,i,o,a),vd=Dd(s.__damp.rotation,kd,n,r,i,o,a),gd=Ed(s.__damp.scale,Pd,n,r,i,o,a),e.compose(s.__damp.position,s.__damp.rotation,s.__damp.scale),md||vd||gd}}),Hd=[],Nd="ResizeObserver loop completed with undelivered notifications.";(Gd=Ld||(Ld={})).BORDER_BOX="border-box",Gd.CONTENT_BOX="content-box",Gd.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var jd,Jd=function(e){return Object.freeze(e)},Kd=function(e,t){this.inlineSize=e,this.blockSize=t,Jd(this)},Wd=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Jd(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Vd=function(e){return e instanceof SVGElement&&"getBBox"in e},Xd=function(e){if(Vd(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||e.getClientRects().length)},Yd=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},Qd="undefined"!=typeof window?window:{},Zd=new WeakMap,qd=/auto|scroll/,$d=/^tb|vertical/,ef=/msie|trident/i.test(Qd.navigator&&Qd.navigator.userAgent),tf=function(e){return parseFloat(e||"0")},nf=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new Kd((n?t:e)||0,(n?e:t)||0)},rf=Jd({devicePixelContentBoxSize:nf(),borderBoxSize:nf(),contentBoxSize:nf(),contentRect:new Wd(0,0,0,0)}),of=function(e,t){if(void 0===t&&(t=!1),Zd.has(e)&&!t)return Zd.get(e);if(Xd(e))return Zd.set(e,rf),rf;var n=getComputedStyle(e),r=Vd(e)&&e.ownerSVGElement&&e.getBBox(),i=!ef&&"border-box"===n.boxSizing,o=$d.test(n.writingMode||""),a=!r&&qd.test(n.overflowY||""),s=!r&&qd.test(n.overflowX||""),l=r?0:tf(n.paddingTop),c=r?0:tf(n.paddingRight),u=r?0:tf(n.paddingBottom),h=r?0:tf(n.paddingLeft),d=r?0:tf(n.borderTopWidth),f=r?0:tf(n.borderRightWidth),p=r?0:tf(n.borderBottomWidth),m=h+c,v=l+u,g=(r?0:tf(n.borderLeftWidth))+f,y=d+p,A=s?e.offsetHeight-y-e.clientHeight:0,b=a?e.offsetWidth-g-e.clientWidth:0,_=i?m+g:0,w=i?v+y:0,C=r?r.width:tf(n.width)-_-b,E=r?r.height:tf(n.height)-w-A,x=C+m+b+g,B=E+v+A+y,S=Jd({devicePixelContentBoxSize:nf(Math.round(C*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:nf(x,B,o),contentBoxSize:nf(C,E,o),contentRect:new Wd(h,l,C,E)});return Zd.set(e,S),S},af=function(e,t,n){var r=of(e,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case Ld.DEVICE_PIXEL_CONTENT_BOX:return a;case Ld.BORDER_BOX:return i;default:return o}},sf=function(e){var t=of(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Jd([t.borderBoxSize]),this.contentBoxSize=Jd([t.contentBoxSize]),this.devicePixelContentBoxSize=Jd([t.devicePixelContentBoxSize])},lf=function(e){if(Xd(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},cf=function(){var e=1/0,t=[];Hd.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new sf(t.target),i=lf(t.target);r.push(n),t.lastReportedSize=af(t.target,t.observedBox),i<e&&(e=i)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},uf=function(e){Hd.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(lf(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},hf=function(){var e,t=0;for(uf(t);Hd.some((function(e){return e.activeTargets.length>0}));)t=cf(),uf(t);return Hd.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Nd}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Nd),window.dispatchEvent(e)),t>0},df=[],ff=function(e){if(!jd){var t=0,n=document.createTextNode("");new MutationObserver((function(){return df.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),jd=function(){n.textContent="".concat(t?t--:t++)}}df.push(e),jd()},pf=0,mf={attributes:!0,characterData:!0,childList:!0,subtree:!0},vf=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],gf=function(e){return void 0===e&&(e=0),Date.now()+e},yf=!1,Af=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!yf){yf=!0;var n,r=gf(e);n=function(){var n=!1;try{n=hf()}finally{if(yf=!1,e=r-gf(),!pf)return;n?t.run(1e3):e>0?t.run(e):t.start()}},ff((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,mf)};document.body?t():Qd.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),vf.forEach((function(t){return Qd.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),vf.forEach((function(t){return Qd.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),bf=function(e){!pf&&e>0&&Af.start(),!(pf+=e)&&Af.stop()},_f=function(){function e(e,t){this.target=e,this.observedBox=t||Ld.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=af(this.target,this.observedBox,!0);return e=this.target,Vd(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),wf=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},Cf=new WeakMap,Ef=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},xf=function(){function e(){}return e.connect=function(e,t){var n=new wf(e,t);Cf.set(e,n)},e.observe=function(e,t,n){var r=Cf.get(e),i=0===r.observationTargets.length;Ef(r.observationTargets,t)<0&&(i&&Hd.push(r),r.observationTargets.push(new _f(t,n&&n.box)),bf(1),Af.schedule())},e.unobserve=function(e,t){var n=Cf.get(e),r=Ef(n.observationTargets,t),i=1===n.observationTargets.length;r>=0&&(i&&Hd.splice(Hd.indexOf(n),1),n.observationTargets.splice(r,1),bf(-1))},e.disconnect=function(e){var t=this,n=Cf.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Bf=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");xf.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yd(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");xf.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Yd(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");xf.unobserve(this,e)},e.prototype.disconnect=function(){xf.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Sf={},Tf=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Mf="%[a-f0-9]{2}",Rf=new RegExp("("+Mf+")|([^%]+?)","gi"),Of=new RegExp("("+Mf+")+","gi");function Df(e,t){try{return[decodeURIComponent(e.join(""))]}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Df(n),Df(r))}function Ff(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(Rf)||[],n=1;n<t.length;n++)t=(e=Df(t,n).join("")).match(Rf)||[];return e}}var Uf=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},r=Of.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var i=Ff(r[0]);i!==r[0]&&(n[r[0]]=i)}r=Of.exec(e)}n["%C2"]="�";for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}},If=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},kf=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n};!function(e){const t=Tf,n=Uf,r=If,i=kf;function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function s(e,t){return t.decode?n(e):e}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function h(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!i&&s(n,e).includes(e.arrayFormatSeparator);n=o?s(n,e):n;const a=i||o?n.split(e.arrayFormatSeparator).map((t=>s(t,e))):null===n?n:s(n,e);r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const o of e.split("&")){if(""===o)continue;let[e,a]=r(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:s(a,t),n(s(e,t),a,i)}for(const r of Object.keys(i)){const e=i[r];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=h(e[n],t);else i[r]=h(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=l(n):e[t]=n,e}),Object.create(null))}e.extract=u,e.parse=d,e.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[a(t,e),"[",i,"]"].join("")]:[...n,[a(t,e),"[",a(i,e),"]=",a(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[a(t,e),"[]"].join("")]:[...n,[a(t,e),"[]=",a(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[a(t,e),"=",a(r,e)].join("")]:[[n,a(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,a(t,e)]:[...n,[a(t,e),"=",a(r,e)].join("")]}}(t),i={};for(const o of Object.keys(e))n(o)||(i[o]=e[o]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map((n=>{const i=e[n];return void 0===i?"":null===i?a(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):a(n,t)+"="+a(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(u(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:s(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),s=Object.assign(o,t.query);let l=e.stringify(s,n);l&&(l=`?${l}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(u=`#${a(t.fragmentIdentifier,n)}`),`${r}${l}${u}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:a,fragmentIdentifier:s}=e.parseUrl(t,r);return e.stringifyUrl({url:o,query:i(a,n),fragmentIdentifier:s},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}}(Sf);var Pf=new Map,Lf=new WeakMap,Gf=0,zf=void 0;function Hf(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(Lf.has(n)||(Gf+=1,Lf.set(n,Gf.toString())),Lf.get(n)):"0"):e[t]}`;var n})).toString()}function Nf(e,t,n={},r=zf){if(void 0===window.IntersectionObserver&&void 0!==r){const i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:o,elements:a}=function(e){let t=Hf(e),n=Pf.get(t);if(!n){const r=new Map;let i;const o=new IntersectionObserver((t=>{t.forEach((t=>{var n;const o=t.isIntersecting&&i.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=r.get(t.target))||n.forEach((e=>{e(o,t)}))}))}),e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:r},Pf.set(t,n)}return n}(n);let s=a.get(e)||[];return a.has(e)||a.set(e,s),s.push(t),o.observe(e),function(){s.splice(s.indexOf(t),1),0===s.length&&(a.delete(e),o.unobserve(e)),0===a.size&&(o.disconnect(),Pf.delete(i))}}let jf=new Proxy({},{get:function(e,t){return e.hasOwnProperty(t)||(e[t]=Wf(t)),e[t]}});class Jf extends Array{constructor(e,t){if(!(t=Qf(t)).every((e=>"Number"===qf(e))))throw new TypeError("All arguments must be numbers.");if(t.length>1&&t.length!==e)throw new Error("Argument list must be empty, have a single number, or have a length equal to the dimension.");0===t.length&&(t=[0]),1===t.length&&"Number"===qf(t[0])&&(t=Array(e).fill(t[0])),e>1?super(...t):(super(1),this[0]=t[0]),Reflect.defineProperty(this,"pop",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"push",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"shift",{value:void 0,enumerable:!1}),Reflect.defineProperty(this,"unshift",{value:void 0,enumerable:!1})}get magnitude(){return this.pnorm(2)}div(e){Yf(e,this.dim,!0),"Number"===qf(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let n=0;n<this.length;++n)t[n]=this[n]/e[n];return jf[this.dim](t)}minus(e){Yf(e,this.dim,!0),"Number"===qf(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let n=0;n<this.dim;++n)t[n]=this[n]-e[n];return jf[this.dim](t)}neg(){return jf[this.dim](this.times(-1))}plus(e){Yf(e,this.dim,!0),"Number"===qf(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let n=0;n<this.dim;++n)t[n]=this[n]+e[n];return jf[this.dim](t)}pow(e){let t=[];for(let n=0;n<this.dim;++n)t[n]=Math.pow(this[n],e);return jf[this.dim](t)}times(e){Yf(e,this.dim,!0),"Number"===qf(e)&&(e=new Array(this.dim).fill(e));let t=[];for(let n=0;n<this.dim;++n)t[n]=this[n]*e[n];return jf[this.dim](t)}dot(e){Yf(e,this.dim);let t=0;for(let n=0;n<this.dim;++n)t+=this[n]*e[n];return t}normalize(){return this.div(this.magnitude)}pnorm(e){let t=0;for(let n=0;n<this.dim;++n)t+=Math.pow(Math.abs(this[n]),e);return Math.pow(t,1/e)}reflect(e){const t=e.normalize();return this.minus(t.times(2*this.dot(t)))}argmax(){const e=this.max();return this.reduce(((t,n,r)=>n===e?t.concat([r]):t),[])}argmin(){const e=this.min();return this.reduce(((t,n,r)=>n===e?t.concat([r]):t),[])}choose(e){if(!Array.isArray(e))throw new TypeError("Argument must be a list of indices.");if(!e.every((e=>e<this.dim&&Zf(e.toString()))))throw new RangeError("All elements of argument must be valid indices.");let t=[];return e.forEach((e=>t.push(this[e]))),jf[t.length](t)}copy(){return jf[this.dim](this)}equals(e){return e.length===this.dim&&e.every(((e,t)=>this[t]===e))}approximatelyEquals(e,t=1e-8){return e.length===this.dim&&e.every(((e,n)=>Math.abs(this[n]-e)<t))}max(){return Math.max(...this)}min(){return Math.min(...this)}sum(){return this.reduce(((e,t)=>e+t),0)}toArray(){return Array.from(this)}concat(...e){const t=super.concat.apply(this.toArray(),e);return jf[t.length](t)}filter(...e){const t=super.filter.apply(this.toArray(),e);return t.length>0?jf[t.length](t):t}map(...e){const t=super.map(...e);return t.every((e=>"Number"===qf(e)))?t:t.toArray()}slice(...e){const t=super.slice.apply(this.toArray(),e);return t.length>0?jf[t.length](t):t}splice(...e){let t=this.toArray();if(t.splice(...e),t.length!==this.dim)throw new Error("All removed elements must be replaced.");if(!t.every((e=>"Number"===qf(e))))throw new TypeError("All elements must be numbers.");t.forEach(((e,t)=>{this[t]=e}))}toString(){return this.reduce(((e,t,n)=>e+t+(n===this.dim-1?" ":", ")),"[ ")+"]"}}const Kf={set:function(e,t,n){if("length"===t)return!1;if(Zf(t)){if(Number(t)>=e.dim)throw new RangeError("Vector may not have more elements than dimension.");if("Number"!==qf(n))throw new TypeError("Vectors may only contain numbers.");return e[t]=n,!0}const r=Xf(t.toString());return!!(e.dim<=4&&r)&&(function(e,t,n,r){if(1===t.length){if("Number"!==qf(r))throw new TypeError("Must set to a number");return void(e[n[t]]=r)}if(!Array.isArray(r))throw new TypeError("Right-hand side must be an array.");if(t.length!==r.length)throw new TypeError("Right-hand side must have matching length.");if(!r.every((e=>"Number"===qf(e))))throw new TypeError("All new values must be numbers.");if(t.split("").some((t=>n[t]>=e.dim)))return;let i=!0;for(let o=0,a={};o<t.length;++o){if(a.hasOwnProperty(t[o])){i=!1;break}a[t[o]]=!0}if(!i)throw new SyntaxError("Swizzle assignment does not allow symbols to be repeated.");t.split("").map((e=>n[e])).forEach(((t,n)=>{e[t]=r[n]}))}(e,t.toString(),r,n),!0)},get:function(e,t){const n=Xf(t.toString());return e.dim<=4&&n?function(e,t,n){const r=t.length;if(1===r)return e[n[t]];let i=t.split("").reduce(((t,r)=>{let i=n[r];return t&&i<e.dim?t.concat([e[i]]):void 0}),[]);return i?new jf[r](...i):void 0}(e,t,n):e[t]}};function Wf(e){if(!((e=Number(e))in jf)){if(isNaN(e))throw new TypeError("Dimension must be coercible to a number.");if(e<=0)throw new RangeError("Dimension must be positive.");if(!Number.isInteger(e))throw new RangeError("Dimension must be positive.");let t="vec"+e,n={[t]:class extends Jf{constructor(...t){if(1===t.length&&t[0]instanceof Jf){if(t[0].dim>e)throw new TypeError("Cannot demote vectors.");t=function(e,t){return[...Array(t)].map(((t,n)=>n<e.length?e[n]:0))}(t[0].toArray(),e)}super(e,t),Reflect.defineProperty(this,"dim",{value:e,writable:!1,enumerable:!1})}}}[t],r=function(...e){let t=new n(...e);return Object.preventExtensions(t),new Proxy(t,Kf)};jf[e]=r}return jf[e]}const Vf=[{x:0,y:1,z:2,w:3},{r:0,g:1,b:2,a:3},{s:0,t:1,p:2,q:3}];function Xf(e){return Vf.find((t=>e.split("").every((e=>e in t))))}function Yf(e,t,n=!1){if(!(n&&"Number"===qf(e)||e.length&&e.length===t))throw new TypeError(`Invalid argument. Input must have matching dimension${n?"or be a scalar":""}.`)}function Qf(e){return e instanceof Array&&1===e.length&&e[0]instanceof Array?Qf(e[0]):e}function Zf(e){return!isNaN(e)&&Number(e).toString()===e&&Number.isInteger(Number(e))&&Number(e)>=0}function qf(e){return Object.prototype.toString.call(e).slice(8,-1)}const $f=n({getVecType:Wf,isVec:function(e){return e instanceof Jf},vec2:jf[2],vec3:jf[3],vec4:jf[4],add:function(...e){const t=e[0].dim;if(!e.every((e=>e.dim===t)))throw new TypeError("All vectors must have the same dimension.");return e.reduce(((e,t)=>e.plus(t)),jf[t]())},multiply:function(...e){const t=e[0].dim;if(!e.every((e=>e.dim===t)))throw new TypeError("All vectors must have the same dimension.");return e.reduce(((e,t)=>e.times(t)),jf[t](1))},lerp:function(e,t,n){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");return n=n<0?0:n>1?1:n,e.plus(t.minus(e).times(n))},slerp:function(e,t,n){if(e.dim!==t.dim)throw new TypeError("Vectors must have the same dimension.");n=n<0?0:n>1?1:n;let r=e.normalize().dot(t.normalize());r=r<-1?-1:r>1?1:r;const i=Math.acos(r)*n,o=t.minus(e.times(r)).normalize(),a=e.magnitude+(t.magnitude-e.magnitude)*n;return e.times(Math.cos(i)).plus(o.times(Math.sin(i))).normalize().times(a)}});function ep(e,t,n=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const tp=[];const np=(e,t,n)=>function(e,t,n=!1,r={}){for(const o of tp)if(ep(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!n)throw o.promise}const i={keys:t,equal:r.equal,promise:e(...t).then((e=>i.response=e)).then((()=>{r.lifespan&&r.lifespan>0&&setTimeout((()=>{const e=tp.indexOf(i);-1!==e&&tp.splice(e,1)}),r.lifespan)})).catch((e=>i.error=e))};if(tp.push(i),!n)throw i.promise}(e,t,!1,n),rp=new Promise((e=>{const t=new Image;t.addEventListener("error",(()=>e(!1))),t.addEventListener("load",(()=>e(1===t.width))),t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})).catch((()=>!1));const ip=n((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}));function op(){return op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},op.apply(this,arguments)}function ap(e,t,n){return Math.max(e,Math.min(t,n))}class sp{advance(e){var t;if(!this.isRunning)return;let n=!1;if(this.lerp)this.value=(r=this.value,i=this.to,(1-(o=1-Math.exp(-60*this.lerp*e)))*r+o*i),Math.round(this.value)===this.to&&(this.value=this.to,n=!0);else{this.currentTime+=e;const t=ap(0,this.currentTime/this.duration,1);n=t>=1;const r=n?1:this.easing(t);this.value=this.from+(this.to-this.from)*r}var r,i,o;null==(t=this.onUpdate)||t.call(this,this.value,n),n&&this.stop()}stop(){this.isRunning=!1}fromTo(e,t,{lerp:n=.1,duration:r=1,easing:i=(e=>e),onStart:o,onUpdate:a}){this.from=this.value=e,this.to=t,this.lerp=n,this.duration=r,this.easing=i,this.currentTime=0,this.isRunning=!0,null==o||o(),this.onUpdate=a}}class lp{constructor({wrapper:e,content:t,autoResize:n=!0}={}){if(this.resize=()=>{this.onWrapperResize(),this.onContentResize()},this.onWrapperResize=()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)},this.onContentResize=()=>{this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth},this.wrapper=e,this.content=t,n){const e=function(e,t){let n;return function(){let t=arguments,r=this;clearTimeout(n),n=setTimeout((function(){e.apply(r,t)}),250)}}(this.resize);this.wrapper!==window&&(this.wrapperResizeObserver=new ResizeObserver(e),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(e),this.contentResizeObserver.observe(this.content)}this.resize()}destroy(){var e,t;null==(e=this.wrapperResizeObserver)||e.disconnect(),null==(t=this.contentResizeObserver)||t.disconnect()}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class cp{constructor(){this.events={}}emit(e,...t){let n=this.events[e]||[];for(let r=0,i=n.length;r<i;r++)n[r](...t)}on(e,t){var n;return(null==(n=this.events[e])?void 0:n.push(t))||(this.events[e]=[t]),()=>{var n;this.events[e]=null==(n=this.events[e])?void 0:n.filter((e=>t!==e))}}off(e,t){var n;this.events[e]=null==(n=this.events[e])?void 0:n.filter((e=>t!==e))}destroy(){this.events={}}}class up{constructor(e,{wheelMultiplier:t=1,touchMultiplier:n=2,normalizeWheel:r=!1}){this.onTouchStart=e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:0,y:0}},this.onTouchMove=e=>{const{clientX:t,clientY:n}=e.targetTouches?e.targetTouches[0]:e,r=-(t-this.touchStart.x)*this.touchMultiplier,i=-(n-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=t,this.touchStart.y=n,this.lastDelta={x:r,y:i},this.emitter.emit("scroll",{deltaX:r,deltaY:i,event:e})},this.onTouchEnd=e=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:e})},this.onWheel=e=>{let{deltaX:t,deltaY:n}=e;this.normalizeWheel&&(t=ap(-100,t,100),n=ap(-100,n,100)),t*=this.wheelMultiplier,n*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:n,event:e})},this.element=e,this.wheelMultiplier=t,this.touchMultiplier=n,this.normalizeWheel=r,this.touchStart={x:null,y:null},this.emitter=new cp,this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(e,t){return this.emitter.on(e,t)}destroy(){this.emitter.destroy(),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class hp{constructor({wrapper:e=window,content:t=document.documentElement,wheelEventsTarget:n=e,eventsTarget:r=n,smoothWheel:i=!0,smoothTouch:o=!1,syncTouch:a=!1,syncTouchLerp:s=.1,__iosNoInertiaSyncTouchLerp:l=.4,touchInertiaMultiplier:c=35,duration:u,easing:h=(e=>Math.min(1,1.001-Math.pow(2,-10*e))),lerp:d=!u&&.1,infinite:f=!1,orientation:p="vertical",gestureOrientation:m="vertical",touchMultiplier:v=1,wheelMultiplier:g=1,normalizeWheel:y=!1,autoResize:A=!0}={}){this.onVirtualScroll=({deltaX:e,deltaY:t,event:n})=>{if(n.ctrlKey)return;const r=n.type.includes("touch"),i=n.type.includes("wheel");if("both"===this.options.gestureOrientation&&0===e&&0===t||"vertical"===this.options.gestureOrientation&&0===t||"horizontal"===this.options.gestureOrientation&&0===e||r&&"vertical"===this.options.gestureOrientation&&0===this.scroll&&!this.options.infinite&&t<=0)return;let o=n.composedPath();if(o=o.slice(0,o.indexOf(this.rootElement)),o.find((e=>{var t;return(null==e.hasAttribute?void 0:e.hasAttribute("data-lenis-prevent"))||r&&(null==e.hasAttribute?void 0:e.hasAttribute("data-lenis-prevent-touch"))||i&&(null==e.hasAttribute?void 0:e.hasAttribute("data-lenis-prevent-wheel"))||(null==(t=e.classList)?void 0:t.contains("lenis"))})))return;if(this.isStopped||this.isLocked)return void n.preventDefault();if(this.isSmooth=(this.options.smoothTouch||this.options.syncTouch)&&r||this.options.smoothWheel&&i,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();n.preventDefault();let a=t;"both"===this.options.gestureOrientation?a=Math.abs(t)>Math.abs(e)?t:e:"horizontal"===this.options.gestureOrientation&&(a=e);const s=r&&this.options.syncTouch,l=r&&"touchend"===n.type&&Math.abs(a)>1;l&&(a=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+a,op({programmatic:!1},s&&{lerp:l?this.syncTouchLerp:this.options.__iosNoInertiaSyncTouchLerp}))},this.onScroll=()=>{if(!this.isScrolling){const e=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-e),this.emit()}},window.lenisVersion="1.0.27",e!==document.documentElement&&e!==document.body||(e=window),this.options={wrapper:e,content:t,wheelEventsTarget:n,eventsTarget:r,smoothWheel:i,smoothTouch:o,syncTouch:a,syncTouchLerp:s,__iosNoInertiaSyncTouchLerp:l,touchInertiaMultiplier:c,duration:u,easing:h,lerp:d,infinite:f,gestureOrientation:m,orientation:p,touchMultiplier:v,wheelMultiplier:g,normalizeWheel:y,autoResize:A},this.animate=new sp,this.emitter=new cp,this.dimensions=new lp({wrapper:e,content:t,autoResize:A}),this.toggleClass("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=a||i||o,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll=new up(r,{touchMultiplier:v,wheelMultiplier:g,normalizeWheel:y}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClass("lenis",!1),this.toggleClass("lenis-smooth",!1),this.toggleClass("lenis-scrolling",!1),this.toggleClass("lenis-stopped",!1),this.toggleClass("lenis-locked",!1)}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.off(e,t)}setScroll(e){this.isHorizontal?this.rootElement.scrollLeft=e:this.rootElement.scrollTop=e}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(e){const t=e-(this.time||e);this.time=e,this.animate.advance(.001*t)}scrollTo(e,{offset:t=0,immediate:n=!1,lock:r=!1,duration:i=this.options.duration,easing:o=this.options.easing,lerp:a=!i&&this.options.lerp,onComplete:s=null,force:l=!1,programmatic:c=!0}={}){if(!this.isStopped&&!this.isLocked||l){if(["top","left","start"].includes(e))e=0;else if(["bottom","right","end"].includes(e))e=this.limit;else{var u;let n;if("string"==typeof e?n=document.querySelector(e):null!=(u=e)&&u.nodeType&&(n=e),n){if(this.options.wrapper!==window){const e=this.options.wrapper.getBoundingClientRect();t-=this.isHorizontal?e.left:e.top}const r=n.getBoundingClientRect();e=(this.isHorizontal?r.left:r.top)+this.animatedScroll}}if("number"==typeof e){if(e+=t,e=Math.round(e),this.options.infinite?c&&(this.targetScroll=this.animatedScroll=this.scroll):e=ap(0,e,this.limit),n)return this.animatedScroll=this.targetScroll=e,this.setScroll(this.scroll),this.reset(),void(null==s||s(this));if(!c){if(e===this.targetScroll)return;this.targetScroll=e}this.animate.fromTo(this.animatedScroll,e,{duration:i,easing:o,lerp:a,onStart:()=>{r&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(e,t)=>{this.isScrolling=!0,this.velocity=e-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=e,this.setScroll(this.scroll),c&&(this.targetScroll=e),t||this.emit(),t&&requestAnimationFrame((()=>{this.reset(),this.emit(),null==s||s(this)}))}})}}}get rootElement(){return this.options.wrapper===window?this.options.content:this.options.wrapper}get limit(){return this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(this.animatedScroll%(e=this.limit)+e)%e:this.animatedScroll;var e}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(e){this.__isSmooth!==e&&(this.__isSmooth=e,this.toggleClass("lenis-smooth",e))}get isScrolling(){return this.__isScrolling}set isScrolling(e){this.__isScrolling!==e&&(this.__isScrolling=e,this.toggleClass("lenis-scrolling",e))}get isStopped(){return this.__isStopped}set isStopped(e){this.__isStopped!==e&&(this.__isStopped=e,this.toggleClass("lenis-stopped",e))}get isLocked(){return this.__isLocked}set isLocked(e){this.__isLocked!==e&&(this.__isLocked=e,this.toggleClass("lenis-locked",e))}get className(){let e="lenis";return this.isStopped&&(e+=" lenis-stopped"),this.isLocked&&(e+=" lenis-locked"),this.isScrolling&&(e+=" lenis-scrolling"),this.isSmooth&&(e+=" lenis-smooth"),e}toggleClass(e,t){this.rootElement.classList.toggle(e,t),this.emitter.emit("className change",this)}}function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dp.apply(this,arguments)}function fp(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function pp(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}const mp="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,vp={PRIORITY_PRELOAD:0,PRIORITY_SCISSORS:1,PRIORITY_VIEWPORTS:1,PRIORITY_GLOBAL:1e3,DEFAULT_SCALE_MULTIPLIER:1,preloadQueue:[]},gp=Rt((e=>({debug:!1,scaleMultiplier:vp.DEFAULT_SCALE_MULTIPLIER,globalRender:!0,globalPriority:vp.PRIORITY_GLOBAL,globalClearDepth:!1,globalRenderQueue:!1,clearGlobalRenderQueue:()=>e((()=>({globalRenderQueue:!1}))),isCanvasAvailable:!0,hasSmoothScrollbar:!1,canvasChildren:{},renderToCanvas:(t,n,r={})=>e((({canvasChildren:e})=>Object.getOwnPropertyDescriptor(e,t)?(e[t].instances+=1,e[t].props.inactive=!1,{canvasChildren:e}):{canvasChildren:dp({},e,{[t]:{mesh:n,props:r,instances:1}})})),updateCanvas:(t,n)=>e((({canvasChildren:e})=>{if(!e[t])return;const{[t]:{mesh:r,props:i,instances:o}}=e;return{canvasChildren:dp({},e,{[t]:{mesh:r,props:dp({},i,n),instances:o}})}})),removeFromCanvas:(t,n=!0)=>e((({canvasChildren:e})=>{var r;return(null==(r=e[t])?void 0:r.instances)>1?(e[t].instances-=1,{canvasChildren:e}):n?{canvasChildren:fp(e,[t].map(pp))}:(e[t].instances=0,e[t].props.inactive=!0,{canvasChildren:dp({},e)})})),pageReflow:0,requestReflow:()=>{e((e=>({pageReflow:e.pageReflow+1})))},scroll:{y:0,x:0,limit:0,velocity:0,progress:0,direction:0,scrollDirection:void 0},__lenis:void 0,scrollTo:()=>{},onScroll:()=>()=>{}}))),yp=()=>{const e=gp((e=>e.requestReflow)),n=gp((e=>e.debug));return t.useEffect((()=>{let t=new(window.ResizeObserver||Bf)((()=>{e(),n&&console.log("ResizeManager","document.body height changed")}));return t.observe(document.body),()=>{null==t||t.disconnect()}}),[]),null},Ap=["makeDefault","margin"],bp=t.forwardRef(((e,n)=>{let{makeDefault:r=!1,margin:o=0}=e,a=fp(e,Ap);const s=Pn((e=>e.set)),l=Pn((e=>e.camera)),c=Pn((e=>e.size)),u=Pn((e=>e.viewport)),h=t.useRef(null);t.useImperativeHandle(n,(()=>h.current));const d=gp((e=>e.pageReflow)),f=gp((e=>e.scaleMultiplier)),{fov:p,distance:m,aspect:v}=t.useMemo((()=>{var e;const t=(c.height+2*o)*f,n=(c.width+2*o)*f/t;let r=a.fov||50,i=null==a||null==(e=a.position)?void 0:e[2];return i?r=180/Math.PI*2*Math.atan(t/(2*i)):i=t/(2*Math.tan(r/2*Math.PI/180)),{fov:r,distance:i,aspect:n}}),[c,f,d]);return mp((()=>{h.current.lookAt(0,0,0),h.current.updateProjectionMatrix(),h.current.updateMatrixWorld(),s((e=>({viewport:dp({},e.viewport,u.getCurrentViewport(l))})))}),[c,f,d]),mp((()=>{if(r){const e=l;return s((()=>({camera:h.current}))),()=>s((()=>({camera:e})))}}),[h,r,s]),i.createElement("perspectiveCamera",dp({ref:h,position:[0,0,m],onUpdate:e=>e.updateProjectionMatrix(),near:.1,aspect:v,fov:p,far:2*m},a))})),_p=["makeDefault","margin"],wp=t.forwardRef(((e,n)=>{let{makeDefault:r=!1,margin:o=0}=e,a=fp(e,_p);const s=Pn((e=>e.set)),l=Pn((e=>e.camera)),c=Pn((e=>e.size)),u=gp((e=>e.pageReflow)),h=gp((e=>e.scaleMultiplier)),d=t.useMemo((()=>Math.max(c.width*h,c.height*h)),[c,u,h]),f=t.useRef(null);return t.useImperativeHandle(n,(()=>f.current)),mp((()=>{f.current.lookAt(0,0,0),f.current.updateProjectionMatrix(),f.current.updateMatrixWorld()}),[d,c]),mp((()=>{if(r){const e=l;return s((()=>({camera:f.current}))),()=>s((()=>({camera:e})))}}),[f,r,s]),i.createElement("orthographicCamera",dp({left:c.width*h/-2-o*h,right:c.width*h/2+o*h,top:c.height*h/2+o*h,bottom:c.height*h/-2-o*h,far:2*d,position:[0,0,d],near:.001,ref:f,onUpdate:e=>e.updateProjectionMatrix()},a))}));function Cp(e,t){e&&(!1===t?(e.wasFrustumCulled=e.frustumCulled,e.wasVisible=e.visible,e.visible=!0,e.frustumCulled=!1):(e.visible=!!e.wasVisible,e.frustumCulled=!!e.wasFrustumCulled),e.children.forEach((e=>Cp(e,t))))}const Ep=new u,xp=(e=[0])=>{gp.getState().globalRenderQueue=gp.getState().globalRenderQueue||[0],gp.getState().globalRenderQueue=[...gp.getState().globalRenderQueue||[],...e]},Bp=({gl:e,scene:t,camera:n,left:r,top:i,width:o,height:a,layer:s=0,autoClear:l=!1,clearDepth:c=!1})=>{t&&n&&(e.autoClear=l,e.setScissor(r,i,o,a),e.setScissorTest(!0),n.layers.set(s),c&&e.clearDepth(),e.render(t,n),e.setScissorTest(!1))},Sp=({gl:e,scene:t,camera:n,left:r,top:i,width:o,height:a,layer:s=0,scissor:l=!0,autoClear:c=!1,clearDepth:u=!1})=>{t&&n&&(e.getSize(Ep),e.autoClear=c,e.setViewport(r,i,o,a),e.setScissor(r,i,o,a),e.setScissorTest(l),n.layers.set(s),u&&e.clearDepth(),e.render(t,n),e.setScissorTest(!1),e.setViewport(0,0,Ep.x,Ep.y))},Tp=(e,t,n=0,r)=>{vp.preloadQueue.push(((i,o,a)=>{i.setScissorTest(!1),Cp(e||o,!1),t.layers.set(n),i.render(e||o,t||a),Cp(e||o,!0),r&&r()})),jn()},Mp=()=>{const e=gp((e=>e.isCanvasAvailable)),n=gp((e=>e.hasSmoothScrollbar)),r=gp((e=>e.requestReflow)),i=gp((e=>e.pageReflow)),o=gp((e=>e.debug)),a=gp((e=>e.scaleMultiplier));return t.useEffect((()=>{o&&(window._scrollRig=window._scrollRig||{},window._scrollRig.reflow=r)}),[]),{debug:o,isCanvasAvailable:e,hasSmoothScrollbar:n,scaleMultiplier:a,preloadScene:Tp,requestRender:xp,renderScissor:Bp,renderViewport:Sp,reflow:r,reflowCompleted:i}},Rp=({children:e})=>{const n=Pn((e=>e.gl)),r=gp((e=>e.canvasChildren)),o=Mp();return t.useEffect((()=>{Object.keys(r).length||(o.debug&&console.log("GlobalRenderer","auto render empty canvas"),n.clear(),o.requestRender(),jn())}),[r]),o.debug&&console.log("GlobalChildren",Object.keys(r).length),i.createElement(i.Fragment,null,e,Object.keys(r).map((e=>{const{mesh:n,props:a}=r[e];return"function"==typeof n?i.createElement(t.Fragment,{key:e},n(dp({key:e},o,a))):t.cloneElement(n,dp({key:e},a))})))},Op=()=>{const e=Pn((e=>e.gl)),t=Pn((e=>e.frameloop)),n=gp((e=>e.globalClearDepth)),r=gp((e=>e.globalPriority)),i=Mp();return mp((()=>{e.debug.checkShaderErrors=i.debug}),[i.debug]),Ln((({camera:t,scene:n})=>{vp.preloadQueue.length&&(vp.preloadQueue.forEach((r=>r(e,n,t))),e.clear(),vp.preloadQueue=[],i.debug&&console.log("GlobalRenderer","preload complete. trigger global render"),i.requestRender(),jn())}),vp.PRIORITY_PRELOAD),Ln((({camera:r,scene:i})=>{const o=gp.getState().globalRenderQueue;("always"===t||o)&&(r.layers.disableAll(),o?o.forEach((e=>{r.layers.enable(e)})):r.layers.enable(0),n&&e.clearDepth(),e.render(i,r)),gp.getState().clearGlobalRenderQueue()}),r),null};class Dp extends t.Component{constructor(e){super(e),this.state={error:!1},this.props=e}static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?(this.props.onError&&this.props.onError(this.state.error),null):this.props.children}}var Fp="8.11.10";const Up=["children","as","gl","style","orthographic","camera","debug","scaleMultiplier","globalRender","globalPriority","globalClearDepth"],Ip=["children","onError"];let kp;"undefined"!=typeof window&&(kp=window.ResizeObserver||Bf);const Pp=e=>{let{children:t,as:n=xr,gl:r,style:o,orthographic:a,camera:s,debug:l,scaleMultiplier:c=vp.DEFAULT_SCALE_MULTIPLIER,globalRender:u=!0,globalPriority:h=vp.PRIORITY_GLOBAL,globalClearDepth:d=!1}=e,f=fp(e,Up);const p=gp((e=>e.globalRender));return mp((()=>{"undefined"!=typeof window&&(window.__r3f_scroll_rig=Fp);const e=Sf.parse(window.location.search);(l||void 0!==e.debug)&&(gp.setState({debug:!0}),console.info("@14islands/r3f-scroll-rig@"+Fp))}),[l]),mp((()=>{gp.setState({scaleMultiplier:c,globalRender:u,globalPriority:h,globalClearDepth:d})}),[c,h,u,d]),i.createElement(n,dp({id:"ScrollRig-canvas",camera:{manual:!0},gl:dp({failIfMajorPerformanceCaveat:!0},r),resize:{scroll:!1,debounce:0,polyfill:kp},style:dp({position:"fixed",top:0,left:0,right:0,height:"100vh"},o)},f),!a&&i.createElement(bp,dp({manual:!0,makeDefault:!0},s)),a&&i.createElement(wp,dp({manual:!0,makeDefault:!0},s)),p&&i.createElement(Op,null),"function"==typeof t?t(i.createElement(Rp,null)):i.createElement(Rp,null,t),i.createElement(yp,null))},Lp=e=>{let{children:t,onError:n}=e,r=fp(e,Ip);return mp((()=>{document.documentElement.classList.add("js-has-global-canvas")}),[]),i.createElement(Dp,{onError:e=>{n&&n(e),gp.setState({isCanvasAvailable:!1}),document.documentElement.classList.remove("js-has-global-canvas"),document.documentElement.classList.add("js-global-canvas-error")}},i.createElement(Pp,dp({},r),t),i.createElement("noscript",null,i.createElement("style",null,"\n          .ScrollRig-visibilityHidden,\n          .ScrollRig-transparentColor {\n            visibility: unset;\n            color: unset;\n          }\n          ")))},Gp=({scale:e})=>i.createElement("mesh",{scale:e},i.createElement("planeGeometry",null),i.createElement("shaderMaterial",{args:[{uniforms:{color:{value:new p("hotpink")}},vertexShader:"\n            void main() {\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform vec3 color;\n            uniform float opacity;\n            void main() {\n              gl_FragColor.rgba = vec4(color, .5);\n            }\n          "}],transparent:!0})),zp="undefined"!=typeof window;function Hp({debounce:e=0}={}){const[n,r]=t.useState({width:zp?window.innerWidth:1/0,height:zp?window.innerHeight:1/0});return t.useEffect((()=>{const t=document.getElementById("ScrollRig-canvas");function i(){const e=t?t.clientWidth:window.innerWidth,i=t?t.clientHeight:window.innerHeight;e===n.width&&i===n.height||r({width:e,height:i})}const o=tr.debounce(i,e),a=window.ResizeObserver||Bf;let s;return t?(s=new a(o),s.observe(t)):window.addEventListener("resize",o),i(),()=>{var e;window.removeEventListener("resize",o),null==(e=s)||e.disconnect()}}),[n,r]),n}function Np(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}const jp=()=>({enabled:gp((e=>e.hasSmoothScrollbar)),scroll:gp((e=>e.scroll)),scrollTo:gp((e=>e.scrollTo)),onScroll:gp((e=>e.onScroll)),__lenis:gp((e=>e.__lenis))});function Jp(e,n){const r=Hp(),{scroll:i,onScroll:o}=jp(),a=gp((e=>e.scaleMultiplier)),s=gp((e=>e.pageReflow)),l=gp((e=>e.debug)),{rootMargin:c,threshold:u,autoUpdate:h,wrapper:d}=t.useMemo((()=>{const e={rootMargin:"0%",threshold:0,autoUpdate:!0},t=n||{};return Object.keys(t).map(((n,r)=>{void 0!==t[n]&&(e[n]=t[n])})),e}),[n]),{ref:f,inView:p}=function({threshold:e,delay:n,trackVisibility:r,rootMargin:i,root:o,triggerOnce:a,skip:s,initialInView:l,fallbackInView:c,onChange:u}={}){var h;const[d,f]=t.useState(null),p=t.useRef(),[m,v]=t.useState({inView:!!l,entry:void 0});p.current=u,t.useEffect((()=>{if(s||!d)return;let t;return t=Nf(d,((e,n)=>{v({inView:e,entry:n}),p.current&&p.current(e,n),n.isIntersecting&&a&&t&&(t(),t=void 0)}),{root:o,rootMargin:i,threshold:e,trackVisibility:r,delay:n},c),()=>{t&&t()}}),[Array.isArray(e)?e.toString():e,d,o,i,a,s,r,c,n]);const g=null==(h=m.entry)?void 0:h.target,y=t.useRef();d||!g||a||s||y.current===g||(y.current=g,v({inView:!!l,entry:void 0}));const A=[f,m.inView,m.entry];return A.ref=A[0],A.inView=A[1],A.entry=A[2],A}({rootMargin:c,threshold:u});mp((()=>{f(e.current)}),[e,null==e?void 0:e.current]);const[m,v]=t.useState($f.vec3(0,0,0)),g=t.useRef({inViewport:!1,progress:-1,visibility:-1,viewport:-1}).current,y=t.useRef({top:0,bottom:0,left:0,right:0,width:0,height:0}).current,[A,b]=t.useState(y),_=t.useRef({top:0,bottom:0,left:0,right:0,width:0,height:0,x:0,y:0,positiveYUpBottom:0}).current,w=t.useRef($f.vec3(0,0,0)).current;mp((()=>{var t;const n=null==(t=e.current)?void 0:t.getBoundingClientRect();if(!n)return;const i=d?d.scrollTop:window.scrollY,o=d?d.scrollLeft:window.scrollX;y.top=n.top+i,y.bottom=n.bottom+i,y.left=n.left+o,y.right=n.right+o,y.width=n.width,y.height=n.height,b(dp({},y)),v($f.vec3((null==y?void 0:y.width)*a,(null==y?void 0:y.height)*a,1)),l&&console.log("useTracker.getBoundingClientRect:",y,"intialScroll:",{initialY:i,initialX:o},"size:",r,"pageReflow:",s)}),[e,r,s,a,l]);const C=t.useCallback((({onlyUpdateInViewport:t=!1,scroll:n}={})=>{if(!e.current||t&&!g.inViewport)return;const o=n||i;var s,l,c,u;l=y,c=o,u=r,(s=_).top=l.top-(c.y||0),s.bottom=l.bottom-(c.y||0),s.left=l.left-(c.x||0),s.right=l.right-(c.x||0),s.width=l.width,s.height=l.height,s.x=s.left+.5*l.width-.5*u.width,s.y=s.top+.5*l.height-.5*u.height,s.positiveYUpBottom=u.height-s.bottom,function(e,t,n){e.x=t.x*n,e.y=-1*t.y*n}(w,_,a);const h="horizontal"===o.scrollDirection,d=h?"width":"height",f=r[d]-_[h?"left":"top"];g.progress=Np(f,0,r[d]+_[d],0,1),g.visibility=Np(f,0,_[d],0,1),g.viewport=Np(f,0,r[d],0,1)}),[e,r,a,i]);return mp((()=>{g.inViewport=p,C({onlyUpdateInViewport:!1}),l&&console.log("useTracker.inViewport:",p,"update()")}),[p]),mp((()=>{C({onlyUpdateInViewport:!1}),l&&console.log("useTracker.update on resize/reflow")}),[C,s]),t.useEffect((()=>{if(h)return o((e=>C({onlyUpdateInViewport:!0})))}),[h,C,o]),{rect:A,bounds:_,scale:m,position:w,scrollState:g,inViewport:p,update:C}}const Kp=["track","children","margin","inViewportMargin","inViewportThreshold","visible","hideOffscreen","scissor","debug","as","priority"];function Wp(e){let{track:n,children:r,margin:o=0,inViewportMargin:a,inViewportThreshold:s,visible:l=!0,hideOffscreen:c=!0,scissor:u=!1,debug:h=!1,as:d="scene",priority:f=vp.PRIORITY_SCISSORS}=e,p=fp(e,Kp);const m=t.useCallback((e=>{null!==e&&y(e)}),[]),[v,y]=t.useState(u?new g:null),{requestRender:A,renderScissor:b}=Mp(),_=gp((e=>e.globalRender)),{bounds:w,scale:C,position:E,scrollState:x,inViewport:B}=Jp(n,{rootMargin:a,threshold:s});mp((()=>{v&&(v.visible=c?B&&l:l)}),[v,B,c,l]),Ln((({gl:e,camera:t})=>{v&&v.visible&&(v.position.y=E.y,v.position.x=E.x,u?b({gl:e,scene:v,camera:t,left:w.left-o,top:w.positiveYUpBottom-o,width:w.width+2*o,height:w.height+2*o}):A())}),_?f:void 0);const S=i.createElement(i.Fragment,null,(!r||h)&&C&&i.createElement(Gp,{scale:C}),r&&v&&C&&r(dp({track:n,margin:o,scale:C,scrollState:x,inViewport:B,priority:f},p))),T=d;return u&&v?qn(S,v):i.createElement(T,{ref:m},S)}const Vp=["children","id","dispose"],Xp=t.forwardRef(((e,n)=>{let{children:r,id:i,dispose:o=!0}=e,a=fp(e,Vp);return r?(function(e,n={},{key:r,dispose:i=!0}={}){const o=gp((e=>e.updateCanvas)),a=gp((e=>e.renderToCanvas)),s=gp((e=>e.removeFromCanvas)),l=t.useMemo((()=>r||_e.generateUUID()),[]);mp((()=>{a(l,e,dp({},n,{inactive:!1}))}),[l]),t.useEffect((()=>()=>{s(l,i)}),[l]);const c=t.useCallback((e=>{o(l,e)}),[o,l]);t.useEffect((()=>{c(n)}),[...Object.values(n)])}(r,dp({},a,{ref:n}),{key:i,dispose:o}),null):null}));let Yp=!1;function Qp(e,{initTexture:n=!0,premultiplyAlpha:r="default"}={}){var i,o;const s=Pn((e=>e.gl)),l=Hp(),c=gp((e=>e.debug)),[u,h]=t.useState(null==(i=e.current)?void 0:i.currentSrc);t.useEffect((()=>{const t=e.current,n=()=>{var t;h(null==(t=e.current)?void 0:t.currentSrc)};return null==t||t.addEventListener("load",n),()=>null==t?void 0:t.removeEventListener("load",n)}),[e,u,h]);const d=np((()=>(bt.itemStart("waiting for DOM image"),new Promise((t=>{const n=e.current;function r(){t(null==n?void 0:n.currentSrc),bt.itemEnd("waiting for DOM image")}null==n||n.addEventListener("load",r,{once:!0}),null!=n&&n.complete&&(null==n||n.removeEventListener("load",r),r())})))),[e,l,null==(o=e.current)?void 0:o.currentSrc,u],{equal:ip}),f=Hn(function(){const e=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t=navigator.userAgent.indexOf("Firefox")>-1,n=t?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;return"undefined"==typeof createImageBitmap||e||t&&Number(n)<98}()?oe:ae,d,(e=>{e instanceof ae&&(e.setOptions({colorSpaceConversion:"none",premultiplyAlpha:r,imageOrientation:"flipY"}),e.setRequestHeader({Accept:(Yp?"image/webp,":"")+"*/*"}))})),p=t.useMemo((()=>f instanceof a?f:f instanceof ImageBitmap?new _t(f):void 0),[f]);return t.useEffect((function(){n&&s.initTexture(p),c&&console.log("useImageAsTexture","initTexture()")}),[s,p,n]),p}rp.then((e=>{Yp=e}));const Zp=t.forwardRef((({children:e,enabled:n=!0,locked:r=!1,scrollRestoration:i="auto",disablePointerOnScroll:o=!0,horizontal:a=!1,scrollInContainer:s=!1,updateGlobalState:l=!0,onScroll:c,config:u={},invalidate:h=(()=>{}),addEffect:d},f)=>{const p=t.useRef(),m=t.useRef(),v=t.useRef(!1),g=gp((e=>e.scroll));t.useImperativeHandle(f,(()=>({start:()=>{var e;return null==(e=m.current)?void 0:e.start()},stop:()=>{var e;return null==(e=m.current)?void 0:e.stop()},on:(e,t)=>{var n;return null==(n=m.current)?void 0:n.on(e,t)},notify:()=>{var e;return null==(e=m.current)?void 0:e.emit()},emit:()=>{var e;return null==(e=m.current)?void 0:e.emit()},scrollTo:(e,t)=>{var n;return null==(n=m.current)?void 0:n.scrollTo(e,t)},raf:e=>{var t;return null==(t=m.current)?void 0:t.raf(e)},__lenis:m.current})));const y=t.useCallback((e=>{o&&p.current&&v.current!==e&&(v.current=e,p.current.style.pointerEvents=e?"none":"auto")}),[o,p,v]);return mp((()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration=i)}),[]),mp((()=>{const e=document.documentElement,t=document.body,n=document.body.firstElementChild;let r;if(e.classList.toggle("ScrollRig-scrollHtml",s),t.classList.toggle("ScrollRig-scrollWrapper",s),s&&Object.assign(u,{smoothTouch:!0,wrapper:t,content:n}),m.current=new hp(dp({orientation:a?"horizontal":"vertical"},u)),d)r=d((e=>{var t;return null==(t=m.current)?void 0:t.raf(e)}));else{let e;e=requestAnimationFrame((function t(n){var r;null==(r=m.current)||r.raf(n),e=requestAnimationFrame(t)})),r=()=>cancelAnimationFrame(e)}return()=>{var e;r(),null==(e=m.current)||e.destroy()}}),[]),mp((()=>{var e,t;const n=({scroll:e,limit:t,velocity:n,direction:r,progress:i})=>{const o=a?e:0;l&&(g.y=a?0:e,g.x=o,g.limit=t,g.velocity=n,g.direction=r,g.progress=i||0),Math.abs(n)>1.5&&y(!0),Math.abs(n)<1&&y(!1),c&&c({scroll:e,limit:t,velocity:n,direction:r,progress:i}),h()};return null==(e=m.current)||e.on("scroll",n),l&&(g.scrollDirection=a?"horizontal":"vertical",gp.setState({__lenis:m.current,scrollTo:(...e)=>{var t;null==(t=m.current)||t.scrollTo(...e)},onScroll:e=>{var t,n;return null==(t=m.current)||t.on("scroll",e),null==(n=m.current)||n.emit(),()=>{var t;return null==(t=m.current)?void 0:t.off("scroll",e)}}}),gp.getState().scroll.y=window.scrollY,gp.getState().scroll.x=window.scrollX),null==(t=m.current)||t.emit(),()=>{var e;null==(e=m.current)||e.off("scroll",n),l&&gp.setState({__lenis:void 0,onScroll:()=>()=>{},scrollTo:()=>{}})}}),[]),mp((()=>{const e=()=>h(),t=()=>y(!1);return window.addEventListener("pointermove",t),window.addEventListener("pointerdown",t),window.addEventListener("wheel",e),()=>{window.removeEventListener("pointermove",t),window.removeEventListener("pointerdown",t),window.removeEventListener("wheel",e)}}),[]),t.useEffect((()=>{l&&(document.documentElement.classList.toggle("js-smooth-scrollbar-enabled",n),document.documentElement.classList.toggle("js-smooth-scrollbar-disabled",!n),gp.setState({hasSmoothScrollbar:n}))}),[n]),t.useEffect((()=>{var e,t;r?null==(e=m.current)||e.stop():null==(t=m.current)||t.start()}),[r]),e({ref:p})}));var qp=t.forwardRef((function(e,t){return i.createElement(Zp,dp({ref:t,invalidate:jn,addEffect:Tn},e))}));const $p={hidden:"ScrollRig-visibilityHidden",hiddenWhenSmooth:"ScrollRig-visibilityHidden ScrollRig-hiddenIfSmooth",transparentColor:"ScrollRig-transparentColor",transparentColorWhenSmooth:"ScrollRig-transparentColor ScrollRig-hiddenIfSmooth"};export{kc as $,dh as A,Qu as B,xr as C,Xh as D,Zi as E,Ac as F,kr as G,Ju as H,Xp as I,Fc as J,lh as K,Qp as L,Hu as M,yh as N,Pc as O,Fh as P,Ct as Q,fh as R,qi as S,hc as T,Zu as U,Ic as V,$h as W,Ir as X,Vu as Y,rd as Z,qp as _,Qo as a,Lu as a0,Yu as a1,Vh as a2,Wh as a3,Qh as a4,Bc as a5,Sc as a6,Zh as a7,ku as a8,Pu as a9,Mc as aa,ch as ab,Eh as ac,gh as ad,Pn as b,Rt as c,Ln as d,jt as e,Tn as f,Mn as g,Rn as h,wt as i,Hn as j,Gn as k,zd as l,vc as m,Gu as n,Wn as o,gc as p,jp as q,Dh as r,Ys as s,Mp as t,Yo as u,$p as v,Wp as w,Ec as x,Lp as y,to as z};
