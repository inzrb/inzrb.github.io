import{aD as e,r as s,aE as o,ab as r,G as n}from"./vendor-89444a7f.js";import{bb as i,bo as t,aw as a,az as l,b7 as c,ba as m,bg as d,aF as u,bf as h}from"./vendor_three-3a2bdf96.js";import{I as _,B as p}from"./index-0ffe9cc9.js";/* empty css                    */import"./bundle_three-09f9ee87.js";const x=e({env:"rooftop_night_1k.hdr",preset:"hero",colors:2,anim:!0,animCurr:!1,enableEnv:!0,controlModel:"on",hideMenu:!1,oldPos:[0,0,0]}),j={scale:.03};function g(){const e=c("/assets/images/texture/SurfaceImperfections003_1K_var1.jpg");return n.jsxs("mesh",{rotation:[Math.PI,0,0],position:[0,0,0],children:[n.jsx("planeGeometry",{args:[50,50]}),n.jsx(m,{blur:[500,300],resolution:2048,mixBlur:.5,mixStrength:30,roughness:1,depthScale:1.4,minDepthThreshold:.8,maxDepthThreshold:1.5,color:"#202020",metalness:1,distortionMap:e,distortion:1.5})]})}function f(e){const{nodes:c,materials:m,animations:d}=i("/models/metal_gear.glb"),{ref:u,actions:h,names:_,mixer:p}=t(d),f=s.useRef(),v=o(x),{width:k,height:b}=a((e=>e.viewport));return l(((e,s)=>{if(v.hideMenu){const s=e.clock.getElapsedTime();u.current.rotation.z=s/2%(2*Math.PI),console.log(u.current.rotation.z)}})),s.useEffect((()=>{v.hideMenu?(r.to(u.current.rotation,{x:.53*Math.PI,duration:1,ease:"power2.inOut",delay:.1}),r.to(u.current.position,{y:-1.5,z:-1.5,duration:1,ease:"power2.inOut"}),r.to(f.current.position,{x:0,z:.25*b,duration:1,ease:"power2.inOut"}),r.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{f.current.scale.x=f.current.scale.y=f.current.scale.z=j.scale}})):(r.to(u.current.rotation,{x:.53*Math.PI,z:0,duration:1,ease:"power2.inOut"}),r.to(f.current.position,{x:3.6,z:.3*b,duration:1,ease:"power2.inOut"}),r.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{f.current.scale.x=f.current.scale.y=f.current.scale.z=j.scale}}),r.to(u.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}))}),[v.hideMenu]),s.useEffect((()=>{v.animCurr?(r.to(u.current.rotation,{x:.65*Math.PI,duration:1,ease:"power2.inOut"}),r.to(u.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}),r.to(f.current.position,{x:1,z:.9*b,duration:1,ease:"power2.inOut"}),r.to(j,{scale:1.7,duration:1,ease:"power2.inOut",onUpdate:()=>{f.current.scale.x=f.current.scale.y=f.current.scale.z=j.scale}})):(r.to(u.current.rotation,{x:.55*Math.PI,duration:1,ease:"power2.inOut"}),r.to(u.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}),r.to(f.current.position,{x:3,z:.3*b,duration:1,ease:"power2.inOut"}),r.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{f.current.scale.x=f.current.scale.y=f.current.scale.z=j.scale}}))}),[v.animCurr]),s.useEffect((()=>{var e,s;"on"===v.controlModel?null==(e=h.idle)||e.reset().play():"off"===v.controlModel&&(null==(s=h.idle)||s.reset(),h.idle.paused=!0)}),[v.controlModel,h,_]),n.jsx("group",{ref:u,...e,rotation:[.5*Math.PI,0,0],dispose:null,children:n.jsxs("group",{ref:f,position:[0,0,.4*b],name:"scene",children:[n.jsxs("group",{name:"Armature",position:[0,0,-.12],scale:.03,children:[n.jsxs("group",{name:"mgr",children:[n.jsx("skinnedMesh",{name:"hero",geometry:c.hero.geometry,material:m["rai_head.001"],skeleton:c.hero.skeleton}),n.jsx("skinnedMesh",{name:"hero_1",geometry:c.hero_1.geometry,material:m["Hair_1.001"],skeleton:c.hero_1.skeleton}),n.jsx("skinnedMesh",{name:"hero_2",geometry:c.hero_2.geometry,material:m["Hair.001"],skeleton:c.hero_2.skeleton}),n.jsx("skinnedMesh",{name:"hero_3",geometry:c.hero_3.geometry,material:m["rai_jaw.001"],skeleton:c.hero_3.skeleton}),n.jsx("skinnedMesh",{name:"hero_4",geometry:c.hero_4.geometry,material:m["Mask.001"],skeleton:c.hero_4.skeleton}),n.jsx("skinnedMesh",{name:"hero_5",geometry:c.hero_5.geometry,material:m["Beyond_the_Clouds.001"],skeleton:c.hero_5.skeleton}),n.jsx("skinnedMesh",{name:"hero_6",geometry:c.hero_6.geometry,material:m["Brooklyn.001"],skeleton:c.hero_6.skeleton}),n.jsx("skinnedMesh",{name:"hero_7",geometry:c.hero_7.geometry,material:m["rai_jaw.001"],skeleton:c.hero_7.skeleton}),n.jsx("skinnedMesh",{name:"hero_8",geometry:c.hero_8.geometry,material:m["Cool_Touch.001"],skeleton:c.hero_8.skeleton}),n.jsx("skinnedMesh",{name:"hero_9",geometry:c.hero_9.geometry,material:m["Utah.001"],skeleton:c.hero_9.skeleton}),n.jsx("skinnedMesh",{name:"hero_10",geometry:c.hero_10.geometry,material:m["Rodeo.001"],skeleton:c.hero_10.skeleton}),n.jsx("skinnedMesh",{name:"hero_11",geometry:c.hero_11.geometry,material:m["Barbarossa.001"],skeleton:c.hero_11.skeleton})]}),n.jsx("primitive",{object:c.mixamorigHips})]}),n.jsx(g,{rotation:[Math.PI,0,0]})]})})}const v=[{id:1,name:"TV STUDIO",url:"tv_studio_1k.hdr",image:"tvstudio.png"},{id:2,name:"BLUESTUDIO",url:"blue_photo_studio_1k.hdr",image:"bluestudio.png"},{id:3,name:"NEON",url:"rooftop_night_1k.hdr",image:"neon.png"},{id:4,name:"CHRISTMAS",url:"christmas_photo_studio_01_1k.hdr",image:"christmas.png"}],k=[{id:0,colorOne:"#fca44a",colorTwo:"#fff",colorThree:"#f00"},{id:1,colorOne:"#fbc039",colorTwo:"#fff",colorThree:"#35dfde"},{id:2,colorOne:"#fc3131",colorTwo:"#ffd60a",colorThree:"#2D00F7"},{id:3,colorOne:"#2D00F7",colorTwo:"#35dfde",colorThree:"#FFB600"},{id:4,colorOne:"#1c9f80",colorTwo:"#fca44a",colorThree:"#fc3131"},{id:5,colorOne:"#DE700F",colorTwo:"#35dfde",colorThree:"#78206E"},{id:6,colorOne:"#fff",colorTwo:"#DA0300",colorThree:"#3C73DF"},{id:7,colorOne:"#2a9d8f",colorTwo:"#e9c46a",colorThree:"#e76f51"},{id:8,colorOne:"#7209B7",colorTwo:"#F72585",colorThree:"#3A0CA3"},{id:9,colorOne:"#2843AD",colorTwo:"#9A53D0",colorThree:"#818DE0"}],b={hero:[{id:0,position:[0,40,0],factor:2},{id:1,position:[20,0,0],factor:.8},{id:2,position:[0,-40,0],factor:2}],anger:[{id:0,position:[-15,12,3],factor:1},{id:1,position:[20,3,3],factor:.05},{id:2,position:[0,10,0],factor:2}],glowing:[{id:0,position:[-4,18,-12],factor:5},{id:1,position:[0,0,0],factor:0},{id:2,position:[2,5,16],factor:1}],lust:[{id:0,position:[-20,0,15],factor:2},{id:1,position:[15,0,15],factor:.4},{id:2,position:[20,.5,-12],factor:.7}],duo:[{id:0,position:[-20,0,0],factor:1},{id:1,position:[0,20,0],factor:2},{id:2,position:[20,0,0],factor:1}],upon:[{id:0,position:[30,20,-50],factor:1},{id:1,position:[-30,20,-50],factor:.1},{id:2,position:[0,-40,0],factor:3}]},y=()=>{const[e,r]=s.useState(!1),[i,t]=s.useState(!1),[a,l]=s.useState(!1),[c,m]=s.useState(!1),[d,u]=s.useState(!1),[h,_]=s.useState(!0),[p,j]=s.useState("on"),[g,f]=s.useState(""),y=s.useRef(),N=s.useRef(),w=s.useRef(),M=o(x),O=()=>{T(g),x.hideMenu=!M.hideMenu},T=e=>{switch(e){case"env":r(!1);break;case"colorful":t(!1);break;case"preset":l(!1);break;case"anim":m(!1);break;case"ctrl":u(!1)}},C=e=>{var s;Array.from(null==(s=null==y?void 0:y.current)?void 0:s.children).forEach((s=>{s.classList.contains("mg_submenu__item--"+e)?s.classList.add("current"):s.classList.remove("current")})),x.preset=e},S=()=>{_(!h),x.anim=!h},z=e=>{j(e),x.controlModel=e},E=s=>{switch(x.animCurr=!1,s){case"env":e||(T(g),f(s)),r(!e);break;case"colorful":i||(T(g),f(s)),t(!i);break;case"preset":a||(T(g),f(s)),l(!a);break;case"anim":c||(T(g),f(s)),x.animCurr=!c,m(!c);break;case"ctrl":d||(T(g),f(s)),u(!d)}};return s.useEffect((()=>{C(x.preset)}),[]),n.jsxs("section",{className:"mgs_menu",children:[n.jsxs("div",{className:"mgs_main",style:{visibility:M.hideMenu?"hidden":"visible"},children:[n.jsxs("div",{className:"mgs_caption",children:[n.jsx("p",{className:"mgs_subtext",children:"灯光实验室"}),n.jsx("h2",{className:"mgs_title",children:"合金装备崛起：复仇"}),n.jsx("h3",{className:"mgs_subtitle",children:"个性化定制光照系统概念设计"})]}),n.jsx("div",{className:"mgs_hmenu__main",children:n.jsx("nav",{className:"mgs_menu__nav",children:n.jsxs("ul",{className:"hmenu_list",children:[n.jsxs("li",{className:"hmenu_item "+(e?"current":""),children:[n.jsx("div",{className:"hmenu_item__inner",onClick:()=>{E("env")},children:"环境设置"}),n.jsx("div",{className:"hmenu_item__content",style:{visibility:e?"visible":"hidden"},children:n.jsx("div",{className:"mg_environment",ref:N,children:v.map((e=>n.jsx("div",{className:`mg_environment_el mg_environment_el--${e.name} ${e.url===x.env?"current":""}`,onClick:()=>{((e,s)=>{var o;const r=Array.from(null==(o=null==N?void 0:N.current)?void 0:o.children);let n=!1;r.forEach((s=>{s.classList.contains("mg_environment_el--"+e)?s.classList.contains("current")?(s.classList.remove("current"),n=!0):s.classList.add("current"):s.classList.remove("current")})),x.enableEnv=!n,x.env=s})(e.name,e.url)},children:n.jsx("div",{className:"mg_environment_el__wrap",children:n.jsxs("div",{className:"mg_environment__unit",children:[n.jsx("img",{className:"mg_environment__thumb",src:"/hdrs/"+e.image}),n.jsx("div",{className:"mg_environment__tag",children:e.name})]})})},e.name)))})})]}),n.jsxs("li",{className:"hmenu_item "+(i?"current":""),children:[n.jsx("div",{className:"hmenu_item__inner",onClick:()=>{E("colorful")},children:"定制颜色"}),n.jsx("div",{className:"hmenu_item__content",style:{visibility:i?"visible":"hidden"},children:n.jsx("div",{className:"palette_list",ref:w,children:k.map((e=>n.jsx("div",{className:`palette_el palette_el--${e.id} ${e.id===x.colors?"current":""}`,onClick:()=>{var s,o;s=e.id,Array.from(null==(o=null==w?void 0:w.current)?void 0:o.children).forEach((e=>{e.classList.contains("palette_el--"+s)?e.classList.add("current"):e.classList.remove("current")})),x.colors=s},children:n.jsxs("div",{className:"palette_el__wrap",children:[n.jsx("div",{className:"palette_el__unit",style:{background:e.colorOne}}),n.jsx("div",{className:"palette_el__unit",style:{background:e.colorTwo}}),n.jsx("div",{className:"palette_el__unit",style:{background:e.colorThree}})]})},e.id)))})})]}),n.jsxs("li",{className:"hmenu_item "+(a?"current":""),children:[n.jsx("div",{className:"hmenu_item__inner",onClick:()=>{E("preset")},children:"光照预设"}),n.jsx("div",{className:"hmenu_item__content",style:{visibility:a?"visible":"hidden"},children:n.jsx("div",{className:"mg_submenu",children:n.jsx("ul",{className:"mg_submenu__list",ref:y,children:Object.keys(b).map((e=>{const s=e.toLocaleLowerCase();return n.jsx("li",{className:`mg_submenu__item mg_submenu__item--${s}`,onClick:()=>{C(e)},children:e.toUpperCase()},s)}))})})})]}),n.jsxs("li",{className:"hmenu_item "+(c?"current":""),children:[n.jsx("div",{className:"hmenu_item__inner",onClick:()=>{E("anim")},children:"光照动画"}),n.jsx("div",{className:"hmenu_item__content",style:{visibility:c?"visible":"hidden"},children:n.jsx("div",{className:"mg_submenu",children:n.jsxs("ul",{className:"mg_submenu__list",children:[n.jsx("li",{className:"mg_submenu__item "+(h?"":"current"),onClick:S,children:"关闭"}),n.jsx("li",{className:"mg_submenu__item "+(h?"current":""),onClick:S,children:"开启"})]})})})]}),n.jsxs("li",{className:"hmenu_item "+(d?"current":""),children:[n.jsx("div",{className:"hmenu_item__inner",onClick:()=>{E("ctrl")},children:"模型动画"}),n.jsx("div",{className:"hmenu_item__content",style:{visibility:d?"visible":"hidden"},children:n.jsx("div",{className:"mg_submenu",children:n.jsxs("ul",{className:"mg_submenu__list",children:[n.jsx("li",{className:"mg_submenu__item "+("off"===p?"current":""),onClick:()=>{z("off")},children:"关闭"}),n.jsx("li",{className:"mg_submenu__item "+("on"===p?"current":""),onClick:()=>{z("on")},children:"开启"})]})})})]})]})})}),n.jsx("div",{className:"mgs_enter",onClick:O,children:n.jsx("div",{className:"mgs_enter__inner",children:"预览"})})]}),n.jsx("div",{className:"mgs_close",onClick:O,style:{visibility:M.hideMenu?"visible":"hidden"},children:n.jsx("div",{className:"mgs_close__shape"})})]})},N=()=>{const e=o(x);return n.jsxs("group",{children:[n.jsx("spotLight",{penumbra:1,intensity:1*b[e.preset][0].factor,castShadow:!0,position:b[e.preset][0].position,color:k[e.colors].colorOne}),n.jsx("spotLight",{penumbra:1,intensity:1*b[e.preset][1].factor,castShadow:!0,position:b[e.preset][1].position,color:k[e.colors].colorTwo}),n.jsx("spotLight",{penumbra:1,intensity:1*b[e.preset][2].factor,castShadow:!0,position:b[e.preset][2].position,color:k[e.colors].colorThree})]})},w=({positions:e=[2,0,2,0,2,0,2,0]})=>{const r=s.useRef();return o(x),l(((e,s)=>(r.current.position.z+=10*s)>20&&(r.current.position.z=-60))),n.jsx("group",{rotation:[0,.5,0],children:n.jsx("group",{ref:r,children:e.map(((e,s)=>n.jsx(d,{form:"circle",intensity:.8,rotation:[Math.PI/2,0,0],position:[e,4,4*s],scale:[3,1,1],color:"#fff"},s)))})})},M=()=>{const e=o(x);return n.jsxs("section",{className:"lab_show",children:[n.jsxs(u,{camera:{position:[0,0,12]},children:[n.jsx("color",{attach:"background",args:["#000"]}),n.jsxs(s.Suspense,{fallback:n.jsx(_,{}),children:[n.jsx(f,{}),e.enableEnv?e.anim?n.jsx(h,{frames:1/0,files:p+"/hdrs/"+e.env,children:n.jsx(w,{})}):n.jsx(h,{files:p+"/hdrs/"+e.env}):e.anim?n.jsx(h,{frames:1/0,children:n.jsx(w,{})}):null]}),n.jsx(N,{})]}),n.jsx(y,{})]})};export{M as default};
