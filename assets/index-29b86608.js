import{j as e}from"./r3-other-vendor-2c8fc3cb.js";import{a as s}from"./react-vendor-670efa73.js";import{J as r,a0 as o,b as n,d as i,F as t,H as a,N as l,C as c,K as m}from"./r3-extend-vendor-ed1023dc.js";import{p as d,u}from"./react-fa7cfd0b.js";import{g as h,I as _,B as p}from"./index-4136c6eb.js";/* empty css                    */import"./three-vendor-6d04682c.js";const x=d({env:"rooftop_night_1k.hdr",preset:"hero",colors:2,anim:!0,animCurr:!1,enableEnv:!0,controlModel:"on",hideMenu:!1,oldPos:[0,0,0]}),j={scale:.03};function f(){const s=t("/assets/images/texture/SurfaceImperfections003_1K_var1.jpg");return e.jsxs("mesh",{rotation:[Math.PI,0,0],position:[0,0,0],children:[e.jsx("planeGeometry",{args:[50,50]}),e.jsx(a,{blur:[500,300],resolution:2048,mixBlur:.5,mixStrength:30,roughness:1,depthScale:1.4,minDepthThreshold:.8,maxDepthThreshold:1.5,color:"#202020",metalness:1,distortionMap:s,distortion:1.5})]})}function g(t){const{nodes:a,materials:l,animations:c}=r("/models/metal_gear.glb"),{ref:m,actions:d,names:_,mixer:p}=o(c),g=s.useRef(),v=u(x),{width:k,height:y}=n((e=>e.viewport));return i(((e,s)=>{if(v.hideMenu){const s=e.clock.getElapsedTime();m.current.rotation.z=s/2%(2*Math.PI),console.log(m.current.rotation.z)}})),s.useEffect((()=>{v.hideMenu?(h.to(m.current.rotation,{x:.53*Math.PI,duration:1,ease:"power2.inOut",delay:.1}),h.to(m.current.position,{y:-1.5,z:-1.5,duration:1,ease:"power2.inOut"}),h.to(g.current.position,{x:0,z:.25*y,duration:1,ease:"power2.inOut"}),h.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{g.current.scale.x=g.current.scale.y=g.current.scale.z=j.scale}})):(h.to(m.current.rotation,{x:.53*Math.PI,z:0,duration:1,ease:"power2.inOut"}),h.to(g.current.position,{x:3.6,z:.3*y,duration:1,ease:"power2.inOut"}),h.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{g.current.scale.x=g.current.scale.y=g.current.scale.z=j.scale}}),h.to(m.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}))}),[v.hideMenu]),s.useEffect((()=>{v.animCurr?(h.to(m.current.rotation,{x:.65*Math.PI,duration:1,ease:"power2.inOut"}),h.to(m.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}),h.to(g.current.position,{x:1,z:.9*y,duration:1,ease:"power2.inOut"}),h.to(j,{scale:1.7,duration:1,ease:"power2.inOut",onUpdate:()=>{g.current.scale.x=g.current.scale.y=g.current.scale.z=j.scale}})):(h.to(m.current.rotation,{x:.55*Math.PI,duration:1,ease:"power2.inOut"}),h.to(m.current.position,{y:0,z:0,duration:1,ease:"power2.inOut"}),h.to(g.current.position,{x:3,z:.3*y,duration:1,ease:"power2.inOut"}),h.to(j,{scale:1,duration:1,ease:"power2.inOut",onUpdate:()=>{g.current.scale.x=g.current.scale.y=g.current.scale.z=j.scale}}))}),[v.animCurr]),s.useEffect((()=>{var e,s;"on"===v.controlModel?null==(e=d.idle)||e.reset().play():"off"===v.controlModel&&(null==(s=d.idle)||s.reset(),d.idle.paused=!0)}),[v.controlModel,d,_]),e.jsx("group",{ref:m,...t,rotation:[.5*Math.PI,0,0],dispose:null,children:e.jsxs("group",{ref:g,position:[0,0,.4*y],name:"scene",children:[e.jsxs("group",{name:"Armature",position:[0,0,-.12],scale:.03,children:[e.jsxs("group",{name:"mgr",children:[e.jsx("skinnedMesh",{name:"hero",geometry:a.hero.geometry,material:l["rai_head.001"],skeleton:a.hero.skeleton}),e.jsx("skinnedMesh",{name:"hero_1",geometry:a.hero_1.geometry,material:l["Hair_1.001"],skeleton:a.hero_1.skeleton}),e.jsx("skinnedMesh",{name:"hero_2",geometry:a.hero_2.geometry,material:l["Hair.001"],skeleton:a.hero_2.skeleton}),e.jsx("skinnedMesh",{name:"hero_3",geometry:a.hero_3.geometry,material:l["rai_jaw.001"],skeleton:a.hero_3.skeleton}),e.jsx("skinnedMesh",{name:"hero_4",geometry:a.hero_4.geometry,material:l["Mask.001"],skeleton:a.hero_4.skeleton}),e.jsx("skinnedMesh",{name:"hero_5",geometry:a.hero_5.geometry,material:l["Beyond_the_Clouds.001"],skeleton:a.hero_5.skeleton}),e.jsx("skinnedMesh",{name:"hero_6",geometry:a.hero_6.geometry,material:l["Brooklyn.001"],skeleton:a.hero_6.skeleton}),e.jsx("skinnedMesh",{name:"hero_7",geometry:a.hero_7.geometry,material:l["rai_jaw.001"],skeleton:a.hero_7.skeleton}),e.jsx("skinnedMesh",{name:"hero_8",geometry:a.hero_8.geometry,material:l["Cool_Touch.001"],skeleton:a.hero_8.skeleton}),e.jsx("skinnedMesh",{name:"hero_9",geometry:a.hero_9.geometry,material:l["Utah.001"],skeleton:a.hero_9.skeleton}),e.jsx("skinnedMesh",{name:"hero_10",geometry:a.hero_10.geometry,material:l["Rodeo.001"],skeleton:a.hero_10.skeleton}),e.jsx("skinnedMesh",{name:"hero_11",geometry:a.hero_11.geometry,material:l["Barbarossa.001"],skeleton:a.hero_11.skeleton})]}),e.jsx("primitive",{object:a.mixamorigHips})]}),e.jsx(f,{rotation:[Math.PI,0,0]})]})})}const v=[{id:1,name:"TV STUDIO",url:"tv_studio_1k.hdr",image:"tvstudio.png"},{id:2,name:"BLUESTUDIO",url:"blue_photo_studio_1k.hdr",image:"bluestudio.png"},{id:3,name:"NEON",url:"rooftop_night_1k.hdr",image:"neon.png"},{id:4,name:"CHRISTMAS",url:"christmas_photo_studio_01_1k.hdr",image:"christmas.png"}],k=[{id:0,colorOne:"#fca44a",colorTwo:"#fff",colorThree:"#f00"},{id:1,colorOne:"#fbc039",colorTwo:"#fff",colorThree:"#35dfde"},{id:2,colorOne:"#fc3131",colorTwo:"#ffd60a",colorThree:"#2D00F7"},{id:3,colorOne:"#2D00F7",colorTwo:"#35dfde",colorThree:"#FFB600"},{id:4,colorOne:"#1c9f80",colorTwo:"#fca44a",colorThree:"#fc3131"},{id:5,colorOne:"#DE700F",colorTwo:"#35dfde",colorThree:"#78206E"},{id:6,colorOne:"#fff",colorTwo:"#DA0300",colorThree:"#3C73DF"},{id:7,colorOne:"#2a9d8f",colorTwo:"#e9c46a",colorThree:"#e76f51"},{id:8,colorOne:"#7209B7",colorTwo:"#F72585",colorThree:"#3A0CA3"},{id:9,colorOne:"#2843AD",colorTwo:"#9A53D0",colorThree:"#818DE0"}],y={hero:[{id:0,position:[0,40,0],factor:2},{id:1,position:[20,0,0],factor:.8},{id:2,position:[0,-40,0],factor:2}],anger:[{id:0,position:[-15,12,3],factor:1},{id:1,position:[20,3,3],factor:.05},{id:2,position:[0,10,0],factor:2}],glowing:[{id:0,position:[-4,18,-12],factor:5},{id:1,position:[0,0,0],factor:0},{id:2,position:[2,5,16],factor:1}],lust:[{id:0,position:[-20,0,15],factor:2},{id:1,position:[15,0,15],factor:.4},{id:2,position:[20,.5,-12],factor:.7}],duo:[{id:0,position:[-20,0,0],factor:1},{id:1,position:[0,20,0],factor:2},{id:2,position:[20,0,0],factor:1}],upon:[{id:0,position:[30,20,-50],factor:1},{id:1,position:[-30,20,-50],factor:.1},{id:2,position:[0,-40,0],factor:3}]},b=()=>{const[r,o]=s.useState(!1),[n,i]=s.useState(!1),[t,a]=s.useState(!1),[l,c]=s.useState(!1),[m,d]=s.useState(!1),[h,_]=s.useState(!0),[p,j]=s.useState("on"),[f,g]=s.useState(""),b=s.useRef(),N=s.useRef(),w=s.useRef(),M=u(x),O=()=>{T(f),x.hideMenu=!M.hideMenu},T=e=>{switch(e){case"env":o(!1);break;case"colorful":i(!1);break;case"preset":a(!1);break;case"anim":c(!1);break;case"ctrl":d(!1)}},C=e=>{var s;Array.from(null==(s=null==b?void 0:b.current)?void 0:s.children).forEach((s=>{s.classList.contains("mg_submenu__item--"+e)?s.classList.add("current"):s.classList.remove("current")})),x.preset=e},S=()=>{_(!h),x.anim=!h},z=e=>{j(e),x.controlModel=e},L=e=>{switch(x.animCurr=!1,e){case"env":r||(T(f),g(e)),o(!r);break;case"colorful":n||(T(f),g(e)),i(!n);break;case"preset":t||(T(f),g(e)),a(!t);break;case"anim":l||(T(f),g(e)),x.animCurr=!l,c(!l);break;case"ctrl":m||(T(f),g(e)),d(!m)}};return s.useEffect((()=>{C(x.preset)}),[]),e.jsxs("section",{className:"mgs_menu",children:[e.jsxs("div",{className:"mgs_main",style:{visibility:M.hideMenu?"hidden":"visible"},children:[e.jsxs("div",{className:"mgs_caption",children:[e.jsx("p",{className:"mgs_subtext",children:"灯光实验室"}),e.jsx("h2",{className:"mgs_title",children:"合金装备崛起：复仇"}),e.jsx("h3",{className:"mgs_subtitle",children:"个性化定制光照系统概念设计"})]}),e.jsx("div",{className:"mgs_hmenu__main",children:e.jsx("nav",{className:"mgs_menu__nav",children:e.jsxs("ul",{className:"hmenu_list",children:[e.jsxs("li",{className:"hmenu_item "+(r?"current":""),children:[e.jsx("div",{className:"hmenu_item__inner",onClick:()=>{L("env")},children:"环境设置"}),e.jsx("div",{className:"hmenu_item__content",style:{visibility:r?"visible":"hidden"},children:e.jsx("div",{className:"mg_environment",ref:N,children:v.map((s=>e.jsx("div",{className:`mg_environment_el mg_environment_el--${s.name} ${s.url===x.env?"current":""}`,onClick:()=>{((e,s)=>{var r;const o=Array.from(null==(r=null==N?void 0:N.current)?void 0:r.children);let n=!1;o.forEach((s=>{s.classList.contains("mg_environment_el--"+e)?s.classList.contains("current")?(s.classList.remove("current"),n=!0):s.classList.add("current"):s.classList.remove("current")})),x.enableEnv=!n,x.env=s})(s.name,s.url)},children:e.jsx("div",{className:"mg_environment_el__wrap",children:e.jsxs("div",{className:"mg_environment__unit",children:[e.jsx("img",{className:"mg_environment__thumb",src:"/hdrs/"+s.image}),e.jsx("div",{className:"mg_environment__tag",children:s.name})]})})},s.name)))})})]}),e.jsxs("li",{className:"hmenu_item "+(n?"current":""),children:[e.jsx("div",{className:"hmenu_item__inner",onClick:()=>{L("colorful")},children:"定制颜色"}),e.jsx("div",{className:"hmenu_item__content",style:{visibility:n?"visible":"hidden"},children:e.jsx("div",{className:"palette_list",ref:w,children:k.map((s=>e.jsx("div",{className:`palette_el palette_el--${s.id} ${s.id===x.colors?"current":""}`,onClick:()=>{var e,r;e=s.id,Array.from(null==(r=null==w?void 0:w.current)?void 0:r.children).forEach((s=>{s.classList.contains("palette_el--"+e)?s.classList.add("current"):s.classList.remove("current")})),x.colors=e},children:e.jsxs("div",{className:"palette_el__wrap",children:[e.jsx("div",{className:"palette_el__unit",style:{background:s.colorOne}}),e.jsx("div",{className:"palette_el__unit",style:{background:s.colorTwo}}),e.jsx("div",{className:"palette_el__unit",style:{background:s.colorThree}})]})},s.id)))})})]}),e.jsxs("li",{className:"hmenu_item "+(t?"current":""),children:[e.jsx("div",{className:"hmenu_item__inner",onClick:()=>{L("preset")},children:"光照预设"}),e.jsx("div",{className:"hmenu_item__content",style:{visibility:t?"visible":"hidden"},children:e.jsx("div",{className:"mg_submenu",children:e.jsx("ul",{className:"mg_submenu__list",ref:b,children:Object.keys(y).map((s=>{const r=s.toLocaleLowerCase();return e.jsx("li",{className:`mg_submenu__item mg_submenu__item--${r}`,onClick:()=>{C(s)},children:s.toUpperCase()},r)}))})})})]}),e.jsxs("li",{className:"hmenu_item "+(l?"current":""),children:[e.jsx("div",{className:"hmenu_item__inner",onClick:()=>{L("anim")},children:"光照动画"}),e.jsx("div",{className:"hmenu_item__content",style:{visibility:l?"visible":"hidden"},children:e.jsx("div",{className:"mg_submenu",children:e.jsxs("ul",{className:"mg_submenu__list",children:[e.jsx("li",{className:"mg_submenu__item "+(h?"":"current"),onClick:S,children:"关闭"}),e.jsx("li",{className:"mg_submenu__item "+(h?"current":""),onClick:S,children:"开启"})]})})})]}),e.jsxs("li",{className:"hmenu_item "+(m?"current":""),children:[e.jsx("div",{className:"hmenu_item__inner",onClick:()=>{L("ctrl")},children:"模型动画"}),e.jsx("div",{className:"hmenu_item__content",style:{visibility:m?"visible":"hidden"},children:e.jsx("div",{className:"mg_submenu",children:e.jsxs("ul",{className:"mg_submenu__list",children:[e.jsx("li",{className:"mg_submenu__item "+("off"===p?"current":""),onClick:()=>{z("off")},children:"关闭"}),e.jsx("li",{className:"mg_submenu__item "+("on"===p?"current":""),onClick:()=>{z("on")},children:"开启"})]})})})]})]})})}),e.jsx("div",{className:"mgs_enter",onClick:O,children:e.jsx("div",{className:"mgs_enter__inner",children:"预览"})})]}),e.jsx("div",{className:"mgs_close",onClick:O,style:{visibility:M.hideMenu?"visible":"hidden"},children:e.jsx("div",{className:"mgs_close__shape"})})]})},N=()=>{const s=u(x);return e.jsxs("group",{children:[e.jsx("spotLight",{penumbra:1,intensity:1*y[s.preset][0].factor,castShadow:!0,position:y[s.preset][0].position,color:k[s.colors].colorOne}),e.jsx("spotLight",{penumbra:1,intensity:1*y[s.preset][1].factor,castShadow:!0,position:y[s.preset][1].position,color:k[s.colors].colorTwo}),e.jsx("spotLight",{penumbra:1,intensity:1*y[s.preset][2].factor,castShadow:!0,position:y[s.preset][2].position,color:k[s.colors].colorThree})]})},w=({positions:r=[2,0,2,0,2,0,2,0]})=>{const o=s.useRef();return u(x),i(((e,s)=>(o.current.position.z+=10*s)>20&&(o.current.position.z=-60))),e.jsx("group",{rotation:[0,.5,0],children:e.jsx("group",{ref:o,children:r.map(((s,r)=>e.jsx(l,{form:"circle",intensity:.8,rotation:[Math.PI/2,0,0],position:[s,4,4*r],scale:[3,1,1],color:"#fff"},r)))})})},M=()=>{const r=u(x);return e.jsxs("section",{className:"lab_show",children:[e.jsxs(c,{camera:{position:[0,0,12]},children:[e.jsx("color",{attach:"background",args:["#000"]}),e.jsxs(s.Suspense,{fallback:e.jsx(_,{}),children:[e.jsx(g,{}),r.enableEnv?r.anim?e.jsx(m,{frames:1/0,files:p+"/hdrs/"+r.env,children:e.jsx(w,{})}):e.jsx(m,{files:p+"/hdrs/"+r.env}):r.anim?e.jsx(m,{frames:1/0,children:e.jsx(w,{})}):null]}),e.jsx(N,{})]}),e.jsx(b,{})]})};export{M as default};
