(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7954],{1617:function(e,t,a){"use strict";a.d(t,{D:function(){return i}});var n=a(8126),r=a(5542),s=a(959),l=a(4771),o=a(3589);let i=s.forwardRef(({args:e,map:t,toneMapped:a=!1,color:i="white",form:c="rect",intensity:u=1,scale:m=1,target:h,children:d,...f},x)=>{let _=s.useRef(null);return s.useLayoutEffect(()=>{d||f.material||((0,r.j)(_.current.material,{color:i}),_.current.material.color.multiplyScalar(u))},[i,u,d,f.material]),s.useLayoutEffect(()=>{h&&_.current.lookAt(Array.isArray(h)?new l.Vector3(...h):h)},[h]),m=Array.isArray(m)&&2===m.length?[m[0],m[1],1]:m,s.createElement("mesh",(0,n.Z)({ref:(0,o.Z)([_,x]),scale:m},f),"circle"===c?s.createElement("ringGeometry",{args:[0,1,64]}):"ring"===c?s.createElement("ringGeometry",{args:[.5,1,64]}):"rect"===c?s.createElement("planeGeometry",null):s.createElement(c,{args:e}),d||(f.material?null:s.createElement("meshBasicMaterial",{toneMapped:a,map:t,side:l.DoubleSide})))})},1045:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/labs/car_studio",function(){return a(8901)}])},6687:function(e,t,a){"use strict";var n=a(1527),r=a(959),s=a(5542),l=a(3387);t.Z=e=>{let t,{size:a,scale:o}=e,i=(0,r.useRef)();return(0,s.A)((e,t)=>{i.current.rotation.x=i.current.rotation.y+=t*Math.PI}),null!==a?t=a:o&&(console.log(o),t=o.xy.min()),(0,n.jsx)(l.xu,{ref:i,scale:t,children:(0,n.jsx)("meshNormalMaterial",{})})}},8901:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var n=a(1527),r=a(83),s=a(4799),l=a(1617),o=a(6468),i=a(4771),c=a(959),u=a(670);function m(e){let{scene:t,nodes:a,materials:r}=(0,u.L)("/models/car.glb");return(0,c.useMemo)(()=>{let{lightColor:t,styledColor:n,bodyColor:r}=e,s=new i.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:t,envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),l=new i.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:n,envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),o=new i.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:r,envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1});new i.MeshPhysicalMaterial({roughness:.3,metalness:.05,color:"green",envMapIntensity:.75,clearcoatRoughness:0,clearcoat:1}),a.mesh_0_9.material=s,a.mesh_0_10.material=s,a.mesh_0_13.material=l,a.mesh_0_11.material=l,a.mesh_0_4.material=o,console.log(a)},[a,r,e]),(0,n.jsx)("primitive",{object:t,...e})}var h=a(3676);function d(e){let{enabled:t}=e;return t&&(0,n.jsxs)(h.xC,{disableNormalPass:!0,children:[(0,n.jsx)(h.F7,{temporalResolve:!0,STRETCH_MISSED_RAYS:!0,USE_MRT:!0,USE_NORMALMAP:!0,USE_ROUGHNESSMAP:!0,ENABLE_JITTERING:!0,ENABLE_BLUR:!0,temporalResolveMix:.9,temporalResolveCorrectionMix:.4,maxSamples:0,resolutionScale:1,blurMix:.2,blurExponent:14.5,blurKernelSize:7.5,rayStep:.04,intensity:2,maxRoughness:1,jitter:.55,jitterSpread:.25,jitterRough:.1,roughnessFadeOut:1,rayFadeOut:0,MAX_STEPS:20,NUM_BINARY_SEARCH_STEPS:6,maxDepthDifference:10,maxDepth:1,thickness:10,ior:1.5}),(0,n.jsx)(h.V2,{offset:[.001,.001]})]})}var f=a(4806),x=a(7848),_=a.n(x),p=a(6687);let y={intensity:2,rotation:Math.PI/2,amount:6,distance:3,scale:[10,.2,1]},g=(y.amount>>1)*y.distance;function M(){let e=(0,f.M4)({汽车:(0,f.so)({LightColor:{value:"#0000ff",label:"灯光颜色"},StyledColor:{value:"#ff0000",label:"点缀颜色"},BodyColor:{value:"#000000",label:"车身颜色"}}),环境:(0,f.so)({PostEffect:{value:!0,label:"后期处理"}})});return(0,c.useEffect)(()=>{var e;return null===(e=document.querySelector(".frame"))||void 0===e||e.classList.add("frame_hidden"),()=>{var e;null===(e=document.querySelector(".frame"))||void 0===e||e.classList.remove("frame_hidden")}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_(),{children:(0,n.jsx)("title",{children:"Labs - Car Studio"})}),(0,n.jsxs)("section",{className:"lab_show",children:[(0,n.jsx)(r.Xz,{shadows:!0,dpr:[1,1.5],camera:{position:[0,0,8],fov:45,near:1,far:45},eventPrefix:"client",children:(0,n.jsxs)(c.Suspense,{fallback:(0,n.jsx)(p.Z,{size:.4}),children:[(0,n.jsx)(j,{}),(0,n.jsx)(m,{position:[0,-1.05,0],lightColor:e.LightColor,styledColor:e.StyledColor,bodyColor:e.BodyColor}),(0,n.jsx)(d,{enabled:e.PostEffect})]})}),(0,n.jsxs)("div",{className:"labs_page__info",children:[(0,n.jsx)("h2",{className:"labs_page__title",children:"Car Studio"}),(0,n.jsx)("p",{className:"labs_page__text",children:"Developed By Leon Lu."})]})]})]})}function j(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("color",{attach:"background",args:["#15151a"]}),(0,n.jsx)("hemisphereLight",{intensity:.15,groundColor:"black"}),(0,n.jsx)("spotLight",{position:[10,20,10],angle:.12,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize":1024}),(0,n.jsx)("pointLight",{distance:1.5,intensity:1,position:[-.15,.7,0]}),(0,n.jsxs)(s.qA,{resolution:512,children:[Array(y.amount).fill(null).map((e,t)=>(0,n.jsx)(l.D,{intensity:y.intensity,"rotation-x":y.rotation,position:[0,4,g-t*y.distance],scale:y.scale},t)),(0,n.jsx)(l.D,{intensity:2,"rotation-y":Math.PI/2,position:[-50,2,0],scale:[100,.4,1]}),(0,n.jsx)(l.D,{intensity:2,"rotation-y":-Math.PI/2,position:[50,2,0],scale:[100,.4,1]})]}),(0,n.jsx)(o.z,{makeDefault:!0,minPolarAngle:.45*Math.PI,maxPolarAngle:.5*Math.PI,minAzimuthAngle:-(.1*Math.PI),maxAzimuthAngle:.1*Math.PI,minDistance:5,maxDistance:10,enablePan:!1})]})}},3589:function(e,t){"use strict";t.Z=function(e){return function(t){e.forEach(function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)})}}}},function(e){e.O(0,[511,749,83,3045,670,9689,8517,6468,1723,9774,2888,179],function(){return e(e.s=1045)}),_N_E=e.O()}]);