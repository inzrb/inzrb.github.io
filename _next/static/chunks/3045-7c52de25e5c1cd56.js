"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3045],{3045:function(e,t,r){r.d(t,{$1:function(){return o},Vs:function(){return l}});var n=r(4771);function o(e,t=1e-4){t=Math.max(t,Number.EPSILON);let r={},o=e.getIndex(),l=e.getAttribute("position"),i=o?o.count:l.count,u=0,s=Object.keys(e.attributes),a={},f={},g=[],h=["getX","getY","getZ","getW"];for(let t=0,r=s.length;t<r;t++){let r=s[t];a[r]=[];let n=e.morphAttributes[r];n&&(f[r]=Array(n.length).fill(0).map(()=>[]))}let p=Math.log10(1/t),c=Math.pow(10,p);for(let t=0;t<i;t++){let n=o?o.getX(t):t,l="";for(let t=0,r=s.length;t<r;t++){let r=s[t],o=e.getAttribute(r),i=o.itemSize;for(let e=0;e<i;e++)l+=`${~~(o[h[e]](n)*c)},`}if(l in r)g.push(r[l]);else{for(let t=0,r=s.length;t<r;t++){let r=s[t],o=e.getAttribute(r),l=e.morphAttributes[r],i=o.itemSize,u=a[r],g=f[r];for(let e=0;e<i;e++){let t=h[e];if(u.push(o[t](n)),l)for(let e=0,r=l.length;e<r;e++)g[e].push(l[e][t](n))}}r[l]=u,g.push(u),u++}}let d=e.clone();for(let t=0,r=s.length;t<r;t++){let r=s[t],o=e.getAttribute(r),l=new o.array.constructor(a[r]),i=new n.BufferAttribute(l,o.itemSize,o.normalized);if(d.setAttribute(r,i),r in f)for(let t=0;t<f[r].length;t++){let o=e.morphAttributes[r][t],l=new o.array.constructor(f[r][t]),i=new n.BufferAttribute(l,o.itemSize,o.normalized);d.morphAttributes[r][t]=i}}return d.setIndex(g),d}function l(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==n.TriangleFanDrawMode&&t!==n.TriangleStripDrawMode)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let r=e.getIndex();if(null===r){let t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}let o=r.count-2,l=[];if(r){if(t===n.TriangleFanDrawMode)for(let e=1;e<=o;e++)l.push(r.getX(0)),l.push(r.getX(e)),l.push(r.getX(e+1));else for(let e=0;e<o;e++)e%2==0?(l.push(r.getX(e)),l.push(r.getX(e+1)),l.push(r.getX(e+2))):(l.push(r.getX(e+2)),l.push(r.getX(e+1)),l.push(r.getX(e)))}l.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let i=e.clone();return i.setIndex(l),i.clearGroups(),i}}}}]);